!(function (e, t) { typeof exports == 'object' && typeof module != 'undefined' ? module.exports = t() : typeof define == 'function' && define.amd ? define(t) : e.CodeMirror = t(); }(this, function () { 'use strict'; var e = navigator.userAgent; var t = navigator.platform; var m = /gecko\/\d/i.test(e); var r = /MSIE \d/.test(e); var n = /Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(e); var i = /Edge\/(\d+)/.exec(e); var x = r || n || i; var k = x && (r ? document.documentMode || 6 : +(i || n)[1]); var b = !i && /WebKit\//.test(e); var o = b && /Qt\/\d+\.\d+/.test(e); var a = !i && /Chrome\//.test(e); var g = /Opera\//.test(e); var s = /Apple Computer/.test(navigator.vendor); var l = /Mac OS X 1\d\D([8-9]|\d\d)\D/.test(e); var c = /PhantomJS/.test(e); var u = !i && /AppleWebKit/.test(e) && /Mobile\/\w+/.test(e); var d = /Android/.test(e); var f = u || d || /webOS|BlackBerry|Opera Mini|Opera Mobi|IEMobile/i.test(e); var w = u || /Mac/.test(t); var h = /\bCrOS\b/.test(e); var p = /win/i.test(t); var v = g && e.match(/Version\/(\d*\.\d*)/); (v = v && Number(v[1])) && v >= 15 && (b = !(g = !1)); var y = w && (o || g && (v == null || v < 12.11)); var C = m || x && k >= 9; function S (e) { return new RegExp('(^|\\s)' + e + '(?:$|\\s)\\s*'); } var T; var L = function (e, t) { var r = e.className; var n = S(t).exec(r); if (n) { var i = r.slice(n.index + n[0].length); e.className = r.slice(0, n.index) + (i ? n[1] + i : ''); } }; function M (e) { for (var t = e.childNodes.length; t > 0; --t)e.removeChild(e.firstChild); return e; } function A (e, t) { return M(e).appendChild(t); } function O (e, t, r, n) { var i = document.createElement(e); if (r && (i.className = r), n && (i.style.cssText = n), typeof t == 'string')i.appendChild(document.createTextNode(t)); else if (t) for (var o = 0; o < t.length; ++o)i.appendChild(t[o]); return i; } function N (e, t, r, n) { var i = O(e, t, r, n); return i.setAttribute('role', 'presentation'), i; } function z (e, t) { if (t.nodeType == 3 && (t = t.parentNode), e.contains) return e.contains(t); do { if (t.nodeType == 11 && (t = t.host), t == e) return !0; } while (t = t.parentNode); } function W () { var t; try { t = document.activeElement; } catch (e) { t = document.body || null; } for (;t && t.shadowRoot && t.shadowRoot.activeElement;)t = t.shadowRoot.activeElement; return t; } function D (e, t) { var r = e.className; S(t).test(r) || (e.className += (r ? ' ' : '') + t); } function H (e, t) { for (var r = e.split(' '), n = 0; n < r.length; n++)r[n] && !S(r[n]).test(t) && (t += ' ' + r[n]); return t; }T = document.createRange ? function (e, t, r, n) { var i = document.createRange(); return i.setEnd(n || e, r), i.setStart(e, t), i; } : function (e, t, r) { var n = document.body.createTextRange(); try { n.moveToElementText(e.parentNode); } catch (e) { return n; } return n.collapse(!0), n.moveEnd('character', r), n.moveStart('character', t), n; }; var P = function (e) { e.select(); }; function E (e) { var t = Array.prototype.slice.call(arguments, 1); return function () { return e.apply(null, t); }; } function I (e, t, r) { for (var n in t = t || {}, e)!e.hasOwnProperty(n) || !1 === r && t.hasOwnProperty(n) || (t[n] = e[n]); return t; } function F (e, t, r, n, i) { t == null && (t = e.search(/[^\s\u00a0]/)) == -1 && (t = e.length); for (var o = n || 0, a = i || 0; ;) { var l = e.indexOf('\t', o); if (l < 0 || t <= l) return a + (t - o); a += l - o, a += r - a % r, o = l + 1; } }u ? P = function (e) { e.selectionStart = 0, e.selectionEnd = e.value.length; } : x && (P = function (e) { try { e.select(); } catch (e) {} }); var R = function () { this.id = null; }; function j (e, t) { for (var r = 0; r < e.length; ++r) if (e[r] == t) return r; return -1; }R.prototype.set = function (e, t) { clearTimeout(this.id), this.id = setTimeout(t, e); }; var B = 30; var K = { toString: function () { return 'CodeMirror.Pass'; } }; var q = { scroll: !1 }; var U = { origin: '*mouse' }; var V = { origin: '+move' }; function G (e, t, r) { for (var n = 0, i = 0; ;) { var o = e.indexOf('\t', n); o == -1 && (o = e.length); var a = o - n; if (o == e.length || t <= i + a) return n + Math.min(a, t - i); if (i += o - n, n = o + 1, t <= (i += r - i % r)) return n; } } var _ = ['']; function $ (e) { for (;_.length <= e;)_.push(X(_) + ' '); return _[e]; } function X (e) { return e[e.length - 1]; } function Y (e, t) { for (var r = [], n = 0; n < e.length; n++)r[n] = t(e[n], n); return r; } function Z () {} function Q (e, t) { var r; return r = Object.create ? Object.create(e) : (Z.prototype = e, new Z()), t && I(t, r), r; } var J = /[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/; function ee (e) { return /\w/.test(e) || e > '' && (e.toUpperCase() != e.toLowerCase() || J.test(e)); } function te (e, t) { return t ? !!(t.source.indexOf('\\w') > -1 && ee(e)) || t.test(e) : ee(e); } function re (e) { for (var t in e) if (e.hasOwnProperty(t) && e[t]) return !1; return !0; } var ne = /[\u0300-\u036f\u0483-\u0489\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u065e\u0670\u06d6-\u06dc\u06de-\u06e4\u06e7\u06e8\u06ea-\u06ed\u0711\u0730-\u074a\u07a6-\u07b0\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0900-\u0902\u093c\u0941-\u0948\u094d\u0951-\u0955\u0962\u0963\u0981\u09bc\u09be\u09c1-\u09c4\u09cd\u09d7\u09e2\u09e3\u0a01\u0a02\u0a3c\u0a41\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a70\u0a71\u0a75\u0a81\u0a82\u0abc\u0ac1-\u0ac5\u0ac7\u0ac8\u0acd\u0ae2\u0ae3\u0b01\u0b3c\u0b3e\u0b3f\u0b41-\u0b44\u0b4d\u0b56\u0b57\u0b62\u0b63\u0b82\u0bbe\u0bc0\u0bcd\u0bd7\u0c3e-\u0c40\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0cbc\u0cbf\u0cc2\u0cc6\u0ccc\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0d3e\u0d41-\u0d44\u0d4d\u0d57\u0d62\u0d63\u0dca\u0dcf\u0dd2-\u0dd4\u0dd6\u0ddf\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0eb1\u0eb4-\u0eb9\u0ebb\u0ebc\u0ec8-\u0ecd\u0f18\u0f19\u0f35\u0f37\u0f39\u0f71-\u0f7e\u0f80-\u0f84\u0f86\u0f87\u0f90-\u0f97\u0f99-\u0fbc\u0fc6\u102d-\u1030\u1032-\u1037\u1039\u103a\u103d\u103e\u1058\u1059\u105e-\u1060\u1071-\u1074\u1082\u1085\u1086\u108d\u109d\u135f\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b7-\u17bd\u17c6\u17c9-\u17d3\u17dd\u180b-\u180d\u18a9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193b\u1a17\u1a18\u1a56\u1a58-\u1a5e\u1a60\u1a62\u1a65-\u1a6c\u1a73-\u1a7c\u1a7f\u1b00-\u1b03\u1b34\u1b36-\u1b3a\u1b3c\u1b42\u1b6b-\u1b73\u1b80\u1b81\u1ba2-\u1ba5\u1ba8\u1ba9\u1c2c-\u1c33\u1c36\u1c37\u1cd0-\u1cd2\u1cd4-\u1ce0\u1ce2-\u1ce8\u1ced\u1dc0-\u1de6\u1dfd-\u1dff\u200c\u200d\u20d0-\u20f0\u2cef-\u2cf1\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua66f-\ua672\ua67c\ua67d\ua6f0\ua6f1\ua802\ua806\ua80b\ua825\ua826\ua8c4\ua8e0-\ua8f1\ua926-\ua92d\ua947-\ua951\ua980-\ua982\ua9b3\ua9b6-\ua9b9\ua9bc\uaa29-\uaa2e\uaa31\uaa32\uaa35\uaa36\uaa43\uaa4c\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uabe5\uabe8\uabed\udc00-\udfff\ufb1e\ufe00-\ufe0f\ufe20-\ufe26\uff9e\uff9f]/; function ie (e) { return e.charCodeAt(0) >= 768 && ne.test(e); } function oe (e, t, r) { for (;(r < 0 ? t > 0 : t < e.length) && ie(e.charAt(t));)t += r; return t; } function ae (e, t, r) { for (var n = r < t ? -1 : 1; ;) { if (t == r) return t; var i = (t + r) / 2; var o = n < 0 ? Math.ceil(i) : Math.floor(i); if (o == t) return e(o) ? t : r; e(o) ? r = o : t = o + n; } } function le (e, t, r) { var n = this; this.input = r, n.scrollbarFiller = O('div', null, 'CodeMirror-scrollbar-filler'), n.scrollbarFiller.setAttribute('cm-not-content', 'true'), n.gutterFiller = O('div', null, 'CodeMirror-gutter-filler'), n.gutterFiller.setAttribute('cm-not-content', 'true'), n.lineDiv = N('div', null, 'CodeMirror-code'), n.selectionDiv = O('div', null, null, 'position: relative; z-index: 1'), n.cursorDiv = O('div', null, 'CodeMirror-cursors'), n.measure = O('div', null, 'CodeMirror-measure'), n.lineMeasure = O('div', null, 'CodeMirror-measure'), n.lineSpace = N('div', [n.measure, n.lineMeasure, n.selectionDiv, n.cursorDiv, n.lineDiv], null, 'position: relative; outline: none'); var i = N('div', [n.lineSpace], 'CodeMirror-lines'); n.mover = O('div', [i], null, 'position: relative'), n.sizer = O('div', [n.mover], 'CodeMirror-sizer'), n.sizerWidth = null, n.heightForcer = O('div', null, null, 'position: absolute; height: ' + B + 'px; width: 1px;'), n.gutters = O('div', null, 'CodeMirror-gutters'), n.lineGutter = null, n.scroller = O('div', [n.sizer, n.heightForcer, n.gutters], 'CodeMirror-scroll'), n.scroller.setAttribute('tabIndex', '-1'), n.wrapper = O('div', [n.scrollbarFiller, n.gutterFiller, n.scroller], 'CodeMirror'), x && k < 8 && (n.gutters.style.zIndex = -1, n.scroller.style.paddingRight = 0), b || m && f || (n.scroller.draggable = !0), e && (e.appendChild ? e.appendChild(n.wrapper) : e(n.wrapper)), n.viewFrom = n.viewTo = t.first, n.reportedViewFrom = n.reportedViewTo = t.first, n.view = [], n.renderedView = null, n.externalMeasured = null, n.viewOffset = 0, n.lastWrapHeight = n.lastWrapWidth = 0, n.updateLineNumbers = null, n.nativeBarWidth = n.barHeight = n.barWidth = 0, n.scrollbarsClipped = !1, n.lineNumWidth = n.lineNumInnerWidth = n.lineNumChars = null, n.alignWidgets = !1, n.cachedCharWidth = n.cachedTextHeight = n.cachedPaddingH = null, n.maxLine = null, n.maxLineLength = 0, n.maxLineChanged = !1, n.wheelDX = n.wheelDY = n.wheelStartX = n.wheelStartY = null, n.shift = !1, n.selForContextMenu = null, n.activeTouch = null, r.init(n); } function se (e, t) { if ((t -= e.first) < 0 || t >= e.size) throw new Error('There is no line ' + (t + e.first) + ' in the document.'); for (var r = e; !r.lines;) for (var n = 0; ;++n) { var i = r.children[n]; var o = i.chunkSize(); if (t < o) { r = i; break; }t -= o; } return r.lines[t]; } function ce (e, r, n) { var i = []; var o = r.line; return e.iter(r.line, n.line + 1, function (e) { var t = e.text; o == n.line && (t = t.slice(0, n.ch)), o == r.line && (t = t.slice(r.ch)), i.push(t), ++o; }), i; } function ue (e, t, r) { var n = []; return e.iter(t, r, function (e) { n.push(e.text); }), n; } function de (e, t) { var r = t - e.height; if (r) for (var n = e; n; n = n.parent)n.height += r; } function fe (e) { if (e.parent == null) return null; for (var t = e.parent, r = j(t.lines, e), n = t.parent; n; n = (t = n).parent) for (var i = 0; n.children[i] != t; ++i)r += n.children[i].chunkSize(); return r + t.first; } function he (e, t) { var r = e.first; e:do { for (var n = 0; n < e.children.length; ++n) { var i = e.children[n]; var o = i.height; if (t < o) { e = i; continue e; }t -= o, r += i.chunkSize(); } return r; } while (!e.lines);for (var a = 0; a < e.lines.length; ++a) { var l = e.lines[a].height; if (t < l) break; t -= l; } return r + a; } function pe (e, t) { return t >= e.first && t < e.first + e.size; } function me (e, t) { return String(e.lineNumberFormatter(t + e.firstLineNumber)); } function ge (e, t, r) { if (void 0 === r && (r = null), !(this instanceof ge)) return new ge(e, t, r); this.line = e, this.ch = t, this.sticky = r; } function ve (e, t) { return e.line - t.line || e.ch - t.ch; } function ye (e, t) { return e.sticky == t.sticky && ve(e, t) == 0; } function be (e) { return ge(e.line, e.ch); } function we (e, t) { return ve(e, t) < 0 ? t : e; } function xe (e, t) { return ve(e, t) < 0 ? e : t; } function ke (e, t) { return Math.max(e.first, Math.min(t, e.first + e.size - 1)); } function Ce (e, t) { if (t.line < e.first) return ge(e.first, 0); var r = e.first + e.size - 1; return t.line > r ? ge(r, se(e, r).text.length) : (function (e, t) { var r = e.ch; return r == null || t < r ? ge(e.line, t) : r < 0 ? ge(e.line, 0) : e; }(t, se(e, t.line).text.length)); } function Se (e, t) { for (var r = [], n = 0; n < t.length; n++)r[n] = Ce(e, t[n]); return r; } var Te = !1; var Le = !1; function Me (e, t, r) { this.marker = e, this.from = t, this.to = r; } function Ae (e, t) { if (e) for (var r = 0; r < e.length; ++r) { var n = e[r]; if (n.marker == t) return n; } } function Ne (e, t) { for (var r, n = 0; n < e.length; ++n)e[n] != t && (r = r || []).push(e[n]); return r; } function Oe (e, t) { if (t.full) return null; var r = pe(e, t.from.line) && se(e, t.from.line).markedSpans; var n = pe(e, t.to.line) && se(e, t.to.line).markedSpans; if (!r && !n) return null; var i = t.from.ch; var o = t.to.ch; var a = ve(t.from, t.to) == 0; var l = (function (e, t, r) { var n; if (e) for (var i = 0; i < e.length; ++i) { var o = e[i]; var a = o.marker; if (o.from == null || (a.inclusiveLeft ? o.from <= t : o.from < t) || o.from == t && a.type == 'bookmark' && (!r || !o.marker.insertLeft)) { var l = o.to == null || (a.inclusiveRight ? o.to >= t : o.to > t); (n = n || []).push(new Me(a, o.from, l ? null : o.to)); } } return n; }(r, i, a)); var s = (function (e, t, r) { var n; if (e) for (var i = 0; i < e.length; ++i) { var o = e[i]; var a = o.marker; if (o.to == null || (a.inclusiveRight ? o.to >= t : o.to > t) || o.from == t && a.type == 'bookmark' && (!r || o.marker.insertLeft)) { var l = o.from == null || (a.inclusiveLeft ? o.from <= t : o.from < t); (n = n || []).push(new Me(a, l ? null : o.from - t, o.to == null ? null : o.to - t)); } } return n; }(n, o, a)); var c = t.text.length == 1; var u = X(t.text).length + (c ? i : 0); if (l) for (var d = 0; d < l.length; ++d) { var f = l[d]; if (f.to == null) { var h = Ae(s, f.marker); h ? c && (f.to = h.to == null ? null : h.to + u) : f.to = i; } } if (s) for (var p = 0; p < s.length; ++p) { var m = s[p]; if (m.to != null && (m.to += u), m.from == null)Ae(l, m.marker) || (m.from = u, c && (l = l || []).push(m)); else m.from += u, c && (l = l || []).push(m); }l = l && ze(l), s && s != l && (s = ze(s)); var g = [l]; if (!c) { var v; var y = t.text.length - 2; if (y > 0 && l) for (var b = 0; b < l.length; ++b)l[b].to == null && (v = v || []).push(new Me(l[b].marker, null, null)); for (var w = 0; w < y; ++w)g.push(v); g.push(s); } return g; } function ze (e) { for (var t = 0; t < e.length; ++t) { var r = e[t]; r.from != null && r.from == r.to && !1 !== r.marker.clearWhenEmpty && e.splice(t--, 1); } return e.length ? e : null; } function We (e) { var t = e.markedSpans; if (t) { for (var r = 0; r < t.length; ++r)t[r].marker.detachLine(e); e.markedSpans = null; } } function De (e, t) { if (t) { for (var r = 0; r < t.length; ++r)t[r].marker.attachLine(e); e.markedSpans = t; } } function He (e) { return e.inclusiveLeft ? -1 : 0; } function Pe (e) { return e.inclusiveRight ? 1 : 0; } function Ee (e, t) { var r = e.lines.length - t.lines.length; if (r != 0) return r; var n = e.find(); var i = t.find(); var o = ve(n.from, i.from) || He(e) - He(t); if (o) return -o; var a = ve(n.to, i.to) || Pe(e) - Pe(t); return a || t.id - e.id; } function Ie (e, t) { var r; var n = Le && e.markedSpans; if (n) for (var i = void 0, o = 0; o < n.length; ++o)(i = n[o]).marker.collapsed && (t ? i.from : i.to) == null && (!r || Ee(r, i.marker) < 0) && (r = i.marker); return r; } function Fe (e) { return Ie(e, !0); } function Re (e) { return Ie(e, !1); } function je (e, t) { var r; var n = Le && e.markedSpans; if (n) for (var i = 0; i < n.length; ++i) { var o = n[i]; o.marker.collapsed && (o.from == null || o.from < t) && (o.to == null || o.to > t) && (!r || Ee(r, o.marker) < 0) && (r = o.marker); } return r; } function Be (e, t, r, n, i) { var o = se(e, t); var a = Le && o.markedSpans; if (a) for (var l = 0; l < a.length; ++l) { var s = a[l]; if (s.marker.collapsed) { var c = s.marker.find(0); var u = ve(c.from, r) || He(s.marker) - He(i); var d = ve(c.to, n) || Pe(s.marker) - Pe(i); if (!(u >= 0 && d <= 0 || u <= 0 && d >= 0) && (u <= 0 && (s.marker.inclusiveRight && i.inclusiveLeft ? ve(c.to, r) >= 0 : ve(c.to, r) > 0) || u >= 0 && (s.marker.inclusiveRight && i.inclusiveLeft ? ve(c.from, n) <= 0 : ve(c.from, n) < 0))) return !0; } } } function Ke (e) { for (var t; t = Fe(e);)e = t.find(-1, !0).line; return e; } function qe (e, t) { var r = se(e, t); var n = Ke(r); return r == n ? t : fe(n); } function Ue (e, t) { if (t > e.lastLine()) return t; var r; var n = se(e, t); if (!Ve(e, n)) return t; for (;r = Re(n);)n = r.find(1, !0).line; return fe(n) + 1; } function Ve (e, t) { var r = Le && t.markedSpans; if (r) for (var n = void 0, i = 0; i < r.length; ++i) if ((n = r[i]).marker.collapsed) { if (n.from == null) return !0; if (!n.marker.widgetNode && n.from == 0 && n.marker.inclusiveLeft && Ge(e, t, n)) return !0; } } function Ge (e, t, r) { if (r.to == null) { var n = r.marker.find(1, !0); return Ge(e, n.line, Ae(n.line.markedSpans, r.marker)); } if (r.marker.inclusiveRight && r.to == t.text.length) return !0; for (var i = void 0, o = 0; o < t.markedSpans.length; ++o) if ((i = t.markedSpans[o]).marker.collapsed && !i.marker.widgetNode && i.from == r.to && (i.to == null || i.to != r.from) && (i.marker.inclusiveLeft || r.marker.inclusiveRight) && Ge(e, t, i)) return !0; } function _e (e) { for (var t = 0, r = (e = Ke(e)).parent, n = 0; n < r.lines.length; ++n) { var i = r.lines[n]; if (i == e) break; t += i.height; } for (var o = r.parent; o; o = (r = o).parent) for (var a = 0; a < o.children.length; ++a) { var l = o.children[a]; if (l == r) break; t += l.height; } return t; } function $e (e) { if (e.height == 0) return 0; for (var t, r = e.text.length, n = e; t = Fe(n);) { var i = t.find(0, !0); n = i.from.line, r += i.from.ch - i.to.ch; } for (n = e; t = Re(n);) { var o = t.find(0, !0); r -= n.text.length - o.from.ch, r += (n = o.to.line).text.length - o.to.ch; } return r; } function Xe (e) { var r = e.display; var t = e.doc; r.maxLine = se(t, t.first), r.maxLineLength = $e(r.maxLine), r.maxLineChanged = !0, t.iter(function (e) { var t = $e(e); t > r.maxLineLength && (r.maxLineLength = t, r.maxLine = e); }); } var Ye = null; function Ze (e, t, r) { var n; Ye = null; for (var i = 0; i < e.length; ++i) { var o = e[i]; if (o.from < t && o.to > t) return i; o.to == t && (o.from != o.to && r == 'before' ? n = i : Ye = i), o.from == t && (o.from != o.to && r != 'before' ? n = i : Ye = i); } return n != null ? n : Ye; } var Qe; var Je; var et; var tt; var rt; var nt; var it; var ot = (Qe = 'bbbbbbbbbtstwsbbbbbbbbbbbbbbssstwNN%%%NNNNNN,N,N1111111111NNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNbbbbbbsbbbbbbbbbbbbbbbbbbbbbbbbbb,N%%%%NNNNLNNNNN%%11NLNNN1LNNNNNLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLN', Je = 'nnnnnnNNr%%r,rNNmmmmmmmmmmmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmmmmmmmmnnnnnnnnnn%nnrrrmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmnNmmmmmmrrmmNmmmmrr1111111111', et = /[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/, tt = /[stwN]/, rt = /[LRr]/, nt = /[Lb1n]/, it = /[1n]/, function (e, t) { var r = t == 'ltr' ? 'L' : 'R'; if (e.length == 0 || t == 'ltr' && !et.test(e)) return !1; for (var n, i = e.length, o = [], a = 0; a < i; ++a)o.push((n = e.charCodeAt(a)) <= 247 ? Qe.charAt(n) : n >= 1424 && n <= 1524 ? 'R' : n >= 1536 && n <= 1785 ? Je.charAt(n - 1536) : n >= 1774 && n <= 2220 ? 'r' : n >= 8192 && n <= 8203 ? 'w' : n == 8204 ? 'b' : 'L'); for (var l = 0, s = r; l < i; ++l) { var c = o[l]; c == 'm' ? o[l] = s : s = c; } for (var u = 0, d = r; u < i; ++u) { var f = o[u]; f == '1' && d == 'r' ? o[u] = 'n' : rt.test(f) && (d = f) == 'r' && (o[u] = 'R'); } for (var h = 1, p = o[0]; h < i - 1; ++h) { var m = o[h]; m == '+' && p == '1' && o[h + 1] == '1' ? o[h] = '1' : m != ',' || p != o[h + 1] || p != '1' && p != 'n' || (o[h] = p), p = m; } for (var g = 0; g < i; ++g) { var v = o[g]; if (v == ',')o[g] = 'N'; else if (v == '%') { var y = void 0; for (y = g + 1; y < i && o[y] == '%'; ++y);for (var b = g && o[g - 1] == '!' || y < i && o[y] == '1' ? '1' : 'N', w = g; w < y; ++w)o[w] = b; g = y - 1; } } for (var x = 0, k = r; x < i; ++x) { var C = o[x]; k == 'L' && C == '1' ? o[x] = 'L' : rt.test(C) && (k = C); } for (var S = 0; S < i; ++S) if (tt.test(o[S])) { var T = void 0; for (T = S + 1; T < i && tt.test(o[T]); ++T);for (var L = (S ? o[S - 1] : r) == 'L', M = L == ((T < i ? o[T] : r) == 'L') ? L ? 'L' : 'R' : r, A = S; A < T; ++A)o[A] = M; S = T - 1; } for (var N, O = [], z = 0; z < i;) if (nt.test(o[z])) { var W = z; for (++z; z < i && nt.test(o[z]); ++z);O.push(new at(0, W, z)); } else { var D = z; var H = O.length; for (++z; z < i && o[z] != 'L'; ++z);for (var P = D; P < z;) if (it.test(o[P])) { D < P && O.splice(H, 0, new at(1, D, P)); var E = P; for (++P; P < z && it.test(o[P]); ++P);O.splice(H, 0, new at(2, E, P)), D = P; } else ++P; D < z && O.splice(H, 0, new at(1, D, z)); } return t == 'ltr' && (O[0].level == 1 && (N = e.match(/^\s+/)) && (O[0].from = N[0].length, O.unshift(new at(0, 0, N[0].length))), X(O).level == 1 && (N = e.match(/\s+$/)) && (X(O).to -= N[0].length, O.push(new at(0, i - N[0].length, i)))), t == 'rtl' ? O.reverse() : O; }); function at (e, t, r) { this.level = e, this.from = t, this.to = r; } function lt (e, t) { var r = e.order; return r == null && (r = e.order = ot(e.text, t)), r; } var st = []; var ct = function (e, t, r) { if (e.addEventListener)e.addEventListener(t, r, !1); else if (e.attachEvent)e.attachEvent('on' + t, r); else { var n = e._handlers || (e._handlers = {}); n[t] = (n[t] || st).concat(r); } }; function ut (e, t) { return e._handlers && e._handlers[t] || st; } function dt (e, t, r) { if (e.removeEventListener)e.removeEventListener(t, r, !1); else if (e.detachEvent)e.detachEvent('on' + t, r); else { var n = e._handlers; var i = n && n[t]; if (i) { var o = j(i, r); o > -1 && (n[t] = i.slice(0, o).concat(i.slice(o + 1))); } } } function ft (e, t) { var r = ut(e, t); if (r.length) for (var n = Array.prototype.slice.call(arguments, 2), i = 0; i < r.length; ++i)r[i].apply(null, n); } function ht (e, t, r) { return typeof t == 'string' && (t = { type: t, preventDefault: function () { this.defaultPrevented = !0; } }), ft(e, r || t.type, e, t), bt(t) || t.codemirrorIgnore; } function pt (e) { var t = e._handlers && e._handlers.cursorActivity; if (t) for (var r = e.curOp.cursorActivityHandlers || (e.curOp.cursorActivityHandlers = []), n = 0; n < t.length; ++n)j(r, t[n]) == -1 && r.push(t[n]); } function mt (e, t) { return ut(e, t).length > 0; } function gt (e) { e.prototype.on = function (e, t) { ct(this, e, t); }, e.prototype.off = function (e, t) { dt(this, e, t); }; } function vt (e) { e.preventDefault ? e.preventDefault() : e.returnValue = !1; } function yt (e) { e.stopPropagation ? e.stopPropagation() : e.cancelBubble = !0; } function bt (e) { return e.defaultPrevented != null ? e.defaultPrevented : e.returnValue == 0; } function wt (e) { vt(e), yt(e); } function xt (e) { return e.target || e.srcElement; } function kt (e) { var t = e.which; return t == null && (1 & e.button ? t = 1 : 2 & e.button ? t = 3 : 4 & e.button && (t = 2)), w && e.ctrlKey && t == 1 && (t = 3), t; } var Ct; var St; var Tt = (function () { if (x && k < 9) return !1; var e = O('div'); return 'draggable' in e || 'dragDrop' in e; }()); function Lt (e) { if (Ct == null) { var t = O('span', '​'); A(e, O('span', [t, document.createTextNode('x')])), e.firstChild.offsetHeight != 0 && (Ct = t.offsetWidth <= 1 && t.offsetHeight > 2 && !(x && k < 8)); } var r = Ct ? O('span', '​') : O('span', ' ', null, 'display: inline-block; width: 1px; margin-right: -1px'); return r.setAttribute('cm-text', ''), r; } function Mt (e) { if (St != null) return St; var t = A(e, document.createTextNode('AخA')); var r = T(t, 0, 1).getBoundingClientRect(); var n = T(t, 1, 2).getBoundingClientRect(); return M(e), !(!r || r.left == r.right) && (St = n.right - r.right < 3); } var At; var Nt = '\n\nb'.split(/\n/).length != 3 ? function (e) { for (var t = 0, r = [], n = e.length; t <= n;) { var i = e.indexOf('\n', t); i == -1 && (i = e.length); var o = e.slice(t, e.charAt(i - 1) == '\r' ? i - 1 : i); var a = o.indexOf('\r'); a != -1 ? (r.push(o.slice(0, a)), t += a + 1) : (r.push(o), t = i + 1); } return r; } : function (e) { return e.split(/\r\n?|\n/); }; var Ot = window.getSelection ? function (e) { try { return e.selectionStart != e.selectionEnd; } catch (e) { return !1; } } : function (e) { var t; try { t = e.ownerDocument.selection.createRange(); } catch (e) {} return !(!t || t.parentElement() != e) && t.compareEndPoints('StartToEnd', t) != 0; }; var zt = 'oncopy' in (At = O('div')) || (At.setAttribute('oncopy', 'return;'), typeof At.oncopy == 'function'); var Wt = null; var Dt = {}; var Ht = {}; function Pt (e) { if (typeof e == 'string' && Ht.hasOwnProperty(e))e = Ht[e]; else if (e && typeof e.name == 'string' && Ht.hasOwnProperty(e.name)) { var t = Ht[e.name]; typeof t == 'string' && (t = { name: t }), (e = Q(t, e)).name = t.name; } else { if (typeof e == 'string' && /^[\w\-]+\/[\w\-]+\+xml$/.test(e)) return Pt('application/xml'); if (typeof e == 'string' && /^[\w\-]+\/[\w\-]+\+json$/.test(e)) return Pt('application/json'); } return typeof e == 'string' ? { name: e } : e || { name: 'null' }; } function Et (e, t) { t = Pt(t); var r = Dt[t.name]; if (!r) return Et(e, 'text/plain'); var n = r(e, t); if (It.hasOwnProperty(t.name)) { var i = It[t.name]; for (var o in i)i.hasOwnProperty(o) && (n.hasOwnProperty(o) && (n['_' + o] = n[o]), n[o] = i[o]); } if (n.name = t.name, t.helperType && (n.helperType = t.helperType), t.modeProps) for (var a in t.modeProps)n[a] = t.modeProps[a]; return n; } var It = {}; function Ft (e, t) { I(t, It.hasOwnProperty(e) ? It[e] : It[e] = {}); } function Rt (e, t) { if (!0 === t) return t; if (e.copyState) return e.copyState(t); var r = {}; for (var n in t) { var i = t[n]; i instanceof Array && (i = i.concat([])), r[n] = i; } return r; } function jt (e, t) { for (var r; e.innerMode && (r = e.innerMode(t)) && r.mode != e;)t = r.state, e = r.mode; return r || { mode: e, state: t }; } function Bt (e, t, r) { return !e.startState || e.startState(t, r); } var Kt = function (e, t, r) { this.pos = this.start = 0, this.string = e, this.tabSize = t || 8, this.lastColumnPos = this.lastColumnValue = 0, this.lineStart = 0, this.lineOracle = r; }; Kt.prototype.eol = function () { return this.pos >= this.string.length; }, Kt.prototype.sol = function () { return this.pos == this.lineStart; }, Kt.prototype.peek = function () { return this.string.charAt(this.pos) || void 0; }, Kt.prototype.next = function () { if (this.pos < this.string.length) return this.string.charAt(this.pos++); }, Kt.prototype.eat = function (e) { var t = this.string.charAt(this.pos); if (typeof e == 'string' ? t == e : t && (e.test ? e.test(t) : e(t))) return ++this.pos, t; }, Kt.prototype.eatWhile = function (e) { for (var t = this.pos; this.eat(e););return this.pos > t; }, Kt.prototype.eatSpace = function () { for (var e = this.pos; /[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos; return this.pos > e; }, Kt.prototype.skipToEnd = function () { this.pos = this.string.length; }, Kt.prototype.skipTo = function (e) { var t = this.string.indexOf(e, this.pos); if (t > -1) return this.pos = t, !0; }, Kt.prototype.backUp = function (e) { this.pos -= e; }, Kt.prototype.column = function () { return this.lastColumnPos < this.start && (this.lastColumnValue = F(this.string, this.start, this.tabSize, this.lastColumnPos, this.lastColumnValue), this.lastColumnPos = this.start), this.lastColumnValue - (this.lineStart ? F(this.string, this.lineStart, this.tabSize) : 0); }, Kt.prototype.indentation = function () { return F(this.string, null, this.tabSize) - (this.lineStart ? F(this.string, this.lineStart, this.tabSize) : 0); }, Kt.prototype.match = function (e, t, r) { if (typeof e != 'string') { var n = this.string.slice(this.pos).match(e); return n && n.index > 0 ? null : (n && !1 !== t && (this.pos += n[0].length), n); } function i (e) { return r ? e.toLowerCase() : e; } if (i(this.string.substr(this.pos, e.length)) == i(e)) return !1 !== t && (this.pos += e.length), !0; }, Kt.prototype.current = function () { return this.string.slice(this.start, this.pos); }, Kt.prototype.hideFirstChars = function (e, t) { this.lineStart += e; try { return t(); } finally { this.lineStart -= e; } }, Kt.prototype.lookAhead = function (e) { var t = this.lineOracle; return t && t.lookAhead(e); }, Kt.prototype.baseToken = function () { var e = this.lineOracle; return e && e.baseToken(this.pos); }; var qt = function (e, t) { this.state = e, this.lookAhead = t; }; var Ut = function (e, t, r, n) { this.state = t, this.doc = e, this.line = r, this.maxLookAhead = n || 0, this.baseTokens = null, this.baseTokenPos = 1; }; function Vt (t, r, n, e) { var s = [t.state.modeGen]; var i = {}; er(t, r.text, t.doc.mode, n, function (e, t) { return s.push(e, t); }, i, e); for (var c = n.state, o = function (e) { n.baseTokens = s; var o = t.state.overlays[e]; var a = 1; var l = 0; n.state = !0, er(t, r.text, o.mode, n, function (e, t) { for (var r = a; l < e;) { var n = s[a]; e < n && s.splice(a, 1, e, s[a + 1], n), a += 2, l = Math.min(e, n); } if (t) if (o.opaque)s.splice(r, a - r, e, 'overlay ' + t), a = r + 2; else for (;r < a; r += 2) { var i = s[r + 1]; s[r + 1] = (i ? i + ' ' : '') + 'overlay ' + t; } }, i), n.state = c, n.baseTokens = null, n.baseTokenPos = 1; }, a = 0; a < t.state.overlays.length; ++a)o(a); return { styles: s, classes: i.bgClass || i.textClass ? i : null }; } function Gt (e, t, r) { if (!t.styles || t.styles[0] != e.state.modeGen) { var n = _t(e, fe(t)); var i = t.text.length > e.options.maxHighlightLength && Rt(e.doc.mode, n.state); var o = Vt(e, t, n); i && (n.state = i), t.stateAfter = n.save(!i), t.styles = o.styles, o.classes ? t.styleClasses = o.classes : t.styleClasses && (t.styleClasses = null), r === e.doc.highlightFrontier && (e.doc.modeFrontier = Math.max(e.doc.modeFrontier, ++e.doc.highlightFrontier)); } return t.styles; } function _t (r, n, e) { var t = r.doc; var i = r.display; if (!t.mode.startState) return new Ut(t, !0, n); var o = (function (e, t, r) { for (var n, i, o = e.doc, a = r ? -1 : t - (e.doc.mode.innerMode ? 1e3 : 100), l = t; a < l; --l) { if (l <= o.first) return o.first; var s = se(o, l - 1); var c = s.stateAfter; if (c && (!r || l + (c instanceof qt ? c.lookAhead : 0) <= o.modeFrontier)) return l; var u = F(s.text, null, e.options.tabSize); (i == null || u < n) && (i = l - 1, n = u); } return i; }(r, n, e)); var a = o > t.first && se(t, o - 1).stateAfter; var l = a ? Ut.fromSaved(t, a, o) : new Ut(t, Bt(t.mode), o); return t.iter(o, n, function (e) { $t(r, e.text, l); var t = l.line; e.stateAfter = t == n - 1 || t % 5 == 0 || t >= i.viewFrom && t < i.viewTo ? l.save() : null, l.nextLine(); }), e && (t.modeFrontier = l.line), l; } function $t (e, t, r, n) { var i = e.doc.mode; var o = new Kt(t, e.options.tabSize, r); for (o.start = o.pos = n || 0, t == '' && Xt(i, r.state); !o.eol();)Yt(i, o, r.state), o.start = o.pos; } function Xt (e, t) { if (e.blankLine) return e.blankLine(t); if (e.innerMode) { var r = jt(e, t); return r.mode.blankLine ? r.mode.blankLine(r.state) : void 0; } } function Yt (e, t, r, n) { for (var i = 0; i < 10; i++) { n && (n[0] = jt(e, r).mode); var o = e.token(t, r); if (t.pos > t.start) return o; } throw new Error('Mode ' + e.name + ' failed to advance stream.'); }Ut.prototype.lookAhead = function (e) { var t = this.doc.getLine(this.line + e); return t != null && e > this.maxLookAhead && (this.maxLookAhead = e), t; }, Ut.prototype.baseToken = function (e) { if (!this.baseTokens) return null; for (;this.baseTokens[this.baseTokenPos] <= e;) this.baseTokenPos += 2; var t = this.baseTokens[this.baseTokenPos + 1]; return { type: t && t.replace(/( |^)overlay .*/, ''), size: this.baseTokens[this.baseTokenPos] - e }; }, Ut.prototype.nextLine = function () { this.line++, this.maxLookAhead > 0 && this.maxLookAhead--; }, Ut.fromSaved = function (e, t, r) { return t instanceof qt ? new Ut(e, Rt(e.mode, t.state), r, t.lookAhead) : new Ut(e, Rt(e.mode, t), r); }, Ut.prototype.save = function (e) { var t = !1 !== e ? Rt(this.doc.mode, this.state) : this.state; return this.maxLookAhead > 0 ? new qt(t, this.maxLookAhead) : t; }; var Zt = function (e, t, r) { this.start = e.start, this.end = e.pos, this.string = e.current(), this.type = t || null, this.state = r; }; function Qt (e, t, r, n) { var i; var o; var a = e.doc; var l = a.mode; var s = se(a, (t = Ce(a, t)).line); var c = _t(e, t.line, r); var u = new Kt(s.text, e.options.tabSize, c); for (n && (o = []); (n || u.pos < t.ch) && !u.eol();)u.start = u.pos, i = Yt(l, u, c.state), n && o.push(new Zt(u, i, Rt(a.mode, c.state))); return n ? o : new Zt(u, i, c.state); } function Jt (e, t) { if (e) for (;;) { var r = e.match(/(?:^|\s+)line-(background-)?(\S+)/); if (!r) break; e = e.slice(0, r.index) + e.slice(r.index + r[0].length); var n = r[1] ? 'bgClass' : 'textClass'; t[n] == null ? t[n] = r[2] : new RegExp('(?:^|s)' + r[2] + '(?:$|s)').test(t[n]) || (t[n] += ' ' + r[2]); } return e; } function er (e, t, r, n, i, o, a) { var l = r.flattenSpans; l == null && (l = e.options.flattenSpans); var s; var c = 0; var u = null; var d = new Kt(t, e.options.tabSize, n); var f = e.options.addModeClass && [null]; for (t == '' && Jt(Xt(r, n.state), o); !d.eol();) { if (s = d.pos > e.options.maxHighlightLength ? (l = !1, a && $t(e, t, n, d.pos), d.pos = t.length, null) : Jt(Yt(r, d, n.state, f), o), f) { var h = f[0].name; h && (s = 'm-' + (s ? h + ' ' + s : h)); } if (!l || u != s) { for (;c < d.start;)i(c = Math.min(d.start, c + 5e3), u); u = s; }d.start = d.pos; } for (;c < d.pos;) { var p = Math.min(d.pos, c + 5e3); i(p, u), c = p; } } var tr = function (e, t, r) { this.text = e, De(this, t), this.height = r ? r(this) : 1; }; tr.prototype.lineNo = function () { return fe(this); }, gt(tr); var rr = {}; var nr = {}; function ir (e, t) { if (!e || /^\s*$/.test(e)) return null; var r = t.addModeClass ? nr : rr; return r[e] || (r[e] = e.replace(/\S+/g, 'cm-$&')); } function or (e, t) { var r = N('span', null, null, b ? 'padding-right: .1px' : null); var n = { pre: N('pre', [r], 'CodeMirror-line'), content: r, col: 0, pos: 0, cm: e, trailingSpace: !1, splitSpaces: (x || b) && e.getOption('lineWrapping') }; t.measure = {}; for (var i = 0; i <= (t.rest ? t.rest.length : 0); i++) { var o = i ? t.rest[i - 1] : t.line; var a = void 0; n.pos = 0, n.addToken = lr, Mt(e.display.measure) && (a = lt(o, e.doc.direction)) && (n.addToken = sr(n.addToken, a)), n.map = [], ur(o, n, Gt(e, o, t != e.display.externalMeasured && fe(o))), o.styleClasses && (o.styleClasses.bgClass && (n.bgClass = H(o.styleClasses.bgClass, n.bgClass || '')), o.styleClasses.textClass && (n.textClass = H(o.styleClasses.textClass, n.textClass || ''))), n.map.length == 0 && n.map.push(0, 0, n.content.appendChild(Lt(e.display.measure))), i == 0 ? (t.measure.map = n.map, t.measure.cache = {}) : ((t.measure.maps || (t.measure.maps = [])).push(n.map), (t.measure.caches || (t.measure.caches = [])).push({})); } if (b) { var l = n.content.lastChild; (/\bcm-tab\b/.test(l.className) || l.querySelector && l.querySelector('.cm-tab')) && (n.content.className = 'cm-tab-wrap-hack'); } return ft(e, 'renderLine', e, t.line, n.pre), n.pre.className && (n.textClass = H(n.pre.className, n.textClass || '')), n; } function ar (e) { var t = O('span', '•', 'cm-invalidchar'); return t.title = '\\u' + e.charCodeAt(0).toString(16), t.setAttribute('aria-label', t.title), t; } function lr (e, t, r, n, i, o, a) { if (t) { var l; var s = e.splitSpaces ? (function (e, t) { if (e.length > 1 && !/ {2}/.test(e)) return e; for (var r = t, n = '', i = 0; i < e.length; i++) { var o = e.charAt(i); o != ' ' || !r || i != e.length - 1 && e.charCodeAt(i + 1) != 32 || (o = ' '), n += o, r = o == ' '; } return n; }(t, e.trailingSpace)) : t; var c = e.cm.state.specialChars; var u = !1; if (c.test(t)) { l = document.createDocumentFragment(); for (var d = 0; ;) { c.lastIndex = d; var f = c.exec(t); var h = f ? f.index - d : t.length - d; if (h) { var p = document.createTextNode(s.slice(d, d + h)); x && k < 9 ? l.appendChild(O('span', [p])) : l.appendChild(p), e.map.push(e.pos, e.pos + h, p), e.col += h, e.pos += h; } if (!f) break; d += 1 + h; var m = void 0; if (f[0] == '\t') { var g = e.cm.options.tabSize; var v = g - e.col % g; (m = l.appendChild(O('span', $(v), 'cm-tab'))).setAttribute('role', 'presentation'), m.setAttribute('cm-text', '\t'), e.col += v; } else f[0] == '\r' || f[0] == '\n' ? (m = l.appendChild(O('span', f[0] == '\r' ? '␍' : '␤', 'cm-invalidchar'))).setAttribute('cm-text', f[0]) : ((m = e.cm.options.specialCharPlaceholder(f[0])).setAttribute('cm-text', f[0]), x && k < 9 ? l.appendChild(O('span', [m])) : l.appendChild(m)), e.col += 1; e.map.push(e.pos, e.pos + 1, m), e.pos++; } } else e.col += t.length, l = document.createTextNode(s), e.map.push(e.pos, e.pos + t.length, l), x && k < 9 && (u = !0), e.pos += t.length; if (e.trailingSpace = s.charCodeAt(t.length - 1) == 32, r || n || i || u || a) { var y = r || ''; n && (y += n), i && (y += i); var b = O('span', [l], y, a); return o && (b.title = o), e.content.appendChild(b); }e.content.appendChild(l); } } function sr (d, f) { return function (e, t, r, n, i, o, a) { r = r ? r + ' cm-force-border' : 'cm-force-border'; for (var l = e.pos, s = l + t.length; ;) { for (var c = void 0, u = 0; u < f.length && !((c = f[u]).to > l && c.from <= l); u++);if (c.to >= s) return d(e, t, r, n, i, o, a); d(e, t.slice(0, c.to - l), r, n, null, o, a), n = null, t = t.slice(c.to - l), l = c.to; } }; } function cr (e, t, r, n) { var i = !n && r.widgetNode; i && e.map.push(e.pos, e.pos + t, i), !n && e.cm.display.input.needsContentAttribute && (i = i || e.content.appendChild(document.createElement('span'))).setAttribute('cm-marker', r.id), i && (e.cm.display.input.setUneditable(i), e.content.appendChild(i)), e.pos += t, e.trailingSpace = !1; } function ur (e, t, r) { var n = e.markedSpans; var i = e.text; var o = 0; if (n) for (var a, l, s, c, u, d, f, h = i.length, p = 0, m = 1, g = '', v = 0; ;) { if (v == p) { s = c = u = d = l = '', f = null, v = 1 / 0; for (var y = [], b = void 0, w = 0; w < n.length; ++w) { var x = n[w]; var k = x.marker; k.type == 'bookmark' && x.from == p && k.widgetNode ? y.push(k) : x.from <= p && (x.to == null || x.to > p || k.collapsed && x.to == p && x.from == p) ? (x.to != null && x.to != p && v > x.to && (v = x.to, c = ''), k.className && (s += ' ' + k.className), k.css && (l = (l ? l + ';' : '') + k.css), k.startStyle && x.from == p && (u += ' ' + k.startStyle), k.endStyle && x.to == v && (b = b || []).push(k.endStyle, x.to), k.title && !d && (d = k.title), k.collapsed && (!f || Ee(f.marker, k) < 0) && (f = x)) : x.from > p && v > x.from && (v = x.from); } if (b) for (var C = 0; C < b.length; C += 2)b[C + 1] == v && (c += ' ' + b[C]); if (!f || f.from == p) for (var S = 0; S < y.length; ++S)cr(t, 0, y[S]); if (f && (f.from || 0) == p) { if (cr(t, (f.to == null ? h + 1 : f.to) - p, f.marker, f.from == null), f.to == null) return; f.to == p && (f = !1); } } if (h <= p) break; for (var T = Math.min(h, v); ;) { if (g) { var L = p + g.length; if (!f) { var M = T < L ? g.slice(0, T - p) : g; t.addToken(t, M, a ? a + s : s, u, p + M.length == v ? c : '', d, l); } if (T <= L) { g = g.slice(T - p), p = T; break; }p = L, u = ''; }g = i.slice(o, o = r[m++]), a = ir(r[m++], t.cm.options); } } else for (var A = 1; A < r.length; A += 2)t.addToken(t, i.slice(o, o = r[A]), ir(r[A + 1], t.cm.options)); } function dr (e, t, r) { this.line = t, this.rest = (function (e) { for (var t, r; t = Re(e);)e = t.find(1, !0).line, (r = r || []).push(e); return r; }(t)), this.size = this.rest ? fe(X(this.rest)) - r + 1 : 1, this.node = this.text = null, this.hidden = Ve(e, t); } function fr (e, t, r) { for (var n, i = [], o = t; o < r; o = n) { var a = new dr(e.doc, se(e.doc, o), o); n = o + a.size, i.push(a); } return i; } var hr = null; function pr (e, t) { var r = e.ownsGroup; if (r) try { !(function (e) { var t = e.delayedCallbacks; var r = 0; do { for (;r < t.length; r++)t[r].call(null); for (var n = 0; n < e.ops.length; n++) { var i = e.ops[n]; if (i.cursorActivityHandlers) for (;i.cursorActivityCalled < i.cursorActivityHandlers.length;)i.cursorActivityHandlers[i.cursorActivityCalled++].call(null, i.cm); } } while (r < t.length); }(r)); } finally { hr = null, t(r); } } var mr = null; function gr (e, t) { var r = ut(e, t); if (r.length) { var n; var i = Array.prototype.slice.call(arguments, 2); hr ? n = hr.delayedCallbacks : mr ? n = mr : (n = mr = [], setTimeout(vr, 0)); for (var o = function (e) { n.push(function () { return r[e].apply(null, i); }); }, a = 0; a < r.length; ++a)o(a); } } function vr () { var e = mr; mr = null; for (var t = 0; t < e.length; ++t)e[t](); } function yr (e, t, r, n) { for (var i = 0; i < t.changes.length; i++) { var o = t.changes[i]; o == 'text' ? xr(e, t) : o == 'gutter' ? Cr(e, t, r, n) : o == 'class' ? kr(e, t) : o == 'widget' && Sr(e, t, n); }t.changes = null; } function br (e) { return e.node == e.text && (e.node = O('div', null, null, 'position: relative'), e.text.parentNode && e.text.parentNode.replaceChild(e.node, e.text), e.node.appendChild(e.text), x && k < 8 && (e.node.style.zIndex = 2)), e.node; } function wr (e, t) { var r = e.display.externalMeasured; return r && r.line == t.line ? (e.display.externalMeasured = null, t.measure = r.measure, r.built) : or(e, t); } function xr (e, t) { var r = t.text.className; var n = wr(e, t); t.text == t.node && (t.node = n.pre), t.text.parentNode.replaceChild(n.pre, t.text), t.text = n.pre, n.bgClass != t.bgClass || n.textClass != t.textClass ? (t.bgClass = n.bgClass, t.textClass = n.textClass, kr(e, t)) : r && (t.text.className = r); } function kr (e, t) { !(function (e, t) { var r = t.bgClass ? t.bgClass + ' ' + (t.line.bgClass || '') : t.line.bgClass; if (r && (r += ' CodeMirror-linebackground'), t.background)r ? t.background.className = r : (t.background.parentNode.removeChild(t.background), t.background = null); else if (r) { var n = br(t); t.background = n.insertBefore(O('div', null, r), n.firstChild), e.display.input.setUneditable(t.background); } }(e, t)), t.line.wrapClass ? br(t).className = t.line.wrapClass : t.node != t.text && (t.node.className = ''); var r = t.textClass ? t.textClass + ' ' + (t.line.textClass || '') : t.line.textClass; t.text.className = r || ''; } function Cr (e, t, r, n) { if (t.gutter && (t.node.removeChild(t.gutter), t.gutter = null), t.gutterBackground && (t.node.removeChild(t.gutterBackground), t.gutterBackground = null), t.line.gutterClass) { var i = br(t); t.gutterBackground = O('div', null, 'CodeMirror-gutter-background ' + t.line.gutterClass, 'left: ' + (e.options.fixedGutter ? n.fixedPos : -n.gutterTotalWidth) + 'px; width: ' + n.gutterTotalWidth + 'px'), e.display.input.setUneditable(t.gutterBackground), i.insertBefore(t.gutterBackground, t.text); } var o = t.line.gutterMarkers; if (e.options.lineNumbers || o) { var a = br(t); var l = t.gutter = O('div', null, 'CodeMirror-gutter-wrapper', 'left: ' + (e.options.fixedGutter ? n.fixedPos : -n.gutterTotalWidth) + 'px'); if (e.display.input.setUneditable(l), a.insertBefore(l, t.text), t.line.gutterClass && (l.className += ' ' + t.line.gutterClass), !e.options.lineNumbers || o && o['CodeMirror-linenumbers'] || (t.lineNumber = l.appendChild(O('div', me(e.options, r), 'CodeMirror-linenumber CodeMirror-gutter-elt', 'left: ' + n.gutterLeft['CodeMirror-linenumbers'] + 'px; width: ' + e.display.lineNumInnerWidth + 'px'))), o) for (var s = 0; s < e.options.gutters.length; ++s) { var c = e.options.gutters[s]; var u = o.hasOwnProperty(c) && o[c]; u && l.appendChild(O('div', [u], 'CodeMirror-gutter-elt', 'left: ' + n.gutterLeft[c] + 'px; width: ' + n.gutterWidth[c] + 'px')); } } } function Sr (e, t, r) { t.alignable && (t.alignable = null); for (var n = t.node.firstChild, i = void 0; n; n = i)i = n.nextSibling, n.className == 'CodeMirror-linewidget' && t.node.removeChild(n); Tr(e, t, r); } function Tr (e, t, r) { if (Lr(e, t.line, t, r, !0), t.rest) for (var n = 0; n < t.rest.length; n++)Lr(e, t.rest[n], t, r, !1); } function Lr (e, t, r, n, i) { if (t.widgets) for (var o = br(r), a = 0, l = t.widgets; a < l.length; ++a) { var s = l[a]; var c = O('div', [s.node], 'CodeMirror-linewidget'); s.handleMouseEvents || c.setAttribute('cm-ignore-events', 'true'), Mr(s, c, r, n), e.display.input.setUneditable(c), i && s.above ? o.insertBefore(c, r.gutter || r.text) : o.appendChild(c), gr(s, 'redraw'); } } function Mr (e, t, r, n) { if (e.noHScroll) { (r.alignable || (r.alignable = [])).push(t); var i = n.wrapperWidth; t.style.left = n.fixedPos + 'px', e.coverGutter || (i -= n.gutterTotalWidth, t.style.paddingLeft = n.gutterTotalWidth + 'px'), t.style.width = i + 'px'; }e.coverGutter && (t.style.zIndex = 5, t.style.position = 'relative', e.noHScroll || (t.style.marginLeft = -n.gutterTotalWidth + 'px')); } function Ar (e) { if (e.height != null) return e.height; var t = e.doc.cm; if (!t) return 0; if (!z(document.body, e.node)) { var r = 'position: relative;'; e.coverGutter && (r += 'margin-left: -' + t.display.gutters.offsetWidth + 'px;'), e.noHScroll && (r += 'width: ' + t.display.wrapper.clientWidth + 'px;'), A(t.display.measure, O('div', [e.node], null, r)); } return e.height = e.node.parentNode.offsetHeight; } function Nr (e, t) { for (var r = xt(t); r != e.wrapper; r = r.parentNode) if (!r || r.nodeType == 1 && r.getAttribute('cm-ignore-events') == 'true' || r.parentNode == e.sizer && r != e.mover) return !0; } function Or (e) { return e.lineSpace.offsetTop; } function zr (e) { return e.mover.offsetHeight - e.lineSpace.offsetHeight; } function Wr (e) { if (e.cachedPaddingH) return e.cachedPaddingH; var t = A(e.measure, O('pre', 'x')); var r = window.getComputedStyle ? window.getComputedStyle(t) : t.currentStyle; var n = { left: parseInt(r.paddingLeft), right: parseInt(r.paddingRight) }; return isNaN(n.left) || isNaN(n.right) || (e.cachedPaddingH = n), n; } function Dr (e) { return B - e.display.nativeBarWidth; } function Hr (e) { return e.display.scroller.clientWidth - Dr(e) - e.display.barWidth; } function Pr (e) { return e.display.scroller.clientHeight - Dr(e) - e.display.barHeight; } function Er (e, t, r) { if (e.line == t) return { map: e.measure.map, cache: e.measure.cache }; for (var n = 0; n < e.rest.length; n++) if (e.rest[n] == t) return { map: e.measure.maps[n], cache: e.measure.caches[n] }; for (var i = 0; i < e.rest.length; i++) if (fe(e.rest[i]) > r) return { map: e.measure.maps[i], cache: e.measure.caches[i], before: !0 }; } function Ir (e, t, r, n) { return jr(e, Rr(e, t), r, n); } function Fr (e, t) { if (t >= e.display.viewFrom && t < e.display.viewTo) return e.display.view[gn(e, t)]; var r = e.display.externalMeasured; return r && t >= r.lineN && t < r.lineN + r.size ? r : void 0; } function Rr (e, t) { var r = fe(t); var n = Fr(e, r); n && !n.text ? n = null : n && n.changes && (yr(e, n, r, dn(e)), e.curOp.forceUpdate = !0); var i = Er(n = n || (function (e, t) { var r = fe(t = Ke(t)); var n = e.display.externalMeasured = new dr(e.doc, t, r); n.lineN = r; var i = n.built = or(e, n); return n.text = i.pre, A(e.display.lineMeasure, i.pre), n; }(e, t)), t, r); return { line: t, view: n, rect: null, map: i.map, cache: i.cache, before: i.before, hasHeights: !1 }; } function jr (e, t, r, n, i) { t.before && (r = -1); var o; var a = r + (n || ''); return t.cache.hasOwnProperty(a) ? o = t.cache[a] : (t.rect || (t.rect = t.view.text.getBoundingClientRect()), t.hasHeights || ((function (e, t, r) { var n = e.options.lineWrapping; var i = n && Hr(e); if (!t.measure.heights || n && t.measure.width != i) { var o = t.measure.heights = []; if (n) { t.measure.width = i; for (var a = t.text.firstChild.getClientRects(), l = 0; l < a.length - 1; l++) { var s = a[l]; var c = a[l + 1]; Math.abs(s.bottom - c.bottom) > 2 && o.push((s.bottom + c.top) / 2 - r.top); } }o.push(r.bottom - r.top); } }(e, t.view, t.rect)), t.hasHeights = !0), (o = (function (e, t, r, n) { var i; var o = qr(t.map, r, n); var a = o.node; var l = o.start; var s = o.end; var c = o.collapse; if (a.nodeType == 3) { for (var u = 0; u < 4; u++) { for (;l && ie(t.line.text.charAt(o.coverStart + l));)--l; for (;o.coverStart + s < o.coverEnd && ie(t.line.text.charAt(o.coverStart + s));)++s; if ((i = x && k < 9 && l == 0 && s == o.coverEnd - o.coverStart ? a.parentNode.getBoundingClientRect() : Ur(T(a, l, s).getClientRects(), n)).left || i.right || l == 0) break; s = l, l -= 1, c = 'right'; }x && k < 11 && (i = (function (e, t) { if (!window.screen || screen.logicalXDPI == null || screen.logicalXDPI == screen.deviceXDPI || !(function (e) { if (Wt != null) return Wt; var t = A(e, O('span', 'x')); var r = t.getBoundingClientRect(); var n = T(t, 0, 1).getBoundingClientRect(); return Wt = Math.abs(r.left - n.left) > 1; }(e))) return t; var r = screen.logicalXDPI / screen.deviceXDPI; var n = screen.logicalYDPI / screen.deviceYDPI; return { left: t.left * r, right: t.right * r, top: t.top * n, bottom: t.bottom * n }; }(e.display.measure, i))); } else { var d; l > 0 && (c = n = 'right'), i = e.options.lineWrapping && (d = a.getClientRects()).length > 1 ? d[n == 'right' ? d.length - 1 : 0] : a.getBoundingClientRect(); } if (x && k < 9 && !l && (!i || !i.left && !i.right)) { var f = a.parentNode.getClientRects()[0]; i = f ? { left: f.left, right: f.left + un(e.display), top: f.top, bottom: f.bottom } : Kr; } for (var h = i.top - t.rect.top, p = i.bottom - t.rect.top, m = (h + p) / 2, g = t.view.measure.heights, v = 0; v < g.length - 1 && !(m < g[v]); v++);var y = v ? g[v - 1] : 0; var b = g[v]; var w = { left: (c == 'right' ? i.right : i.left) - t.rect.left, right: (c == 'left' ? i.left : i.right) - t.rect.left, top: y, bottom: b }; i.left || i.right || (w.bogus = !0); e.options.singleCursorHeightPerLine || (w.rtop = h, w.rbottom = p); return w; }(e, t, r, n))).bogus || (t.cache[a] = o)), { left: o.left, right: o.right, top: i ? o.rtop : o.top, bottom: i ? o.rbottom : o.bottom }; } var Br; var Kr = { left: 0, right: 0, top: 0, bottom: 0 }; function qr (e, t, r) { for (var n, i, o, a, l, s, c = 0; c < e.length; c += 3) if (l = e[c], s = e[c + 1], t < l ? (i = 0, o = 1, a = 'left') : t < s ? o = (i = t - l) + 1 : (c == e.length - 3 || t == s && e[c + 3] > t) && (i = (o = s - l) - 1, s <= t && (a = 'right')), i != null) { if (n = e[c + 2], l == s && r == (n.insertLeft ? 'left' : 'right') && (a = r), r == 'left' && i == 0) for (;c && e[c - 2] == e[c - 3] && e[c - 1].insertLeft;)n = e[2 + (c -= 3)], a = 'left'; if (r == 'right' && i == s - l) for (;c < e.length - 3 && e[c + 3] == e[c + 4] && !e[c + 5].insertLeft;)n = e[(c += 3) + 2], a = 'right'; break; } return { node: n, start: i, end: o, collapse: a, coverStart: l, coverEnd: s }; } function Ur (e, t) { var r = Kr; if (t == 'left') for (var n = 0; n < e.length && (r = e[n]).left == r.right; n++);else for (var i = e.length - 1; i >= 0 && (r = e[i]).left == r.right; i--);return r; } function Vr (e) { if (e.measure && (e.measure.cache = {}, e.measure.heights = null, e.rest)) for (var t = 0; t < e.rest.length; t++)e.measure.caches[t] = {}; } function Gr (e) { e.display.externalMeasure = null, M(e.display.lineMeasure); for (var t = 0; t < e.display.view.length; t++)Vr(e.display.view[t]); } function _r (e) { Gr(e), e.display.cachedCharWidth = e.display.cachedTextHeight = e.display.cachedPaddingH = null, e.options.lineWrapping || (e.display.maxLineChanged = !0), e.display.lineNumChars = null; } function $r () { return a && d ? -(document.body.getBoundingClientRect().left - parseInt(getComputedStyle(document.body).marginLeft)) : window.pageXOffset || (document.documentElement || document.body).scrollLeft; } function Xr () { return a && d ? -(document.body.getBoundingClientRect().top - parseInt(getComputedStyle(document.body).marginTop)) : window.pageYOffset || (document.documentElement || document.body).scrollTop; } function Yr (e) { var t = 0; if (e.widgets) for (var r = 0; r < e.widgets.length; ++r)e.widgets[r].above && (t += Ar(e.widgets[r])); return t; } function Zr (e, t, r, n, i) { if (!i) { var o = Yr(t); r.top += o, r.bottom += o; } if (n == 'line') return r; n = n || 'local'; var a = _e(t); if (n == 'local' ? a += Or(e.display) : a -= e.display.viewOffset, n == 'page' || n == 'window') { var l = e.display.lineSpace.getBoundingClientRect(); a += l.top + (n == 'window' ? 0 : Xr()); var s = l.left + (n == 'window' ? 0 : $r()); r.left += s, r.right += s; } return r.top += a, r.bottom += a, r; } function Qr (e, t, r) { if (r == 'div') return t; var n = t.left; var i = t.top; if (r == 'page')n -= $r(), i -= Xr(); else if (r == 'local' || !r) { var o = e.display.sizer.getBoundingClientRect(); n += o.left, i += o.top; } var a = e.display.lineSpace.getBoundingClientRect(); return { left: n - a.left, top: i - a.top }; } function Jr (e, t, r, n, i) { return Zr(e, n = n || se(e.doc, t.line), Ir(e, n, t.ch, i), r); } function en (n, e, i, o, a, l) { function s (e, t) { var r = jr(n, a, e, t ? 'right' : 'left', l); return t ? r.left = r.right : r.right = r.left, Zr(n, o, r, i); }o = o || se(n.doc, e.line), a = a || Rr(n, o); var c = lt(o, n.doc.direction); var t = e.ch; var r = e.sticky; if (t >= o.text.length ? (t = o.text.length, r = 'before') : t <= 0 && (t = 0, r = 'after'), !c) return s(r == 'before' ? t - 1 : t, r == 'before'); function u (e, t, r) { return s(r ? e - 1 : e, c[t].level == 1 != r); } var d = Ze(c, t, r); var f = Ye; var h = u(t, d, r == 'before'); return f != null && (h.other = u(t, f, r != 'before')), h; } function tn (e, t) { var r = 0; t = Ce(e.doc, t), e.options.lineWrapping || (r = un(e.display) * t.ch); var n = se(e.doc, t.line); var i = _e(n) + Or(e.display); return { left: r, right: r, top: i, bottom: i + n.height }; } function rn (e, t, r, n, i) { var o = ge(e, t, r); return o.xRel = i, n && (o.outside = !0), o; } function nn (e, t, r) { var n = e.doc; if ((r += e.display.viewOffset) < 0) return rn(n.first, 0, null, !0, -1); var i = he(n, r); var o = n.first + n.size - 1; if (o < i) return rn(n.first + n.size - 1, se(n, o).text.length, null, !0, 1); t < 0 && (t = 0); for (var a = se(n, i); ;) { var l = sn(e, a, i, t, r); var s = je(a, l.ch + (l.xRel > 0 ? 1 : 0)); if (!s) return l; var c = s.find(1); if (c.line == i) return c; a = se(n, i = c.line); } } function on (t, e, r, n) { n -= Yr(e); var i = e.text.length; var o = ae(function (e) { return jr(t, r, e - 1).bottom <= n; }, i, 0); return { begin: o, end: i = ae(function (e) { return jr(t, r, e).top > n; }, o, i) }; } function an (e, t, r, n) { return on(e, t, r = r || Rr(e, t), Zr(e, t, jr(e, r, n), 'line').top); } function ln (e, t, r, n) { return !(e.bottom <= r) && (e.top > r || (n ? e.left : e.right) > t); } function sn (r, e, t, n, i) { i -= _e(e); var o = Rr(r, e); var a = Yr(e); var l = 0; var s = e.text.length; var c = !0; var u = lt(e, r.doc.direction); if (u) { var d = (r.options.lineWrapping ? function (e, t, r, n, i, o, a) { var l = on(e, t, n, a); var s = l.begin; var c = l.end; /\s/.test(t.text.charAt(c - 1)) && c--; for (var u = null, d = null, f = 0; f < i.length; f++) { var h = i[f]; if (!(h.from >= c || h.to <= s)) { var p = h.level != 1; var m = jr(e, n, p ? Math.min(c, h.to) - 1 : Math.max(s, h.from)).right; var g = m < o ? o - m + 1e9 : m - o; (!u || g < d) && (u = h, d = g); } }u = u || i[i.length - 1]; u.from < s && (u = { from: s, to: u.to, level: u.level }); u.to > c && (u = { from: u.from, to: c, level: u.level }); return u; } : function (n, i, o, a, l, s, c) { var e = ae(function (e) { var t = l[e]; var r = t.level != 1; return ln(en(n, ge(o, r ? t.to : t.from, r ? 'before' : 'after'), 'line', i, a), s, c, !0); }, 0, l.length - 1); var t = l[e]; if (e > 0) { var r = t.level != 1; var u = en(n, ge(o, r ? t.from : t.to, r ? 'after' : 'before'), 'line', i, a); ln(u, s, c, !0) && u.top > c && (t = l[e - 1]); } return t; })(r, e, t, o, u, n, i); l = (c = d.level != 1) ? d.from : d.to - 1, s = c ? d.to : d.from - 1; } var f; var h; var p = null; var m = null; var g = ae(function (e) { var t = jr(r, o, e); return t.top += a, t.bottom += a, !!ln(t, n, i, !1) && (t.top <= i && t.left <= n && (p = e, m = t), !0); }, l, s); var v = !1; if (m) { var y = n - m.left < m.right - n; var b = y == c; g = p + (b ? 0 : 1), h = b ? 'after' : 'before', f = y ? m.left : m.right; } else { c || g != s && g != l || g++, h = g == 0 ? 'after' : g == e.text.length ? 'before' : jr(r, o, g - (c ? 1 : 0)).bottom + a <= i == c ? 'after' : 'before'; var w = en(r, ge(t, g, h), 'line', e, o); f = w.left, v = i < w.top || i >= w.bottom; } return rn(t, g = oe(e.text, g, 1), h, v, n - f); } function cn (e) { if (e.cachedTextHeight != null) return e.cachedTextHeight; if (Br == null) { Br = O('pre'); for (var t = 0; t < 49; ++t)Br.appendChild(document.createTextNode('x')), Br.appendChild(O('br')); Br.appendChild(document.createTextNode('x')); }A(e.measure, Br); var r = Br.offsetHeight / 50; return r > 3 && (e.cachedTextHeight = r), M(e.measure), r || 1; } function un (e) { if (e.cachedCharWidth != null) return e.cachedCharWidth; var t = O('span', 'xxxxxxxxxx'); var r = O('pre', [t]); A(e.measure, r); var n = t.getBoundingClientRect(); var i = (n.right - n.left) / 10; return i > 2 && (e.cachedCharWidth = i), i || 10; } function dn (e) { for (var t = e.display, r = {}, n = {}, i = t.gutters.clientLeft, o = t.gutters.firstChild, a = 0; o; o = o.nextSibling, ++a)r[e.options.gutters[a]] = o.offsetLeft + o.clientLeft + i, n[e.options.gutters[a]] = o.clientWidth; return { fixedPos: fn(t), gutterTotalWidth: t.gutters.offsetWidth, gutterLeft: r, gutterWidth: n, wrapperWidth: t.wrapper.clientWidth }; } function fn (e) { return e.scroller.getBoundingClientRect().left - e.sizer.getBoundingClientRect().left; } function hn (n) { var i = cn(n.display); var o = n.options.lineWrapping; var a = o && Math.max(5, n.display.scroller.clientWidth / un(n.display) - 3); return function (e) { if (Ve(n.doc, e)) return 0; var t = 0; if (e.widgets) for (var r = 0; r < e.widgets.length; r++)e.widgets[r].height && (t += e.widgets[r].height); return o ? t + (Math.ceil(e.text.length / a) || 1) * i : t + i; }; } function pn (e) { var t = e.doc; var r = hn(e); t.iter(function (e) { var t = r(e); t != e.height && de(e, t); }); } function mn (e, t, r, n) { var i = e.display; if (!r && xt(t).getAttribute('cm-not-content') == 'true') return null; var o; var a; var l = i.lineSpace.getBoundingClientRect(); try { o = t.clientX - l.left, a = t.clientY - l.top; } catch (t) { return null; } var s; var c = nn(e, o, a); if (n && c.xRel == 1 && (s = se(e.doc, c.line).text).length == c.ch) { var u = F(s, s.length, e.options.tabSize) - s.length; c = ge(c.line, Math.max(0, Math.round((o - Wr(e.display).left) / un(e.display)) - u)); } return c; } function gn (e, t) { if (t >= e.display.viewTo) return null; if ((t -= e.display.viewFrom) < 0) return null; for (var r = e.display.view, n = 0; n < r.length; n++) if ((t -= r[n].size) < 0) return n; } function vn (e) { e.display.input.showSelection(e.display.input.prepareSelection()); } function yn (e, t) { void 0 === t && (t = !0); for (var r = e.doc, n = {}, i = n.cursors = document.createDocumentFragment(), o = n.selection = document.createDocumentFragment(), a = 0; a < r.sel.ranges.length; a++) if (t || a != r.sel.primIndex) { var l = r.sel.ranges[a]; if (!(l.from().line >= e.display.viewTo || l.to().line < e.display.viewFrom)) { var s = l.empty(); (s || e.options.showCursorWhenSelecting) && bn(e, l.head, i), s || xn(e, l, o); } } return n; } function bn (e, t, r) { var n = en(e, t, 'div', null, null, !e.options.singleCursorHeightPerLine); var i = r.appendChild(O('div', ' ', 'CodeMirror-cursor')); if (i.style.left = n.left + 'px', i.style.top = n.top + 'px', i.style.height = Math.max(0, n.bottom - n.top) * e.options.cursorHeight + 'px', n.other) { var o = r.appendChild(O('div', ' ', 'CodeMirror-cursor CodeMirror-secondarycursor')); o.style.display = '', o.style.left = n.other.left + 'px', o.style.top = n.other.top + 'px', o.style.height = 0.85 * (n.other.bottom - n.other.top) + 'px'; } } function wn (e, t) { return e.top - t.top || e.left - t.left; } function xn (a, e, t) { var r = a.display; var n = a.doc; var i = document.createDocumentFragment(); var o = Wr(a.display); var L = o.left; var M = Math.max(r.sizerWidth, Hr(a) - r.sizer.offsetLeft) - o.right; var A = n.direction == 'ltr'; function N (e, t, r, n) { t < 0 && (t = 0), t = Math.round(t), n = Math.round(n), i.appendChild(O('div', null, 'CodeMirror-selected', 'position: absolute; left: ' + e + 'px;\n                             top: ' + t + 'px; width: ' + (r == null ? M - e : r) + 'px;\n                             height: ' + (n - t) + 'px')); } function l (r, y, b) { var w; var x; var o = se(n, r); var k = o.text.length; function C (e, t) { return Jr(a, ge(r, e), 'div', o, t); } function S (e, t, r) { var n = an(a, o, null, e); var i = t == 'ltr' == (r == 'after') ? 'left' : 'right'; return C(r == 'after' ? n.begin : n.end - (/\s/.test(o.text.charAt(n.end - 1)) ? 2 : 1), i)[i]; } var T = lt(o, n.direction); return (function (e, t, r, n) { if (!e) return n(t, r, 'ltr', 0); for (var i = !1, o = 0; o < e.length; ++o) { var a = e[o]; (a.from < r && a.to > t || t == r && a.to == t) && (n(Math.max(a.from, t), Math.min(a.to, r), a.level == 1 ? 'rtl' : 'ltr', o), i = !0); }i || n(t, r, 'ltr'); }(T, y || 0, b == null ? k : b, function (e, t, r, n) { var i = r == 'ltr'; var o = C(e, i ? 'left' : 'right'); var a = C(t - 1, i ? 'right' : 'left'); var l = y == null && e == 0; var s = b == null && t == k; var c = n == 0; var u = !T || n == T.length - 1; if (a.top - o.top <= 3) { var d = (A ? s : l) && u; var f = (A ? l : s) && c ? L : (i ? o : a).left; var h = d ? M : (i ? a : o).right; N(f, o.top, h - f, o.bottom); } else { var p, m, g, v; v = i ? (p = A && l && c ? L : o.left, m = A ? M : S(e, r, 'before'), g = A ? L : S(t, r, 'after'), A && s && u ? M : a.right) : (p = A ? S(e, r, 'before') : L, m = !A && l && c ? M : o.right, g = !A && s && u ? L : a.left, A ? S(t, r, 'after') : M), N(p, o.top, m - p, o.bottom), o.bottom < a.top && N(L, o.bottom, null, a.top), N(g, a.top, v - g, a.bottom); }(!w || wn(o, w) < 0) && (w = o), wn(a, w) < 0 && (w = a), (!x || wn(o, x) < 0) && (x = o), wn(a, x) < 0 && (x = a); })), { start: w, end: x }; } var s = e.from(); var c = e.to(); if (s.line == c.line)l(s.line, s.ch, c.ch); else { var u = se(n, s.line); var d = se(n, c.line); var f = Ke(u) == Ke(d); var h = l(s.line, s.ch, f ? u.text.length + 1 : null).end; var p = l(c.line, f ? 0 : null, c.ch).start; f && (h.top < p.top - 2 ? (N(h.right, h.top, null, h.bottom), N(L, p.top, p.left, p.bottom)) : N(h.right, h.top, p.left - h.right, h.bottom)), h.bottom < p.top && N(L, h.bottom, null, p.top); }t.appendChild(i); } function kn (e) { if (e.state.focused) { var t = e.display; clearInterval(t.blinker); var r = !0; t.cursorDiv.style.visibility = '', e.options.cursorBlinkRate > 0 ? t.blinker = setInterval(function () { return t.cursorDiv.style.visibility = (r = !r) ? '' : 'hidden'; }, e.options.cursorBlinkRate) : e.options.cursorBlinkRate < 0 && (t.cursorDiv.style.visibility = 'hidden'); } } function Cn (e) { e.state.focused || (e.display.input.focus(), Tn(e)); } function Sn (e) { e.state.delayingBlurEvent = !0, setTimeout(function () { e.state.delayingBlurEvent && (e.state.delayingBlurEvent = !1, Ln(e)); }, 100); } function Tn (e, t) { e.state.delayingBlurEvent && (e.state.delayingBlurEvent = !1), e.options.readOnly != 'nocursor' && (e.state.focused || (ft(e, 'focus', e, t), e.state.focused = !0, D(e.display.wrapper, 'CodeMirror-focused'), e.curOp || e.display.selForContextMenu == e.doc.sel || (e.display.input.reset(), b && setTimeout(function () { return e.display.input.reset(!0); }, 20)), e.display.input.receivedFocus()), kn(e)); } function Ln (e, t) { e.state.delayingBlurEvent || (e.state.focused && (ft(e, 'blur', e, t), e.state.focused = !1, L(e.display.wrapper, 'CodeMirror-focused')), clearInterval(e.display.blinker), setTimeout(function () { e.state.focused || (e.display.shift = !1); }, 150)); } function Mn (e) { for (var t = e.display, r = t.lineDiv.offsetTop, n = 0; n < t.view.length; n++) { var i = t.view[n]; var o = void 0; if (!i.hidden) { if (x && k < 8) { var a = i.node.offsetTop + i.node.offsetHeight; o = a - r, r = a; } else { var l = i.node.getBoundingClientRect(); o = l.bottom - l.top; } var s = i.line.height - o; if (o < 2 && (o = cn(t)), (s > 0.005 || s < -0.005) && (de(i.line, o), An(i.line), i.rest)) for (var c = 0; c < i.rest.length; c++)An(i.rest[c]); } } } function An (e) { if (e.widgets) for (var t = 0; t < e.widgets.length; ++t) { var r = e.widgets[t]; var n = r.node.parentNode; n && (r.height = n.offsetHeight); } } function Nn (e, t, r) { var n = r && r.top != null ? Math.max(0, r.top) : e.scroller.scrollTop; n = Math.floor(n - Or(e)); var i = r && r.bottom != null ? r.bottom : n + e.wrapper.clientHeight; var o = he(t, n); var a = he(t, i); if (r && r.ensure) { var l = r.ensure.from.line; var s = r.ensure.to.line; l < o ? a = he(t, _e(se(t, o = l)) + e.wrapper.clientHeight) : Math.min(s, t.lastLine()) >= a && (o = he(t, _e(se(t, s)) - e.wrapper.clientHeight), a = s); } return { from: o, to: Math.max(a, o + 1) }; } function On (e) { var t = e.display; var r = t.view; if (t.alignWidgets || t.gutters.firstChild && e.options.fixedGutter) { for (var n = fn(t) - t.scroller.scrollLeft + e.doc.scrollLeft, i = t.gutters.offsetWidth, o = n + 'px', a = 0; a < r.length; a++) if (!r[a].hidden) { e.options.fixedGutter && (r[a].gutter && (r[a].gutter.style.left = o), r[a].gutterBackground && (r[a].gutterBackground.style.left = o)); var l = r[a].alignable; if (l) for (var s = 0; s < l.length; s++)l[s].style.left = o; }e.options.fixedGutter && (t.gutters.style.left = n + i + 'px'); } } function zn (e) { if (!e.options.lineNumbers) return !1; var t = e.doc; var r = me(e.options, t.first + t.size - 1); var n = e.display; if (r.length == n.lineNumChars) return !1; var i = n.measure.appendChild(O('div', [O('div', r)], 'CodeMirror-linenumber CodeMirror-gutter-elt')); var o = i.firstChild.offsetWidth; var a = i.offsetWidth - o; return n.lineGutter.style.width = '', n.lineNumInnerWidth = Math.max(o, n.lineGutter.offsetWidth - a) + 1, n.lineNumWidth = n.lineNumInnerWidth + a, n.lineNumChars = n.lineNumInnerWidth ? r.length : -1, n.lineGutter.style.width = n.lineNumWidth + 'px', gi(e), !0; } function Wn (e, t) { var r = e.display; var n = cn(e.display); t.top < 0 && (t.top = 0); var i = e.curOp && e.curOp.scrollTop != null ? e.curOp.scrollTop : r.scroller.scrollTop; var o = Pr(e); var a = {}; t.bottom - t.top > o && (t.bottom = t.top + o); var l = e.doc.height + zr(r); var s = t.top < n; var c = t.bottom > l - n; if (t.top < i)a.scrollTop = s ? 0 : t.top; else if (t.bottom > i + o) { var u = Math.min(t.top, (c ? l : t.bottom) - o); u != i && (a.scrollTop = u); } var d = e.curOp && e.curOp.scrollLeft != null ? e.curOp.scrollLeft : r.scroller.scrollLeft; var f = Hr(e) - (e.options.fixedGutter ? r.gutters.offsetWidth : 0); var h = t.right - t.left > f; return h && (t.right = t.left + f), t.left < 10 ? a.scrollLeft = 0 : t.left < d ? a.scrollLeft = Math.max(0, t.left - (h ? 0 : 10)) : t.right > f + d - 3 && (a.scrollLeft = t.right + (h ? 0 : 10) - f), a; } function Dn (e, t) { t != null && (En(e), e.curOp.scrollTop = (e.curOp.scrollTop == null ? e.doc.scrollTop : e.curOp.scrollTop) + t); } function Hn (e) { En(e); var t = e.getCursor(); e.curOp.scrollToPos = { from: t, to: t, margin: e.options.cursorScrollMargin }; } function Pn (e, t, r) { t == null && r == null || En(e), t != null && (e.curOp.scrollLeft = t), r != null && (e.curOp.scrollTop = r); } function En (e) { var t = e.curOp.scrollToPos; t && (e.curOp.scrollToPos = null, In(e, tn(e, t.from), tn(e, t.to), t.margin)); } function In (e, t, r, n) { var i = Wn(e, { left: Math.min(t.left, r.left), top: Math.min(t.top, r.top) - n, right: Math.max(t.right, r.right), bottom: Math.max(t.bottom, r.bottom) + n }); Pn(e, i.scrollLeft, i.scrollTop); } function Fn (e, t) { Math.abs(e.doc.scrollTop - t) < 2 || (m || mi(e, { top: t }), Rn(e, t, !0), m && mi(e), ui(e, 100)); } function Rn (e, t, r) { t = Math.min(e.display.scroller.scrollHeight - e.display.scroller.clientHeight, t), e.display.scroller.scrollTop == t && !r || (e.doc.scrollTop = t, e.display.scrollbars.setScrollTop(t), e.display.scroller.scrollTop != t && (e.display.scroller.scrollTop = t)); } function jn (e, t, r, n) { t = Math.min(t, e.display.scroller.scrollWidth - e.display.scroller.clientWidth), (r ? t == e.doc.scrollLeft : Math.abs(e.doc.scrollLeft - t) < 2) && !n || (e.doc.scrollLeft = t, On(e), e.display.scroller.scrollLeft != t && (e.display.scroller.scrollLeft = t), e.display.scrollbars.setScrollLeft(t)); } function Bn (e) { var t = e.display; var r = t.gutters.offsetWidth; var n = Math.round(e.doc.height + zr(e.display)); return { clientHeight: t.scroller.clientHeight, viewHeight: t.wrapper.clientHeight, scrollWidth: t.scroller.scrollWidth, clientWidth: t.scroller.clientWidth, viewWidth: t.wrapper.clientWidth, barLeft: e.options.fixedGutter ? r : 0, docHeight: n, scrollHeight: n + Dr(e) + t.barHeight, nativeBarWidth: t.nativeBarWidth, gutterWidth: r }; } function Kn (e, t, r) { this.cm = r; var n = this.vert = O('div', [O('div', null, null, 'min-width: 1px')], 'CodeMirror-vscrollbar'); var i = this.horiz = O('div', [O('div', null, null, 'height: 100%; min-height: 1px')], 'CodeMirror-hscrollbar'); n.tabIndex = i.tabIndex = -1, e(n), e(i), ct(n, 'scroll', function () { n.clientHeight && t(n.scrollTop, 'vertical'); }), ct(i, 'scroll', function () { i.clientWidth && t(i.scrollLeft, 'horizontal'); }), this.checkedZeroWidth = !1, x && k < 8 && (this.horiz.style.minHeight = this.vert.style.minWidth = '18px'); }Kn.prototype.update = function (e) { var t = e.scrollWidth > e.clientWidth + 1; var r = e.scrollHeight > e.clientHeight + 1; var n = e.nativeBarWidth; if (r) { this.vert.style.display = 'block', this.vert.style.bottom = t ? n + 'px' : '0'; var i = e.viewHeight - (t ? n : 0); this.vert.firstChild.style.height = Math.max(0, e.scrollHeight - e.clientHeight + i) + 'px'; } else this.vert.style.display = '', this.vert.firstChild.style.height = '0'; if (t) { this.horiz.style.display = 'block', this.horiz.style.right = r ? n + 'px' : '0', this.horiz.style.left = e.barLeft + 'px'; var o = e.viewWidth - e.barLeft - (r ? n : 0); this.horiz.firstChild.style.width = Math.max(0, e.scrollWidth - e.clientWidth + o) + 'px'; } else this.horiz.style.display = '', this.horiz.firstChild.style.width = '0'; return !this.checkedZeroWidth && e.clientHeight > 0 && (n == 0 && this.zeroWidthHack(), this.checkedZeroWidth = !0), { right: r ? n : 0, bottom: t ? n : 0 }; }, Kn.prototype.setScrollLeft = function (e) { this.horiz.scrollLeft != e && (this.horiz.scrollLeft = e), this.disableHoriz && this.enableZeroWidthBar(this.horiz, this.disableHoriz, 'horiz'); }, Kn.prototype.setScrollTop = function (e) { this.vert.scrollTop != e && (this.vert.scrollTop = e), this.disableVert && this.enableZeroWidthBar(this.vert, this.disableVert, 'vert'); }, Kn.prototype.zeroWidthHack = function () { var e = w && !l ? '12px' : '18px'; this.horiz.style.height = this.vert.style.width = e, this.horiz.style.pointerEvents = this.vert.style.pointerEvents = 'none', this.disableHoriz = new R(), this.disableVert = new R(); }, Kn.prototype.enableZeroWidthBar = function (r, n, i) { r.style.pointerEvents = 'auto', n.set(1e3, function e () { var t = r.getBoundingClientRect(); (i == 'vert' ? document.elementFromPoint(t.right - 1, (t.top + t.bottom) / 2) : document.elementFromPoint((t.right + t.left) / 2, t.bottom - 1)) != r ? r.style.pointerEvents = 'none' : n.set(1e3, e); }); }, Kn.prototype.clear = function () { var e = this.horiz.parentNode; e.removeChild(this.horiz), e.removeChild(this.vert); }; function qn () {} function Un (e, t) { t = t || Bn(e); var r = e.display.barWidth; var n = e.display.barHeight; Vn(e, t); for (var i = 0; i < 4 && r != e.display.barWidth || n != e.display.barHeight; i++)r != e.display.barWidth && e.options.lineWrapping && Mn(e), Vn(e, Bn(e)), r = e.display.barWidth, n = e.display.barHeight; } function Vn (e, t) { var r = e.display; var n = r.scrollbars.update(t); r.sizer.style.paddingRight = (r.barWidth = n.right) + 'px', r.sizer.style.paddingBottom = (r.barHeight = n.bottom) + 'px', r.heightForcer.style.borderBottom = n.bottom + 'px solid transparent', n.right && n.bottom ? (r.scrollbarFiller.style.display = 'block', r.scrollbarFiller.style.height = n.bottom + 'px', r.scrollbarFiller.style.width = n.right + 'px') : r.scrollbarFiller.style.display = '', n.bottom && e.options.coverGutterNextToScrollbar && e.options.fixedGutter ? (r.gutterFiller.style.display = 'block', r.gutterFiller.style.height = n.bottom + 'px', r.gutterFiller.style.width = t.gutterWidth + 'px') : r.gutterFiller.style.display = ''; }qn.prototype.update = function () { return { bottom: 0, right: 0 }; }, qn.prototype.setScrollLeft = function () {}, qn.prototype.setScrollTop = function () {}, qn.prototype.clear = function () {}; var Gn = { native: Kn, null: qn }; function _n (r) { r.display.scrollbars && (r.display.scrollbars.clear(), r.display.scrollbars.addClass && L(r.display.wrapper, r.display.scrollbars.addClass)), r.display.scrollbars = new Gn[r.options.scrollbarStyle](function (e) { r.display.wrapper.insertBefore(e, r.display.scrollbarFiller), ct(e, 'mousedown', function () { r.state.focused && setTimeout(function () { return r.display.input.focus(); }, 0); }), e.setAttribute('cm-not-content', 'true'); }, function (e, t) { t == 'horizontal' ? jn(r, e) : Fn(r, e); }, r), r.display.scrollbars.addClass && D(r.display.wrapper, r.display.scrollbars.addClass); } var $n = 0; function Xn (e) { e.curOp = { cm: e, viewChanged: !1, startHeight: e.doc.height, forceUpdate: !1, updateInput: null, typing: !1, changeObjs: null, cursorActivityHandlers: null, cursorActivityCalled: 0, selectionChanged: !1, updateMaxLine: !1, scrollLeft: null, scrollTop: null, scrollToPos: null, focus: !1, id: ++$n }, (function (e) { hr ? hr.ops.push(e) : e.ownsGroup = hr = { ops: [e], delayedCallbacks: [] }; }(e.curOp)); } function Yn (e) { pr(e.curOp, function (e) { for (var t = 0; t < e.ops.length; t++)e.ops[t].cm.curOp = null; !(function (e) { for (var t = e.ops, r = 0; r < t.length; r++)Zn(t[r]); for (var n = 0; n < t.length; n++)(i = t[n]).updatedDisplay = i.mustUpdate && hi(i.cm, i.update); var i; for (var o = 0; o < t.length; o++)Qn(t[o]); for (var a = 0; a < t.length; a++)Jn(t[a]); for (var l = 0; l < t.length; l++)ei(t[l]); }(e)); }); } function Zn (e) { var t = e.cm; var r = t.display; !(function (e) { var t = e.display; !t.scrollbarsClipped && t.scroller.offsetWidth && (t.nativeBarWidth = t.scroller.offsetWidth - t.scroller.clientWidth, t.heightForcer.style.height = Dr(e) + 'px', t.sizer.style.marginBottom = -t.nativeBarWidth + 'px', t.sizer.style.borderRightWidth = Dr(e) + 'px', t.scrollbarsClipped = !0); }(t)), e.updateMaxLine && Xe(t), e.mustUpdate = e.viewChanged || e.forceUpdate || e.scrollTop != null || e.scrollToPos && (e.scrollToPos.from.line < r.viewFrom || e.scrollToPos.to.line >= r.viewTo) || r.maxLineChanged && t.options.lineWrapping, e.update = e.mustUpdate && new fi(t, e.mustUpdate && { top: e.scrollTop, ensure: e.scrollToPos }, e.forceUpdate); } function Qn (e) { var t = e.cm; var r = t.display; e.updatedDisplay && Mn(t), e.barMeasure = Bn(t), r.maxLineChanged && !t.options.lineWrapping && (e.adjustWidthTo = Ir(t, r.maxLine, r.maxLine.text.length).left + 3, t.display.sizerWidth = e.adjustWidthTo, e.barMeasure.scrollWidth = Math.max(r.scroller.clientWidth, r.sizer.offsetLeft + e.adjustWidthTo + Dr(t) + t.display.barWidth), e.maxScrollLeft = Math.max(0, r.sizer.offsetLeft + e.adjustWidthTo - Hr(t))), (e.updatedDisplay || e.selectionChanged) && (e.preparedSelection = r.input.prepareSelection()); } function Jn (e) { var t = e.cm; e.adjustWidthTo != null && (t.display.sizer.style.minWidth = e.adjustWidthTo + 'px', e.maxScrollLeft < t.doc.scrollLeft && jn(t, Math.min(t.display.scroller.scrollLeft, e.maxScrollLeft), !0), t.display.maxLineChanged = !1); var r = e.focus && e.focus == W(); e.preparedSelection && t.display.input.showSelection(e.preparedSelection, r), !e.updatedDisplay && e.startHeight == t.doc.height || Un(t, e.barMeasure), e.updatedDisplay && vi(t, e.barMeasure), e.selectionChanged && kn(t), t.state.focused && e.updateInput && t.display.input.reset(e.typing), r && Cn(e.cm); } function ei (e) { var t = e.cm; var r = t.display; var n = t.doc; e.updatedDisplay && pi(t, e.update), r.wheelStartX == null || e.scrollTop == null && e.scrollLeft == null && !e.scrollToPos || (r.wheelStartX = r.wheelStartY = null), e.scrollTop != null && Rn(t, e.scrollTop, e.forceScroll), e.scrollLeft != null && jn(t, e.scrollLeft, !0, !0), e.scrollToPos && (function (e, t) { if (!ht(e, 'scrollCursorIntoView')) { var r = e.display; var n = r.sizer.getBoundingClientRect(); var i = null; if (t.top + n.top < 0 ? i = !0 : t.bottom + n.top > (window.innerHeight || document.documentElement.clientHeight) && (i = !1), i != null && !c) { var o = O('div', '​', null, 'position: absolute;\n                         top: ' + (t.top - r.viewOffset - Or(e.display)) + 'px;\n                         height: ' + (t.bottom - t.top + Dr(e) + r.barHeight) + 'px;\n                         left: ' + t.left + 'px; width: ' + Math.max(2, t.right - t.left) + 'px;'); e.display.lineSpace.appendChild(o), o.scrollIntoView(i), e.display.lineSpace.removeChild(o); } } }(t, (function (e, t, r, n) { var i; n == null && (n = 0), e.options.lineWrapping || t != r || (r = (t = t.ch ? ge(t.line, t.sticky == 'before' ? t.ch - 1 : t.ch, 'after') : t).sticky == 'before' ? ge(t.line, t.ch + 1, 'before') : t); for (var o = 0; o < 5; o++) { var a = !1; var l = en(e, t); var s = r && r != t ? en(e, r) : l; var c = Wn(e, i = { left: Math.min(l.left, s.left), top: Math.min(l.top, s.top) - n, right: Math.max(l.left, s.left), bottom: Math.max(l.bottom, s.bottom) + n }); var u = e.doc.scrollTop; var d = e.doc.scrollLeft; if (c.scrollTop != null && (Fn(e, c.scrollTop), Math.abs(e.doc.scrollTop - u) > 1 && (a = !0)), c.scrollLeft != null && (jn(e, c.scrollLeft), Math.abs(e.doc.scrollLeft - d) > 1 && (a = !0)), !a) break; } return i; }(t, Ce(n, e.scrollToPos.from), Ce(n, e.scrollToPos.to), e.scrollToPos.margin)))); var i = e.maybeHiddenMarkers; var o = e.maybeUnhiddenMarkers; if (i) for (var a = 0; a < i.length; ++a)i[a].lines.length || ft(i[a], 'hide'); if (o) for (var l = 0; l < o.length; ++l)o[l].lines.length && ft(o[l], 'unhide'); r.wrapper.offsetHeight && (n.scrollTop = t.display.scroller.scrollTop), e.changeObjs && ft(t, 'changes', t, e.changeObjs), e.update && e.update.finish(); } function ti (e, t) { if (e.curOp) return t(); Xn(e); try { return t(); } finally { Yn(e); } } function ri (e, t) { return function () { if (e.curOp) return t.apply(e, arguments); Xn(e); try { return t.apply(e, arguments); } finally { Yn(e); } }; } function ni (e) { return function () { if (this.curOp) return e.apply(this, arguments); Xn(this); try { return e.apply(this, arguments); } finally { Yn(this); } }; } function ii (t) { return function () { var e = this.cm; if (!e || e.curOp) return t.apply(this, arguments); Xn(e); try { return t.apply(this, arguments); } finally { Yn(e); } }; } function oi (e, t, r, n) { t == null && (t = e.doc.first), r == null && (r = e.doc.first + e.doc.size), n = n || 0; var i = e.display; if (n && r < i.viewTo && (i.updateLineNumbers == null || i.updateLineNumbers > t) && (i.updateLineNumbers = t), e.curOp.viewChanged = !0, t >= i.viewTo)Le && qe(e.doc, t) < i.viewTo && li(e); else if (r <= i.viewFrom)Le && Ue(e.doc, r + n) > i.viewFrom ? li(e) : (i.viewFrom += n, i.viewTo += n); else if (t <= i.viewFrom && r >= i.viewTo)li(e); else if (t <= i.viewFrom) { var o = si(e, r, r + n, 1); o ? (i.view = i.view.slice(o.index), i.viewFrom = o.lineN, i.viewTo += n) : li(e); } else if (r >= i.viewTo) { var a = si(e, t, t, -1); a ? (i.view = i.view.slice(0, a.index), i.viewTo = a.lineN) : li(e); } else { var l = si(e, t, t, -1); var s = si(e, r, r + n, 1); l && s ? (i.view = i.view.slice(0, l.index).concat(fr(e, l.lineN, s.lineN)).concat(i.view.slice(s.index)), i.viewTo += n) : li(e); } var c = i.externalMeasured; c && (r < c.lineN ? c.lineN += n : t < c.lineN + c.size && (i.externalMeasured = null)); } function ai (e, t, r) { e.curOp.viewChanged = !0; var n = e.display; var i = e.display.externalMeasured; if (i && t >= i.lineN && t < i.lineN + i.size && (n.externalMeasured = null), !(t < n.viewFrom || t >= n.viewTo)) { var o = n.view[gn(e, t)]; if (o.node != null) { var a = o.changes || (o.changes = []); j(a, r) == -1 && a.push(r); } } } function li (e) { e.display.viewFrom = e.display.viewTo = e.doc.first, e.display.view = [], e.display.viewOffset = 0; } function si (e, t, r, n) { var i; var o = gn(e, t); var a = e.display.view; if (!Le || r == e.doc.first + e.doc.size) return { index: o, lineN: r }; for (var l = e.display.viewFrom, s = 0; s < o; s++)l += a[s].size; if (l != t) { if (n > 0) { if (o == a.length - 1) return null; i = l + a[o].size - t, o++; } else i = l - t; t += i, r += i; } for (;qe(e.doc, r) != r;) { if (o == (n < 0 ? 0 : a.length - 1)) return null; r += n * a[o - (n < 0 ? 1 : 0)].size, o += n; } return { index: o, lineN: r }; } function ci (e) { for (var t = e.display.view, r = 0, n = 0; n < t.length; n++) { var i = t[n]; i.hidden || i.node && !i.changes || ++r; } return r; } function ui (e, t) { e.doc.highlightFrontier < e.display.viewTo && e.state.highlight.set(t, E(di, e)); } function di (s) { var c = s.doc; if (!(c.highlightFrontier >= s.display.viewTo)) { var u = +new Date() + s.options.workTime; var d = _t(s, c.highlightFrontier); var f = []; c.iter(d.line, Math.min(c.first + c.size, s.display.viewTo + 500), function (e) { if (d.line >= s.display.viewFrom) { var t = e.styles; var r = e.text.length > s.options.maxHighlightLength ? Rt(c.mode, d.state) : null; var n = Vt(s, e, d, !0); r && (d.state = r), e.styles = n.styles; var i = e.styleClasses; var o = n.classes; o ? e.styleClasses = o : i && (e.styleClasses = null); for (var a = !t || t.length != e.styles.length || i != o && (!i || !o || i.bgClass != o.bgClass || i.textClass != o.textClass), l = 0; !a && l < t.length; ++l)a = t[l] != e.styles[l]; a && f.push(d.line), e.stateAfter = d.save(), d.nextLine(); } else e.text.length <= s.options.maxHighlightLength && $t(s, e.text, d), e.stateAfter = d.line % 5 == 0 ? d.save() : null, d.nextLine(); if (+new Date() > u) return ui(s, s.options.workDelay), !0; }), c.highlightFrontier = d.line, c.modeFrontier = Math.max(c.modeFrontier, d.line), f.length && ti(s, function () { for (var e = 0; e < f.length; e++)ai(s, f[e], 'text'); }); } } var fi = function (e, t, r) { var n = e.display; this.viewport = t, this.visible = Nn(n, e.doc, t), this.editorIsHidden = !n.wrapper.offsetWidth, this.wrapperHeight = n.wrapper.clientHeight, this.wrapperWidth = n.wrapper.clientWidth, this.oldDisplayWidth = Hr(e), this.force = r, this.dims = dn(e), this.events = []; }; function hi (e, t) { var r = e.display; var n = e.doc; if (t.editorIsHidden) return li(e), !1; if (!t.force && t.visible.from >= r.viewFrom && t.visible.to <= r.viewTo && (r.updateLineNumbers == null || r.updateLineNumbers >= r.viewTo) && r.renderedView == r.view && ci(e) == 0) return !1; zn(e) && (li(e), t.dims = dn(e)); var i = n.first + n.size; var o = Math.max(t.visible.from - e.options.viewportMargin, n.first); var a = Math.min(i, t.visible.to + e.options.viewportMargin); r.viewFrom < o && o - r.viewFrom < 20 && (o = Math.max(n.first, r.viewFrom)), r.viewTo > a && r.viewTo - a < 20 && (a = Math.min(i, r.viewTo)), Le && (o = qe(e.doc, o), a = Ue(e.doc, a)); var l = o != r.viewFrom || a != r.viewTo || r.lastWrapHeight != t.wrapperHeight || r.lastWrapWidth != t.wrapperWidth; !(function (e, t, r) { var n = e.display; n.view.length == 0 || t >= n.viewTo || r <= n.viewFrom ? (n.view = fr(e, t, r), n.viewFrom = t) : (n.viewFrom > t ? n.view = fr(e, t, n.viewFrom).concat(n.view) : n.viewFrom < t && (n.view = n.view.slice(gn(e, t))), n.viewFrom = t, n.viewTo < r ? n.view = n.view.concat(fr(e, n.viewTo, r)) : n.viewTo > r && (n.view = n.view.slice(0, gn(e, r)))), n.viewTo = r; }(e, o, a)), r.viewOffset = _e(se(e.doc, r.viewFrom)), e.display.mover.style.top = r.viewOffset + 'px'; var s = ci(e); if (!l && s == 0 && !t.force && r.renderedView == r.view && (r.updateLineNumbers == null || r.updateLineNumbers >= r.viewTo)) return !1; var c = (function (e) { if (e.hasFocus()) return null; var t = W(); if (!t || !z(e.display.lineDiv, t)) return null; var r = { activeElt: t }; if (window.getSelection) { var n = window.getSelection(); n.anchorNode && n.extend && z(e.display.lineDiv, n.anchorNode) && (r.anchorNode = n.anchorNode, r.anchorOffset = n.anchorOffset, r.focusNode = n.focusNode, r.focusOffset = n.focusOffset); } return r; }(e)); return s > 4 && (r.lineDiv.style.display = 'none'), (function (r, e, t) { var n = r.display; var i = r.options.lineNumbers; var o = n.lineDiv; var a = o.firstChild; function l (e) { var t = e.nextSibling; return b && w && r.display.currentWheelTarget == e ? e.style.display = 'none' : e.parentNode.removeChild(e), t; } for (var s = n.view, c = n.viewFrom, u = 0; u < s.length; u++) { var d = s[u]; if (d.hidden);else if (d.node && d.node.parentNode == o) { for (;a != d.node;)a = l(a); var f = i && e != null && e <= c && d.lineNumber; d.changes && (j(d.changes, 'gutter') > -1 && (f = !1), yr(r, d, c, t)), f && (M(d.lineNumber), d.lineNumber.appendChild(document.createTextNode(me(r.options, c)))), a = d.node.nextSibling; } else { var h = (g = c, v = t, void 0, y = wr(p = r, m = d), m.text = m.node = y.pre, y.bgClass && (m.bgClass = y.bgClass), y.textClass && (m.textClass = y.textClass), kr(p, m), Cr(p, m, g, v), Tr(p, m, v), m.node); o.insertBefore(h, a); }c += d.size; } var p, m, g, v, y; for (;a;)a = l(a); }(e, r.updateLineNumbers, t.dims)), s > 4 && (r.lineDiv.style.display = ''), r.renderedView = r.view, (function (e) { if (e && e.activeElt && e.activeElt != W() && (e.activeElt.focus(), e.anchorNode && z(document.body, e.anchorNode) && z(document.body, e.focusNode))) { var t = window.getSelection(); var r = document.createRange(); r.setEnd(e.anchorNode, e.anchorOffset), r.collapse(!1), t.removeAllRanges(), t.addRange(r), t.extend(e.focusNode, e.focusOffset); } }(c)), M(r.cursorDiv), M(r.selectionDiv), r.gutters.style.height = r.sizer.style.minHeight = 0, l && (r.lastWrapHeight = t.wrapperHeight, r.lastWrapWidth = t.wrapperWidth, ui(e, 400)), !(r.updateLineNumbers = null); } function pi (e, t) { for (var r = t.viewport, n = !0; (n && e.options.lineWrapping && t.oldDisplayWidth != Hr(e) || (r && r.top != null && (r = { top: Math.min(e.doc.height + zr(e.display) - Pr(e), r.top) }), t.visible = Nn(e.display, e.doc, r), !(t.visible.from >= e.display.viewFrom && t.visible.to <= e.display.viewTo))) && hi(e, t); n = !1) { Mn(e); var i = Bn(e); vn(e), Un(e, i), vi(e, i), t.force = !1; }t.signal(e, 'update', e), e.display.viewFrom == e.display.reportedViewFrom && e.display.viewTo == e.display.reportedViewTo || (t.signal(e, 'viewportChange', e, e.display.viewFrom, e.display.viewTo), e.display.reportedViewFrom = e.display.viewFrom, e.display.reportedViewTo = e.display.viewTo); } function mi (e, t) { var r = new fi(e, t); if (hi(e, r)) { Mn(e), pi(e, r); var n = Bn(e); vn(e), Un(e, n), vi(e, n), r.finish(); } } function gi (e) { var t = e.display.gutters.offsetWidth; e.display.sizer.style.marginLeft = t + 'px'; } function vi (e, t) { e.display.sizer.style.minHeight = t.docHeight + 'px', e.display.heightForcer.style.top = t.docHeight + 'px', e.display.gutters.style.height = t.docHeight + e.display.barHeight + Dr(e) + 'px'; } function yi (e) { var t = e.display.gutters; var r = e.options.gutters; M(t); for (var n = 0; n < r.length; ++n) { var i = r[n]; var o = t.appendChild(O('div', null, 'CodeMirror-gutter ' + i)); i == 'CodeMirror-linenumbers' && ((e.display.lineGutter = o).style.width = (e.display.lineNumWidth || 1) + 'px'); }t.style.display = n ? '' : 'none', gi(e); } function bi (e) { var t = j(e.gutters, 'CodeMirror-linenumbers'); t == -1 && e.lineNumbers ? e.gutters = e.gutters.concat(['CodeMirror-linenumbers']) : t > -1 && !e.lineNumbers && (e.gutters = e.gutters.slice(0), e.gutters.splice(t, 1)); }fi.prototype.signal = function (e, t) { mt(e, t) && this.events.push(arguments); }, fi.prototype.finish = function () { for (var e = 0; e < this.events.length; e++)ft.apply(null, this.events[e]); }; var wi = 0; var xi = null; function ki (e) { var t = e.wheelDeltaX; var r = e.wheelDeltaY; return t == null && e.detail && e.axis == e.HORIZONTAL_AXIS && (t = e.detail), r == null && e.detail && e.axis == e.VERTICAL_AXIS ? r = e.detail : r == null && (r = e.wheelDelta), { x: t, y: r }; } function Ci (e) { var t = ki(e); return t.x *= xi, t.y *= xi, t; } function Si (e, t) { var r = ki(t); var n = r.x; var i = r.y; var o = e.display; var a = o.scroller; var l = a.scrollWidth > a.clientWidth; var s = a.scrollHeight > a.clientHeight; if (n && l || i && s) { if (i && w && b)e:for (var c = t.target, u = o.view; c != a; c = c.parentNode) for (var d = 0; d < u.length; d++) if (u[d].node == c) { e.display.currentWheelTarget = c; break e; } if (n && !m && !g && xi != null) return i && s && Fn(e, Math.max(0, a.scrollTop + i * xi)), jn(e, Math.max(0, a.scrollLeft + n * xi)), (!i || i && s) && vt(t), void (o.wheelStartX = null); if (i && xi != null) { var f = i * xi; var h = e.doc.scrollTop; var p = h + o.wrapper.clientHeight; f < 0 ? h = Math.max(0, h + f - 50) : p = Math.min(e.doc.height, p + f + 50), mi(e, { top: h, bottom: p }); }wi < 20 && (o.wheelStartX == null ? (o.wheelStartX = a.scrollLeft, o.wheelStartY = a.scrollTop, o.wheelDX = n, o.wheelDY = i, setTimeout(function () { if (o.wheelStartX != null) { var e = a.scrollLeft - o.wheelStartX; var t = a.scrollTop - o.wheelStartY; var r = t && o.wheelDY && t / o.wheelDY || e && o.wheelDX && e / o.wheelDX; o.wheelStartX = o.wheelStartY = null, r && (xi = (xi * wi + r) / (wi + 1), ++wi); } }, 200)) : (o.wheelDX += n, o.wheelDY += i)); } }x ? xi = -0.53 : m ? xi = 15 : a ? xi = -0.7 : s && (xi = -1 / 3); var Ti = function (e, t) { this.ranges = e, this.primIndex = t; }; Ti.prototype.primary = function () { return this.ranges[this.primIndex]; }, Ti.prototype.equals = function (e) { if (e == this) return !0; if (e.primIndex != this.primIndex || e.ranges.length != this.ranges.length) return !1; for (var t = 0; t < this.ranges.length; t++) { var r = this.ranges[t]; var n = e.ranges[t]; if (!ye(r.anchor, n.anchor) || !ye(r.head, n.head)) return !1; } return !0; }, Ti.prototype.deepCopy = function () { for (var e = [], t = 0; t < this.ranges.length; t++)e[t] = new Li(be(this.ranges[t].anchor), be(this.ranges[t].head)); return new Ti(e, this.primIndex); }, Ti.prototype.somethingSelected = function () { for (var e = 0; e < this.ranges.length; e++) if (!this.ranges[e].empty()) return !0; return !1; }, Ti.prototype.contains = function (e, t) { t = t || e; for (var r = 0; r < this.ranges.length; r++) { var n = this.ranges[r]; if (ve(t, n.from()) >= 0 && ve(e, n.to()) <= 0) return r; } return -1; }; var Li = function (e, t) { this.anchor = e, this.head = t; }; function Mi (e, t) { var r = e[t]; e.sort(function (e, t) { return ve(e.from(), t.from()); }), t = j(e, r); for (var n = 1; n < e.length; n++) { var i = e[n]; var o = e[n - 1]; if (ve(o.to(), i.from()) >= 0) { var a = xe(o.from(), i.from()); var l = we(o.to(), i.to()); var s = o.empty() ? i.from() == i.head : o.from() == o.head; n <= t && --t, e.splice(--n, 2, new Li(s ? l : a, s ? a : l)); } } return new Ti(e, t); } function Ai (e, t) { return new Ti([new Li(e, t || e)], 0); } function Ni (e) { return e.text ? ge(e.from.line + e.text.length - 1, X(e.text).length + (e.text.length == 1 ? e.from.ch : 0)) : e.to; } function Oi (e, t) { if (ve(e, t.from) < 0) return e; if (ve(e, t.to) <= 0) return Ni(t); var r = e.line + t.text.length - (t.to.line - t.from.line) - 1; var n = e.ch; return e.line == t.to.line && (n += Ni(t).ch - t.to.ch), ge(r, n); } function zi (e, t) { for (var r = [], n = 0; n < e.sel.ranges.length; n++) { var i = e.sel.ranges[n]; r.push(new Li(Oi(i.anchor, t), Oi(i.head, t))); } return Mi(r, e.sel.primIndex); } function Wi (e, t, r) { return e.line == t.line ? ge(r.line, e.ch - t.ch + r.ch) : ge(r.line + (e.line - t.line), e.ch); } function Di (e) { e.doc.mode = Et(e.options, e.doc.modeOption), Hi(e); } function Hi (e) { e.doc.iter(function (e) { e.stateAfter && (e.stateAfter = null), e.styles && (e.styles = null); }), e.doc.modeFrontier = e.doc.highlightFrontier = e.doc.first, ui(e, 100), e.state.modeGen++, e.curOp && oi(e); } function Pi (e, t) { return t.from.ch == 0 && t.to.ch == 0 && X(t.text) == '' && (!e.cm || e.cm.options.wholeLineUpdateBefore); } function Ei (e, n, t, i) { function o (e) { return t ? t[e] : null; } function r (e, t, r) { !(function (e, t, r, n) { e.text = t, e.stateAfter && (e.stateAfter = null), e.styles && (e.styles = null), e.order != null && (e.order = null), We(e), De(e, r); var i = n ? n(e) : 1; i != e.height && de(e, i); }(e, t, r, i)), gr(e, 'change', e, n); } function a (e, t) { for (var r = [], n = e; n < t; ++n)r.push(new tr(c[n], o(n), i)); return r; } var l = n.from; var s = n.to; var c = n.text; var u = se(e, l.line); var d = se(e, s.line); var f = X(c); var h = o(c.length - 1); var p = s.line - l.line; if (n.full)e.insert(0, a(0, c.length)), e.remove(c.length, e.size - c.length); else if (Pi(e, n)) { var m = a(0, c.length - 1); r(d, d.text, h), p && e.remove(l.line, p), m.length && e.insert(l.line, m); } else if (u == d) if (c.length == 1)r(u, u.text.slice(0, l.ch) + f + u.text.slice(s.ch), h); else { var g = a(1, c.length - 1); g.push(new tr(f + u.text.slice(s.ch), h, i)), r(u, u.text.slice(0, l.ch) + c[0], o(0)), e.insert(l.line + 1, g); } else if (c.length == 1)r(u, u.text.slice(0, l.ch) + c[0] + d.text.slice(s.ch), o(0)), e.remove(l.line + 1, p); else { r(u, u.text.slice(0, l.ch) + c[0], o(0)), r(d, f + d.text.slice(s.ch), h); var v = a(1, c.length - 1); p > 1 && e.remove(l.line + 1, p - 1), e.insert(l.line + 1, v); }gr(e, 'change', e, n); } function Ii (e, l, s) { !(function e (t, r, n) { if (t.linked) for (var i = 0; i < t.linked.length; ++i) { var o = t.linked[i]; if (o.doc != r) { var a = n && o.sharedHist; s && !a || (l(o.doc, a), e(o.doc, t, a)); } } }(e, null, !0)); } function Fi (e, t) { if (t.cm) throw new Error('This document is already in use.'); pn((e.doc = t).cm = e), Di(e), Ri(e), e.options.lineWrapping || Xe(e), e.options.mode = t.modeOption, oi(e); } function Ri (e) { (e.doc.direction == 'rtl' ? D : L)(e.display.lineDiv, 'CodeMirror-rtl'); } function ji (e) { this.done = [], this.undone = [], this.undoDepth = 1 / 0, this.lastModTime = this.lastSelTime = 0, this.lastOp = this.lastSelOp = null, this.lastOrigin = this.lastSelOrigin = null, this.generation = this.maxGeneration = e || 1; } function Bi (e, t) { var r = { from: be(t.from), to: Ni(t), text: ce(e, t.from, t.to) }; return Gi(e, r, t.from.line, t.to.line + 1), Ii(e, function (e) { return Gi(e, r, t.from.line, t.to.line + 1); }, !0), r; } function Ki (e) { for (;e.length;) { if (!X(e).ranges) break; e.pop(); } } function qi (e, t, r, n) { var i = e.history; i.undone.length = 0; var o; var a; var l = +new Date(); if ((i.lastOp == n || i.lastOrigin == t.origin && t.origin && (t.origin.charAt(0) == '+' && i.lastModTime > l - (e.cm ? e.cm.options.historyEventDelay : 500) || t.origin.charAt(0) == '*')) && (o = (function (e, t) { return t ? (Ki(e.done), X(e.done)) : e.done.length && !X(e.done).ranges ? X(e.done) : e.done.length > 1 && !e.done[e.done.length - 2].ranges ? (e.done.pop(), X(e.done)) : void 0; }(i, i.lastOp == n))))a = X(o.changes), ve(t.from, t.to) == 0 && ve(t.from, a.to) == 0 ? a.to = Ni(t) : o.changes.push(Bi(e, t)); else { var s = X(i.done); for (s && s.ranges || Vi(e.sel, i.done), o = { changes: [Bi(e, t)], generation: i.generation }, i.done.push(o); i.done.length > i.undoDepth;)i.done.shift(), i.done[0].ranges || i.done.shift(); }i.done.push(r), i.generation = ++i.maxGeneration, i.lastModTime = i.lastSelTime = l, i.lastOp = i.lastSelOp = n, i.lastOrigin = i.lastSelOrigin = t.origin, a || ft(e, 'historyAdded'); } function Ui (e, t, r, n) { var i = e.history; var o = n && n.origin; r == i.lastSelOp || o && i.lastSelOrigin == o && (i.lastModTime == i.lastSelTime && i.lastOrigin == o || (function (e, t, r, n) { var i = t.charAt(0); return i == '*' || i == '+' && r.ranges.length == n.ranges.length && r.somethingSelected() == n.somethingSelected() && new Date() - e.history.lastSelTime <= (e.cm ? e.cm.options.historyEventDelay : 500); }(e, o, X(i.done), t))) ? i.done[i.done.length - 1] = t : Vi(t, i.done), i.lastSelTime = +new Date(), i.lastSelOrigin = o, i.lastSelOp = r, n && !1 !== n.clearRedo && Ki(i.undone); } function Vi (e, t) { var r = X(t); r && r.ranges && r.equals(e) || t.push(e); } function Gi (t, r, e, n) { var i = r['spans_' + t.id]; var o = 0; t.iter(Math.max(t.first, e), Math.min(t.first + t.size, n), function (e) { e.markedSpans && ((i = i || (r['spans_' + t.id] = {}))[o] = e.markedSpans), ++o; }); } function _i (e) { if (!e) return null; for (var t, r = 0; r < e.length; ++r)e[r].marker.explicitlyCleared ? t = t || e.slice(0, r) : t && t.push(e[r]); return t ? t.length ? t : null : e; } function $i (e, t) { var r = (function (e, t) { var r = t['spans_' + e.id]; if (!r) return null; for (var n = [], i = 0; i < t.text.length; ++i)n.push(_i(r[i])); return n; }(e, t)); var n = Oe(e, t); if (!r) return n; if (!n) return r; for (var i = 0; i < r.length; ++i) { var o = r[i]; var a = n[i]; if (o && a)e:for (var l = 0; l < a.length; ++l) { for (var s = a[l], c = 0; c < o.length; ++c) if (o[c].marker == s.marker) continue e; o.push(s); } else a && (r[i] = a); } return r; } function Xi (e, t, r) { for (var n = [], i = 0; i < e.length; ++i) { var o = e[i]; if (o.ranges)n.push(r ? Ti.prototype.deepCopy.call(o) : o); else { var a = o.changes; var l = []; n.push({ changes: l }); for (var s = 0; s < a.length; ++s) { var c = a[s]; var u = void 0; if (l.push({ from: c.from, to: c.to, text: c.text }), t) for (var d in c)(u = d.match(/^spans_(\d+)$/)) && j(t, Number(u[1])) > -1 && (X(l)[d] = c[d], delete c[d]); } } } return n; } function Yi (e, t, r, n) { if (n) { var i = e.anchor; if (r) { var o = ve(t, i) < 0; o != ve(r, i) < 0 ? (i = t, t = r) : o != ve(t, r) < 0 && (t = r); } return new Li(i, t); } return new Li(r || t, t); } function Zi (e, t, r, n, i) { i == null && (i = e.cm && (e.cm.display.shift || e.extend)), ro(e, new Ti([Yi(e.sel.primary(), t, r, i)], 0), n); } function Qi (e, t, r) { for (var n = [], i = e.cm && (e.cm.display.shift || e.extend), o = 0; o < e.sel.ranges.length; o++)n[o] = Yi(e.sel.ranges[o], t[o], null, i); ro(e, Mi(n, e.sel.primIndex), r); } function Ji (e, t, r, n) { var i = e.sel.ranges.slice(0); i[t] = r, ro(e, Mi(i, e.sel.primIndex), n); } function eo (e, t, r, n) { ro(e, Ai(t, r), n); } function to (e, t, r) { var n = e.history.done; var i = X(n); i && i.ranges ? no(e, n[n.length - 1] = t, r) : ro(e, t, r); } function ro (e, t, r) { no(e, t, r), Ui(e, e.sel, e.cm ? e.cm.curOp.id : NaN, r); } function no (e, t, r) { (mt(e, 'beforeSelectionChange') || e.cm && mt(e.cm, 'beforeSelectionChange')) && (t = (function (r, e, t) { var n = { ranges: e.ranges, update: function (e) { this.ranges = []; for (var t = 0; t < e.length; t++) this.ranges[t] = new Li(Ce(r, e[t].anchor), Ce(r, e[t].head)); }, origin: t && t.origin }; return ft(r, 'beforeSelectionChange', r, n), r.cm && ft(r.cm, 'beforeSelectionChange', r.cm, n), n.ranges != e.ranges ? Mi(n.ranges, n.ranges.length - 1) : e; }(e, t, r))); var n = r && r.bias || (ve(t.primary().head, e.sel.primary().head) < 0 ? -1 : 1); io(e, ao(e, t, n, !0)), r && !1 === r.scroll || !e.cm || Hn(e.cm); } function io (e, t) { t.equals(e.sel) || (e.sel = t, e.cm && (e.cm.curOp.updateInput = e.cm.curOp.selectionChanged = !0, pt(e.cm)), gr(e, 'cursorActivity', e)); } function oo (e) { io(e, ao(e, e.sel, null, !1)); } function ao (e, t, r, n) { for (var i, o = 0; o < t.ranges.length; o++) { var a = t.ranges[o]; var l = t.ranges.length == e.sel.ranges.length && e.sel.ranges[o]; var s = so(e, a.anchor, l && l.anchor, r, n); var c = so(e, a.head, l && l.head, r, n); !i && s == a.anchor && c == a.head || ((i = i || t.ranges.slice(0, o))[o] = new Li(s, c)); } return i ? Mi(i, t.primIndex) : t; } function lo (e, t, r, n, i) { var o = se(e, t.line); if (o.markedSpans) for (var a = 0; a < o.markedSpans.length; ++a) { var l = o.markedSpans[a]; var s = l.marker; if ((l.from == null || (s.inclusiveLeft ? l.from <= t.ch : l.from < t.ch)) && (l.to == null || (s.inclusiveRight ? l.to >= t.ch : l.to > t.ch))) { if (i && (ft(s, 'beforeCursorEnter'), s.explicitlyCleared)) { if (o.markedSpans) { --a; continue; } break; } if (!s.atomic) continue; if (r) { var c = s.find(n < 0 ? 1 : -1); var u = void 0; if ((n < 0 ? s.inclusiveRight : s.inclusiveLeft) && (c = co(e, c, -n, c && c.line == t.line ? o : null)), c && c.line == t.line && (u = ve(c, r)) && (n < 0 ? u < 0 : u > 0)) return lo(e, c, t, n, i); } var d = s.find(n < 0 ? -1 : 1); return (n < 0 ? s.inclusiveLeft : s.inclusiveRight) && (d = co(e, d, n, d.line == t.line ? o : null)), d ? lo(e, d, t, n, i) : null; } } return t; } function so (e, t, r, n, i) { var o = n || 1; var a = lo(e, t, r, o, i) || !i && lo(e, t, r, o, !0) || lo(e, t, r, -o, i) || !i && lo(e, t, r, -o, !0); return a || (e.cantEdit = !0, ge(e.first, 0)); } function co (e, t, r, n) { return r < 0 && t.ch == 0 ? t.line > e.first ? Ce(e, ge(t.line - 1)) : null : r > 0 && t.ch == (n || se(e, t.line)).text.length ? t.line < e.first + e.size - 1 ? ge(t.line + 1, 0) : null : new ge(t.line, t.ch + r); } function uo (e) { e.setSelection(ge(e.firstLine(), 0), ge(e.lastLine()), q); } function fo (i, e, t) { var o = { canceled: !1, from: e.from, to: e.to, text: e.text, origin: e.origin, cancel: function () { return o.canceled = !0; } }; return t && (o.update = function (e, t, r, n) { e && (o.from = Ce(i, e)), t && (o.to = Ce(i, t)), r && (o.text = r), void 0 !== n && (o.origin = n); }), ft(i, 'beforeChange', i, o), i.cm && ft(i.cm, 'beforeChange', i.cm, o), o.canceled ? null : { from: o.from, to: o.to, text: o.text, origin: o.origin }; } function ho (e, t, r) { if (e.cm) { if (!e.cm.curOp) return ri(e.cm, ho)(e, t, r); if (e.cm.state.suppressEdits) return; } if (!(mt(e, 'beforeChange') || e.cm && mt(e.cm, 'beforeChange')) || (t = fo(e, t, !0))) { var n = Te && !r && (function (e, t, r) { var n = null; if (e.iter(t.line, r.line + 1, function (e) { if (e.markedSpans) for (var t = 0; t < e.markedSpans.length; ++t) { var r = e.markedSpans[t].marker; !r.readOnly || n && j(n, r) != -1 || (n = n || []).push(r); } }), !n) return null; for (var i = [{ from: t, to: r }], o = 0; o < n.length; ++o) for (var a = n[o], l = a.find(0), s = 0; s < i.length; ++s) { var c = i[s]; if (!(ve(c.to, l.from) < 0 || ve(c.from, l.to) > 0)) { var u = [s, 1]; var d = ve(c.from, l.from); var f = ve(c.to, l.to); (d < 0 || !a.inclusiveLeft && !d) && u.push({ from: c.from, to: l.from }), (f > 0 || !a.inclusiveRight && !f) && u.push({ from: l.to, to: c.to }), i.splice.apply(i, u), s += u.length - 3; } } return i; }(e, t.from, t.to)); if (n) for (var i = n.length - 1; i >= 0; --i)po(e, { from: n[i].from, to: n[i].to, text: i ? [''] : t.text, origin: t.origin }); else po(e, t); } } function po (e, r) { if (r.text.length != 1 || r.text[0] != '' || ve(r.from, r.to) != 0) { var t = zi(e, r); qi(e, r, t, e.cm ? e.cm.curOp.id : NaN), vo(e, r, t, Oe(e, r)); var n = []; Ii(e, function (e, t) { t || j(n, e.history) != -1 || (xo(e.history, r), n.push(e.history)), vo(e, r, null, Oe(e, r)); }); } } function mo (i, o, e) { var t = i.cm && i.cm.state.suppressEdits; if (!t || e) { for (var a, r = i.history, n = i.sel, l = o == 'undo' ? r.done : r.undone, s = o == 'undo' ? r.undone : r.done, c = 0; c < l.length && (a = l[c], e ? !a.ranges || a.equals(i.sel) : a.ranges); c++);if (c != l.length) { for (r.lastOrigin = r.lastSelOrigin = null; ;) { if (!(a = l.pop()).ranges) { if (t) return void l.push(a); break; } if (Vi(a, s), e && !a.equals(i.sel)) return void ro(i, a, { clearRedo: !1 }); n = a; } var u = []; Vi(n, s), s.push({ changes: u, generation: r.generation }), r.generation = a.generation || ++r.maxGeneration; for (var d = mt(i, 'beforeChange') || i.cm && mt(i.cm, 'beforeChange'), f = function (e) { var r = a.changes[e]; if (r.origin = o, d && !fo(i, r, !1)) return l.length = 0, {}; u.push(Bi(i, r)); var t = e ? zi(i, r) : X(l); vo(i, r, t, $i(i, r)), !e && i.cm && i.cm.scrollIntoView({ from: r.from, to: Ni(r) }); var n = []; Ii(i, function (e, t) { t || j(n, e.history) != -1 || (xo(e.history, r), n.push(e.history)), vo(e, r, null, $i(e, r)); }); }, h = a.changes.length - 1; h >= 0; --h) { var p = f(h); if (p) return p.v; } } } } function go (e, t) { if (t != 0 && (e.first += t, e.sel = new Ti(Y(e.sel.ranges, function (e) { return new Li(ge(e.anchor.line + t, e.anchor.ch), ge(e.head.line + t, e.head.ch)); }), e.sel.primIndex), e.cm)) { oi(e.cm, e.first, e.first - t, t); for (var r = e.cm.display, n = r.viewFrom; n < r.viewTo; n++)ai(e.cm, n, 'gutter'); } } function vo (e, t, r, n) { if (e.cm && !e.cm.curOp) return ri(e.cm, vo)(e, t, r, n); if (t.to.line < e.first)go(e, t.text.length - 1 - (t.to.line - t.from.line)); else if (!(t.from.line > e.lastLine())) { if (t.from.line < e.first) { var i = t.text.length - 1 - (e.first - t.from.line); go(e, i), t = { from: ge(e.first, 0), to: ge(t.to.line + i, t.to.ch), text: [X(t.text)], origin: t.origin }; } var o = e.lastLine(); t.to.line > o && (t = { from: t.from, to: ge(o, se(e, o).text.length), text: [t.text[0]], origin: t.origin }), t.removed = ce(e, t.from, t.to), r = r || zi(e, t), e.cm ? (function (e, t, r) { var n = e.doc; var i = e.display; var o = t.from; var a = t.to; var l = !1; var s = o.line; e.options.lineWrapping || (s = fe(Ke(se(n, o.line))), n.iter(s, a.line + 1, function (e) { if (e == i.maxLine) return l = !0; })); n.sel.contains(t.from, t.to) > -1 && pt(e); Ei(n, t, r, hn(e)), e.options.lineWrapping || (n.iter(s, o.line + t.text.length, function (e) { var t = $e(e); t > i.maxLineLength && (i.maxLine = e, i.maxLineLength = t, i.maxLineChanged = !0, l = !1); }), l && (e.curOp.updateMaxLine = !0)); (function (e, t) { if (e.modeFrontier = Math.min(e.modeFrontier, t), !(e.highlightFrontier < t - 10)) { for (var r = e.first, n = t - 1; r < n; n--) { var i = se(e, n).stateAfter; if (i && (!(i instanceof qt) || n + i.lookAhead < t)) { r = n + 1; break; } }e.highlightFrontier = Math.min(e.highlightFrontier, r); } })(n, o.line), ui(e, 400); var c = t.text.length - (a.line - o.line) - 1; t.full ? oi(e) : o.line != a.line || t.text.length != 1 || Pi(e.doc, t) ? oi(e, o.line, a.line + 1, c) : ai(e, o.line, 'text'); var u = mt(e, 'changes'); var d = mt(e, 'change'); if (d || u) { var f = { from: o, to: a, text: t.text, removed: t.removed, origin: t.origin }; d && gr(e, 'change', e, f), u && (e.curOp.changeObjs || (e.curOp.changeObjs = [])).push(f); }e.display.selForContextMenu = null; }(e.cm, t, n)) : Ei(e, t, n), no(e, r, q); } } function yo (e, t, r, n, i) { var o; ve(n = n || r, r) < 0 && (r = (o = [n, r])[0], n = o[1]); typeof t == 'string' && (t = e.splitLines(t)), ho(e, { from: r, to: n, text: t, origin: i }); } function bo (e, t, r, n) { r < e.line ? e.line += n : t < e.line && (e.line = t, e.ch = 0); } function wo (e, t, r, n) { for (var i = 0; i < e.length; ++i) { var o = e[i]; var a = !0; if (o.ranges) { o.copied || ((o = e[i] = o.deepCopy()).copied = !0); for (var l = 0; l < o.ranges.length; l++)bo(o.ranges[l].anchor, t, r, n), bo(o.ranges[l].head, t, r, n); } else { for (var s = 0; s < o.changes.length; ++s) { var c = o.changes[s]; if (r < c.from.line)c.from = ge(c.from.line + n, c.from.ch), c.to = ge(c.to.line + n, c.to.ch); else if (t <= c.to.line) { a = !1; break; } }a || (e.splice(0, i + 1), i = 0); } } } function xo (e, t) { var r = t.from.line; var n = t.to.line; var i = t.text.length - (n - r) - 1; wo(e.done, r, n, i), wo(e.undone, r, n, i); } function ko (e, t, r, n) { var i = t; var o = t; return typeof t == 'number' ? o = se(e, ke(e, t)) : i = fe(t), i == null ? null : (n(o, i) && e.cm && ai(e.cm, i, r), o); } function Co (e) { this.lines = e, this.parent = null; for (var t = 0, r = 0; r < e.length; ++r)e[r].parent = this, t += e[r].height; this.height = t; } function So (e) { this.children = e; for (var t = 0, r = 0, n = 0; n < e.length; ++n) { var i = e[n]; t += i.chunkSize(), r += i.height, i.parent = this; } this.size = t, this.height = r, this.parent = null; }Li.prototype.from = function () { return xe(this.anchor, this.head); }, Li.prototype.to = function () { return we(this.anchor, this.head); }, Li.prototype.empty = function () { return this.head.line == this.anchor.line && this.head.ch == this.anchor.ch; }, Co.prototype = { chunkSize: function () { return this.lines.length; }, removeInner: function (e, t) { for (var r, n = e, i = e + t; n < i; ++n) { var o = this.lines[n]; this.height -= o.height, (r = o).parent = null, We(r), gr(o, 'delete'); } this.lines.splice(e, t); }, collapse: function (e) { e.push.apply(e, this.lines); }, insertInner: function (e, t, r) { this.height += r, this.lines = this.lines.slice(0, e).concat(t).concat(this.lines.slice(e)); for (var n = 0; n < t.length; ++n)t[n].parent = this; }, iterN: function (e, t, r) { for (var n = e + t; e < n; ++e) if (r(this.lines[e])) return !0; } }, So.prototype = { chunkSize: function () { return this.size; }, removeInner: function (e, t) { this.size -= t; for (var r = 0; r < this.children.length; ++r) { var n = this.children[r]; var i = n.chunkSize(); if (e < i) { var o = Math.min(t, i - e); var a = n.height; if (n.removeInner(e, o), this.height -= a - n.height, i == o && (this.children.splice(r--, 1), n.parent = null), (t -= o) == 0) break; e = 0; } else e -= i; } if (this.size - t < 25 && (this.children.length > 1 || !(this.children[0] instanceof Co))) { var l = []; this.collapse(l), this.children = [new Co(l)], this.children[0].parent = this; } }, collapse: function (e) { for (var t = 0; t < this.children.length; ++t) this.children[t].collapse(e); }, insertInner: function (e, t, r) { this.size += t.length, this.height += r; for (var n = 0; n < this.children.length; ++n) { var i = this.children[n]; var o = i.chunkSize(); if (e <= o) { if (i.insertInner(e, t, r), i.lines && i.lines.length > 50) { for (var a = i.lines.length % 25 + 25, l = a; l < i.lines.length;) { var s = new Co(i.lines.slice(l, l += 25)); i.height -= s.height, this.children.splice(++n, 0, s), s.parent = this; }i.lines = i.lines.slice(0, a), this.maybeSpill(); } break; }e -= o; } }, maybeSpill: function () { if (!(this.children.length <= 10)) { var e = this; do { var t = new So(e.children.splice(e.children.length - 5, 5)); if (e.parent) { e.size -= t.size, e.height -= t.height; var r = j(e.parent.children, e); e.parent.children.splice(r + 1, 0, t); } else { var n = new So(e.children); (n.parent = e).children = [n, t], e = n; }t.parent = e.parent; } while (e.children.length > 10);e.parent.maybeSpill(); } }, iterN: function (e, t, r) { for (var n = 0; n < this.children.length; ++n) { var i = this.children[n]; var o = i.chunkSize(); if (e < o) { var a = Math.min(t, o - e); if (i.iterN(e, a, r)) return !0; if ((t -= a) == 0) break; e = 0; } else e -= o; } } }; function To (e, t, r) { if (r) for (var n in r)r.hasOwnProperty(n) && (this[n] = r[n]); this.doc = e, this.node = t; } function Lo (e, t, r) { _e(t) < (e.curOp && e.curOp.scrollTop || e.doc.scrollTop) && Dn(e, r); }To.prototype.clear = function () { var e = this.doc.cm; var t = this.line.widgets; var r = this.line; var n = fe(r); if (n != null && t) { for (var i = 0; i < t.length; ++i)t[i] == this && t.splice(i--, 1); t.length || (r.widgets = null); var o = Ar(this); de(r, Math.max(0, r.height - o)), e && (ti(e, function () { Lo(e, r, -o), ai(e, n, 'widget'); }), gr(e, 'lineWidgetCleared', e, this, n)); } }, To.prototype.changed = function () { var e = this; var t = this.height; var r = this.doc.cm; var n = this.line; this.height = null; var i = Ar(this) - t; i && (de(n, n.height + i), r && ti(r, function () { r.curOp.forceUpdate = !0, Lo(r, n, i), gr(r, 'lineWidgetChanged', r, e, fe(n)); })); }, gt(To); var Mo = 0; var Ao = function (e, t) { this.lines = [], this.type = t, this.doc = e, this.id = ++Mo; }; function No (t, r, n, e, i) { if (e && e.shared) return (function (e, r, n, i, o) { (i = I(i)).shared = !1; var a = [No(e, r, n, i, o)]; var l = a[0]; var s = i.widgetNode; return Ii(e, function (e) { s && (i.widgetNode = s.cloneNode(!0)), a.push(No(e, Ce(e, r), Ce(e, n), i, o)); for (var t = 0; t < e.linked.length; ++t) if (e.linked[t].isParent) return; l = X(a); }), new Oo(a, l); }(t, r, n, e, i)); if (t.cm && !t.cm.curOp) return ri(t.cm, No)(t, r, n, e, i); var o = new Ao(t, i); var a = ve(r, n); if (e && I(e, o, !1), a > 0 || a == 0 && !1 !== o.clearWhenEmpty) return o; if (o.replacedWith && (o.collapsed = !0, o.widgetNode = N('span', [o.replacedWith], 'CodeMirror-widget'), e.handleMouseEvents || o.widgetNode.setAttribute('cm-ignore-events', 'true'), e.insertLeft && (o.widgetNode.insertLeft = !0)), o.collapsed) { if (Be(t, r.line, r, n, o) || r.line != n.line && Be(t, n.line, r, n, o)) throw new Error('Inserting collapsed marker partially overlapping an existing one'); Le = !0; }o.addToHistory && qi(t, { from: r, to: n, origin: 'markText' }, t.sel, NaN); var l; var s = r.line; var c = t.cm; if (t.iter(s, n.line + 1, function (e) { c && o.collapsed && !c.options.lineWrapping && Ke(e) == c.display.maxLine && (l = !0), o.collapsed && s != r.line && de(e, 0), (function (e, t) { e.markedSpans = e.markedSpans ? e.markedSpans.concat([t]) : [t], t.marker.attachLine(e); }(e, new Me(o, s == r.line ? r.ch : null, s == n.line ? n.ch : null))), ++s; }), o.collapsed && t.iter(r.line, n.line + 1, function (e) { Ve(t, e) && de(e, 0); }), o.clearOnEnter && ct(o, 'beforeCursorEnter', function () { return o.clear(); }), o.readOnly && (Te = !0, (t.history.done.length || t.history.undone.length) && t.clearHistory()), o.collapsed && (o.id = ++Mo, o.atomic = !0), c) { if (l && (c.curOp.updateMaxLine = !0), o.collapsed)oi(c, r.line, n.line + 1); else if (o.className || o.title || o.startStyle || o.endStyle || o.css) for (var u = r.line; u <= n.line; u++)ai(c, u, 'text'); o.atomic && oo(c.doc), gr(c, 'markerAdded', c, o); } return o; }Ao.prototype.clear = function () { var e = this; if (!this.explicitlyCleared) { var t = this.doc.cm; var r = t && !t.curOp; if (r && Xn(t), mt(this, 'clear')) { var n = this.find(); n && gr(this, 'clear', n.from, n.to); } for (var i = null, o = null, a = 0; a < this.lines.length; ++a) { var l = e.lines[a]; var s = Ae(l.markedSpans, e); t && !e.collapsed ? ai(t, fe(l), 'text') : t && (s.to != null && (o = fe(l)), s.from != null && (i = fe(l))), l.markedSpans = Ne(l.markedSpans, s), s.from == null && e.collapsed && !Ve(e.doc, l) && t && de(l, cn(t.display)); } if (t && this.collapsed && !t.options.lineWrapping) for (var c = 0; c < this.lines.length; ++c) { var u = Ke(e.lines[c]); var d = $e(u); d > t.display.maxLineLength && (t.display.maxLine = u, t.display.maxLineLength = d, t.display.maxLineChanged = !0); }i != null && t && this.collapsed && oi(t, i, o + 1), this.lines.length = 0, this.explicitlyCleared = !0, this.atomic && this.doc.cantEdit && (this.doc.cantEdit = !1, t && oo(t.doc)), t && gr(t, 'markerCleared', t, this, i, o), r && Yn(t), this.parent && this.parent.clear(); } }, Ao.prototype.find = function (e, t) { var r, n; e == null && this.type == 'bookmark' && (e = 1); for (var i = 0; i < this.lines.length; ++i) { var o = this.lines[i]; var a = Ae(o.markedSpans, this); if (a.from != null && (r = ge(t ? o : fe(o), a.from), e == -1)) return r; if (a.to != null && (n = ge(t ? o : fe(o), a.to), e == 1)) return n; } return r && { from: r, to: n }; }, Ao.prototype.changed = function () { var o = this; var a = this.find(-1, !0); var l = this; var s = this.doc.cm; a && s && ti(s, function () { var e = a.line; var t = fe(a.line); var r = Fr(s, t); if (r && (Vr(r), s.curOp.selectionChanged = s.curOp.forceUpdate = !0), s.curOp.updateMaxLine = !0, !Ve(l.doc, e) && l.height != null) { var n = l.height; l.height = null; var i = Ar(l) - n; i && de(e, e.height + i); }gr(s, 'markerChanged', s, o); }); }, Ao.prototype.attachLine = function (e) { if (!this.lines.length && this.doc.cm) { var t = this.doc.cm.curOp; t.maybeHiddenMarkers && j(t.maybeHiddenMarkers, this) != -1 || (t.maybeUnhiddenMarkers || (t.maybeUnhiddenMarkers = [])).push(this); } this.lines.push(e); }, Ao.prototype.detachLine = function (e) { if (this.lines.splice(j(this.lines, e), 1), !this.lines.length && this.doc.cm) { var t = this.doc.cm.curOp; (t.maybeHiddenMarkers || (t.maybeHiddenMarkers = [])).push(this); } }, gt(Ao); var Oo = function (e, t) { this.markers = e, this.primary = t; for (var r = 0; r < e.length; ++r)e[r].parent = this; }; function zo (e) { return e.findMarks(ge(e.first, 0), e.clipPos(ge(e.lastLine())), function (e) { return e.parent; }); } function Wo (o) { for (var e = function (e) { var t = o[e]; var r = [t.primary.doc]; Ii(t.primary.doc, function (e) { return r.push(e); }); for (var n = 0; n < t.markers.length; n++) { var i = t.markers[n]; j(r, i.doc) == -1 && (i.parent = null, t.markers.splice(n--, 1)); } }, t = 0; t < o.length; t++)e(t); }Oo.prototype.clear = function () { if (!this.explicitlyCleared) { this.explicitlyCleared = !0; for (var e = 0; e < this.markers.length; ++e) this.markers[e].clear(); gr(this, 'clear'); } }, Oo.prototype.find = function (e, t) { return this.primary.find(e, t); }, gt(Oo); var Do = 0; var Ho = function (e, t, r, n, i) { if (!(this instanceof Ho)) return new Ho(e, t, r, n, i); r == null && (r = 0), So.call(this, [new Co([new tr('', null)])]), this.first = r, this.scrollTop = this.scrollLeft = 0, this.cantEdit = !1, this.cleanGeneration = 1, this.modeFrontier = this.highlightFrontier = r; var o = ge(r, 0); this.sel = Ai(o), this.history = new ji(null), this.id = ++Do, this.modeOption = t, this.lineSep = n, this.direction = i == 'rtl' ? 'rtl' : 'ltr', this.extend = !1, typeof e == 'string' && (e = this.splitLines(e)), Ei(this, { from: o, to: o, text: e }), ro(this, Ai(o), q); }; Ho.prototype = Q(So.prototype, { constructor: Ho, iter: function (e, t, r) { r ? this.iterN(e - this.first, t - e, r) : this.iterN(this.first, this.first + this.size, e); }, insert: function (e, t) { for (var r = 0, n = 0; n < t.length; ++n)r += t[n].height; this.insertInner(e - this.first, t, r); }, remove: function (e, t) { this.removeInner(e - this.first, t); }, getValue: function (e) { var t = ue(this, this.first, this.first + this.size); return !1 === e ? t : t.join(e || this.lineSeparator()); }, setValue: ii(function (e) { var t = ge(this.first, 0); var r = this.first + this.size - 1; ho(this, { from: t, to: ge(r, se(this, r).text.length), text: this.splitLines(e), origin: 'setValue', full: !0 }, !0), this.cm && Pn(this.cm, 0, 0), ro(this, Ai(t), q); }), replaceRange: function (e, t, r, n) { yo(this, e, t = Ce(this, t), r = r ? Ce(this, r) : t, n); }, getRange: function (e, t, r) { var n = ce(this, Ce(this, e), Ce(this, t)); return !1 === r ? n : n.join(r || this.lineSeparator()); }, getLine: function (e) { var t = this.getLineHandle(e); return t && t.text; }, getLineHandle: function (e) { if (pe(this, e)) return se(this, e); }, getLineNumber: function (e) { return fe(e); }, getLineHandleVisualStart: function (e) { return typeof e == 'number' && (e = se(this, e)), Ke(e); }, lineCount: function () { return this.size; }, firstLine: function () { return this.first; }, lastLine: function () { return this.first + this.size - 1; }, clipPos: function (e) { return Ce(this, e); }, getCursor: function (e) { var t = this.sel.primary(); return e == null || e == 'head' ? t.head : e == 'anchor' ? t.anchor : e == 'end' || e == 'to' || !1 === e ? t.to() : t.from(); }, listSelections: function () { return this.sel.ranges; }, somethingSelected: function () { return this.sel.somethingSelected(); }, setCursor: ii(function (e, t, r) { eo(this, Ce(this, typeof e == 'number' ? ge(e, t || 0) : e), null, r); }), setSelection: ii(function (e, t, r) { eo(this, Ce(this, e), Ce(this, t || e), r); }), extendSelection: ii(function (e, t, r) { Zi(this, Ce(this, e), t && Ce(this, t), r); }), extendSelections: ii(function (e, t) { Qi(this, Se(this, e), t); }), extendSelectionsBy: ii(function (e, t) { Qi(this, Se(this, Y(this.sel.ranges, e)), t); }), setSelections: ii(function (e, t, r) { if (e.length) { for (var n = [], i = 0; i < e.length; i++)n[i] = new Li(Ce(this, e[i].anchor), Ce(this, e[i].head)); t == null && (t = Math.min(e.length - 1, this.sel.primIndex)), ro(this, Mi(n, t), r); } }), addSelection: ii(function (e, t, r) { var n = this.sel.ranges.slice(0); n.push(new Li(Ce(this, e), Ce(this, t || e))), ro(this, Mi(n, n.length - 1), r); }), getSelection: function (e) { for (var t, r = this.sel.ranges, n = 0; n < r.length; n++) { var i = ce(this, r[n].from(), r[n].to()); t = t ? t.concat(i) : i; } return !1 === e ? t : t.join(e || this.lineSeparator()); }, getSelections: function (e) { for (var t = [], r = this.sel.ranges, n = 0; n < r.length; n++) { var i = ce(this, r[n].from(), r[n].to()); !1 !== e && (i = i.join(e || this.lineSeparator())), t[n] = i; } return t; }, replaceSelection: function (e, t, r) { for (var n = [], i = 0; i < this.sel.ranges.length; i++)n[i] = e; this.replaceSelections(n, t, r || '+input'); }, replaceSelections: ii(function (e, t, r) { for (var n = [], i = this.sel, o = 0; o < i.ranges.length; o++) { var a = i.ranges[o]; n[o] = { from: a.from(), to: a.to(), text: this.splitLines(e[o]), origin: r }; } for (var l = t && t != 'end' && (function (e, t, r) { for (var n = [], i = ge(e.first, 0), o = i, a = 0; a < t.length; a++) { var l = t[a]; var s = Wi(l.from, i, o); var c = Wi(Ni(l), i, o); if (i = l.to, o = c, r == 'around') { var u = e.sel.ranges[a]; var d = ve(u.head, u.anchor) < 0; n[a] = new Li(d ? c : s, d ? s : c); } else n[a] = new Li(s, s); } return new Ti(n, e.sel.primIndex); }(this, n, t)), s = n.length - 1; s >= 0; s--)ho(this, n[s]); l ? to(this, l) : this.cm && Hn(this.cm); }), undo: ii(function () { mo(this, 'undo'); }), redo: ii(function () { mo(this, 'redo'); }), undoSelection: ii(function () { mo(this, 'undo', !0); }), redoSelection: ii(function () { mo(this, 'redo', !0); }), setExtending: function (e) { this.extend = e; }, getExtending: function () { return this.extend; }, historySize: function () { for (var e = this.history, t = 0, r = 0, n = 0; n < e.done.length; n++)e.done[n].ranges || ++t; for (var i = 0; i < e.undone.length; i++)e.undone[i].ranges || ++r; return { undo: t, redo: r }; }, clearHistory: function () { this.history = new ji(this.history.maxGeneration); }, markClean: function () { this.cleanGeneration = this.changeGeneration(!0); }, changeGeneration: function (e) { return e && (this.history.lastOp = this.history.lastSelOp = this.history.lastOrigin = null), this.history.generation; }, isClean: function (e) { return this.history.generation == (e || this.cleanGeneration); }, getHistory: function () { return { done: Xi(this.history.done), undone: Xi(this.history.undone) }; }, setHistory: function (e) { var t = this.history = new ji(this.history.maxGeneration); t.done = Xi(e.done.slice(0), null, !0), t.undone = Xi(e.undone.slice(0), null, !0); }, setGutterMarker: ii(function (e, r, n) { return ko(this, e, 'gutter', function (e) { var t = e.gutterMarkers || (e.gutterMarkers = {}); return !(t[r] = n) && re(t) && (e.gutterMarkers = null), !0; }); }), clearGutter: ii(function (t) { var r = this; this.iter(function (e) { e.gutterMarkers && e.gutterMarkers[t] && ko(r, e, 'gutter', function () { return e.gutterMarkers[t] = null, re(e.gutterMarkers) && (e.gutterMarkers = null), !0; }); }); }), lineInfo: function (e) { var t; if (typeof e == 'number') { if (!pe(this, e)) return null; if (!(e = se(this, t = e))) return null; } else if ((t = fe(e)) == null) return null; return { line: t, handle: e, text: e.text, gutterMarkers: e.gutterMarkers, textClass: e.textClass, bgClass: e.bgClass, wrapClass: e.wrapClass, widgets: e.widgets }; }, addLineClass: ii(function (e, r, n) { return ko(this, e, r == 'gutter' ? 'gutter' : 'class', function (e) { var t = r == 'text' ? 'textClass' : r == 'background' ? 'bgClass' : r == 'gutter' ? 'gutterClass' : 'wrapClass'; if (e[t]) { if (S(n).test(e[t])) return !1; e[t] += ' ' + n; } else e[t] = n; return !0; }); }), removeLineClass: ii(function (e, o, a) { return ko(this, e, o == 'gutter' ? 'gutter' : 'class', function (e) { var t = o == 'text' ? 'textClass' : o == 'background' ? 'bgClass' : o == 'gutter' ? 'gutterClass' : 'wrapClass'; var r = e[t]; if (!r) return !1; if (a == null)e[t] = null; else { var n = r.match(S(a)); if (!n) return !1; var i = n.index + n[0].length; e[t] = r.slice(0, n.index) + (n.index && i != r.length ? ' ' : '') + r.slice(i) || null; } return !0; }); }), addLineWidget: ii(function (e, t, r) { return (function (n, e, t, r) { var i = new To(n, t, r); var o = n.cm; return o && i.noHScroll && (o.display.alignWidgets = !0), ko(n, e, 'widget', function (e) { var t = e.widgets || (e.widgets = []); if (i.insertAt == null ? t.push(i) : t.splice(Math.min(t.length - 1, Math.max(0, i.insertAt)), 0, i), i.line = e, o && !Ve(n, e)) { var r = _e(e) < n.scrollTop; de(e, e.height + Ar(i)), r && Dn(o, i.height), o.curOp.forceUpdate = !0; } return !0; }), o && gr(o, 'lineWidgetAdded', o, i, typeof e == 'number' ? e : fe(e)), i; }(this, e, t, r)); }), removeLineWidget: function (e) { e.clear(); }, markText: function (e, t, r) { return No(this, Ce(this, e), Ce(this, t), r, r && r.type || 'range'); }, setBookmark: function (e, t) { var r = { replacedWith: t && (t.nodeType == null ? t.widget : t), insertLeft: t && t.insertLeft, clearWhenEmpty: !1, shared: t && t.shared, handleMouseEvents: t && t.handleMouseEvents }; return No(this, e = Ce(this, e), e, r, 'bookmark'); }, findMarksAt: function (e) { var t = []; var r = se(this, (e = Ce(this, e)).line).markedSpans; if (r) for (var n = 0; n < r.length; ++n) { var i = r[n]; (i.from == null || i.from <= e.ch) && (i.to == null || i.to >= e.ch) && t.push(i.marker.parent || i.marker); } return t; }, findMarks: function (i, o, a) { i = Ce(this, i), o = Ce(this, o); var l = []; var s = i.line; return this.iter(i.line, o.line + 1, function (e) { var t = e.markedSpans; if (t) for (var r = 0; r < t.length; r++) { var n = t[r]; n.to != null && s == i.line && i.ch >= n.to || n.from == null && s != i.line || n.from != null && s == o.line && n.from >= o.ch || a && !a(n.marker) || l.push(n.marker.parent || n.marker); }++s; }), l; }, getAllMarks: function () { var n = []; return this.iter(function (e) { var t = e.markedSpans; if (t) for (var r = 0; r < t.length; ++r)t[r].from != null && n.push(t[r].marker); }), n; }, posFromIndex: function (r) { var n; var i = this.first; var o = this.lineSeparator().length; return this.iter(function (e) { var t = e.text.length + o; if (r < t) return n = r, !0; r -= t, ++i; }), Ce(this, ge(i, n)); }, indexFromPos: function (e) { var t = (e = Ce(this, e)).ch; if (e.line < this.first || e.ch < 0) return 0; var r = this.lineSeparator().length; return this.iter(this.first, e.line, function (e) { t += e.text.length + r; }), t; }, copy: function (e) { var t = new Ho(ue(this, this.first, this.first + this.size), this.modeOption, this.first, this.lineSep, this.direction); return t.scrollTop = this.scrollTop, t.scrollLeft = this.scrollLeft, t.sel = this.sel, t.extend = !1, e && (t.history.undoDepth = this.history.undoDepth, t.setHistory(this.getHistory())), t; }, linkedDoc: function (e) { e = e || {}; var t = this.first; var r = this.first + this.size; e.from != null && e.from > t && (t = e.from), e.to != null && e.to < r && (r = e.to); var n = new Ho(ue(this, t, r), e.mode || this.modeOption, t, this.lineSep, this.direction); return e.sharedHist && (n.history = this.history), (this.linked || (this.linked = [])).push({ doc: n, sharedHist: e.sharedHist }), n.linked = [{ doc: this, isParent: !0, sharedHist: e.sharedHist }], (function (e, t) { for (var r = 0; r < t.length; r++) { var n = t[r]; var i = n.find(); var o = e.clipPos(i.from); var a = e.clipPos(i.to); if (ve(o, a)) { var l = No(e, o, a, n.primary, n.primary.type); n.markers.push(l), l.parent = n; } } }(n, zo(this))), n; }, unlinkDoc: function (e) { if (e instanceof Wa && (e = e.doc), this.linked) for (var t = 0; t < this.linked.length; ++t) { if (this.linked[t].doc == e) { this.linked.splice(t, 1), e.unlinkDoc(this), Wo(zo(this)); break; } } if (e.history == this.history) { var r = [e.id]; Ii(e, function (e) { return r.push(e.id); }, !0), e.history = new ji(null), e.history.done = Xi(this.history.done, r), e.history.undone = Xi(this.history.undone, r); } }, iterLinkedDocs: function (e) { Ii(this, e); }, getMode: function () { return this.mode; }, getEditor: function () { return this.cm; }, splitLines: function (e) { return this.lineSep ? e.split(this.lineSep) : Nt(e); }, lineSeparator: function () { return this.lineSep || '\n'; }, setDirection: ii(function (e) { e != 'rtl' && (e = 'ltr'), e != this.direction && (this.direction = e, this.iter(function (e) { return e.order = null; }), this.cm && (function (e) { ti(e, function () { Ri(e), oi(e); }); }(this.cm))); }) }), Ho.prototype.eachLine = Ho.prototype.iter; var Po = 0; function Eo (e) { var i = this; if (Io(i), !ht(i, e) && !Nr(i.display, e)) { vt(e), x && (Po = +new Date()); var o = mn(i, e, !0); var t = e.dataTransfer.files; if (o && !i.isReadOnly()) if (t && t.length && window.FileReader && window.File) for (var a = t.length, l = Array(a), s = 0, r = function (e, r) { if (!i.options.allowDropFileTypes || j(i.options.allowDropFileTypes, e.type) != -1) { var n = new FileReader(); n.onload = ri(i, function () { var e = n.result; if (/[\x00-\x08\x0e-\x1f]{2}/.test(e) && (e = ''), l[r] = e, ++s == a) { var t = { from: o = Ce(i.doc, o), to: o, text: i.doc.splitLines(l.join(i.doc.lineSeparator())), origin: 'paste' }; ho(i.doc, t), to(i.doc, Ai(o, Ni(t))); } }), n.readAsText(e); } }, n = 0; n < a; ++n)r(t[n], n); else { if (i.state.draggingText && i.doc.sel.contains(o) > -1) return i.state.draggingText(e), void setTimeout(function () { return i.display.input.focus(); }, 20); try { var c = e.dataTransfer.getData('Text'); if (c) { var u; if (i.state.draggingText && !i.state.draggingText.copy && (u = i.listSelections()), no(i.doc, Ai(o, o)), u) for (var d = 0; d < u.length; ++d)yo(i.doc, '', u[d].anchor, u[d].head, 'drag'); i.replaceSelection(c, 'around', 'paste'), i.display.input.focus(); } } catch (e) {} } } } function Io (e) { e.display.dragCursor && (e.display.lineSpace.removeChild(e.display.dragCursor), e.display.dragCursor = null); } function Fo (e) { if (document.getElementsByClassName) for (var t = document.getElementsByClassName('CodeMirror'), r = 0; r < t.length; r++) { var n = t[r].CodeMirror; n && e(n); } } var Ro = !1; function jo () { Ro || ((function () { var e; ct(window, 'resize', function () { e == null && (e = setTimeout(function () { e = null, Fo(Bo); }, 100)); }), ct(window, 'blur', function () { return Fo(Ln); }); }()), Ro = !0); } function Bo (e) { var t = e.display; t.cachedCharWidth = t.cachedTextHeight = t.cachedPaddingH = null, t.scrollbarsClipped = !1, e.setSize(); } for (var Ko = { 3: 'Pause', 8: 'Backspace', 9: 'Tab', 13: 'Enter', 16: 'Shift', 17: 'Ctrl', 18: 'Alt', 19: 'Pause', 20: 'CapsLock', 27: 'Esc', 32: 'Space', 33: 'PageUp', 34: 'PageDown', 35: 'End', 36: 'Home', 37: 'Left', 38: 'Up', 39: 'Right', 40: 'Down', 44: 'PrintScrn', 45: 'Insert', 46: 'Delete', 59: ';', 61: '=', 91: 'Mod', 92: 'Mod', 93: 'Mod', 106: '*', 107: '=', 109: '-', 110: '.', 111: '/', 127: 'Delete', 145: 'ScrollLock', 173: '-', 186: ';', 187: '=', 188: ',', 189: '-', 190: '.', 191: '/', 192: '`', 219: '[', 220: '\\', 221: ']', 222: "'", 63232: 'Up', 63233: 'Down', 63234: 'Left', 63235: 'Right', 63272: 'Delete', 63273: 'Home', 63275: 'End', 63276: 'PageUp', 63277: 'PageDown', 63302: 'Insert' }, qo = 0; qo < 10; qo++)Ko[qo + 48] = Ko[qo + 96] = String(qo); for (var Uo = 65; Uo <= 90; Uo++)Ko[Uo] = String.fromCharCode(Uo); for (var Vo = 1; Vo <= 12; Vo++)Ko[Vo + 111] = Ko[Vo + 63235] = 'F' + Vo; var Go = {}; function _o (e) { var t; var r; var n; var i; var o = e.split(/-(?!$)/); e = o[o.length - 1]; for (var a = 0; a < o.length - 1; a++) { var l = o[a]; if (/^(cmd|meta|m)$/i.test(l))i = !0; else if (/^a(lt)?$/i.test(l))t = !0; else if (/^(c|ctrl|control)$/i.test(l))r = !0; else { if (!/^s(hift)?$/i.test(l)) throw new Error('Unrecognized modifier name: ' + l); n = !0; } } return t && (e = 'Alt-' + e), r && (e = 'Ctrl-' + e), i && (e = 'Cmd-' + e), n && (e = 'Shift-' + e), e; } function $o (e) { var t = {}; for (var r in e) if (e.hasOwnProperty(r)) { var n = e[r]; if (/^(name|fallthrough|(de|at)tach)$/.test(r)) continue; if (n == '...') { delete e[r]; continue; } for (var i = Y(r.split(' '), _o), o = 0; o < i.length; o++) { var a = void 0; var l = void 0; a = o == i.length - 1 ? (l = i.join(' '), n) : (l = i.slice(0, o + 1).join(' '), '...'); var s = t[l]; if (s) { if (s != a) throw new Error('Inconsistent bindings for ' + l); } else t[l] = a; } delete e[r]; } for (var c in t)e[c] = t[c]; return e; } function Xo (e, t, r, n) { var i = (t = Jo(t)).call ? t.call(e, n) : t[e]; if (!1 === i) return 'nothing'; if (i === '...') return 'multi'; if (i != null && r(i)) return 'handled'; if (t.fallthrough) { if (Object.prototype.toString.call(t.fallthrough) != '[object Array]') return Xo(e, t.fallthrough, r, n); for (var o = 0; o < t.fallthrough.length; o++) { var a = Xo(e, t.fallthrough[o], r, n); if (a) return a; } } } function Yo (e) { var t = typeof e == 'string' ? e : Ko[e.keyCode]; return t == 'Ctrl' || t == 'Alt' || t == 'Shift' || t == 'Mod'; } function Zo (e, t, r) { var n = e; return t.altKey && n != 'Alt' && (e = 'Alt-' + e), (y ? t.metaKey : t.ctrlKey) && n != 'Ctrl' && (e = 'Ctrl-' + e), (y ? t.ctrlKey : t.metaKey) && n != 'Cmd' && (e = 'Cmd-' + e), !r && t.shiftKey && n != 'Shift' && (e = 'Shift-' + e), e; } function Qo (e, t) { if (g && e.keyCode == 34 && e.char) return !1; var r = Ko[e.keyCode]; return r != null && !e.altGraphKey && (e.keyCode == 3 && e.code && (r = e.code), Zo(r, e, t)); } function Jo (e) { return typeof e == 'string' ? Go[e] : e; } function ea (t, e) { for (var r = t.doc.sel.ranges, n = [], i = 0; i < r.length; i++) { for (var o = e(r[i]); n.length && ve(o.from, X(n).to) <= 0;) { var a = n.pop(); if (ve(a.from, o.from) < 0) { o.from = a.from; break; } }n.push(o); }ti(t, function () { for (var e = n.length - 1; e >= 0; e--)yo(t.doc, '', n[e].from, n[e].to, '+delete'); Hn(t); }); } function ta (e, t, r) { var n = oe(e.text, t + r, r); return n < 0 || n > e.text.length ? null : n; } function ra (e, t, r) { var n = ta(e, t.ch, r); return n == null ? null : new ge(t.line, n, r < 0 ? 'after' : 'before'); } function na (e, t, r, n, i) { if (e) { var o = lt(r, t.doc.direction); if (o) { var a; var l = i < 0 ? X(o) : o[0]; var s = i < 0 == (l.level == 1) ? 'after' : 'before'; if (l.level > 0 || t.doc.direction == 'rtl') { var c = Rr(t, r); a = i < 0 ? r.text.length - 1 : 0; var u = jr(t, c, a).top; a = ae(function (e) { return jr(t, c, e).top == u; }, i < 0 == (l.level == 1) ? l.from : l.to - 1, a), s == 'before' && (a = ta(r, a, 1)); } else a = i < 0 ? l.to : l.from; return new ge(n, a, s); } } return new ge(n, i < 0 ? r.text.length : 0, i < 0 ? 'before' : 'after'); } function ia (t, r, l, e) { var s = lt(r, t.doc.direction); if (!s) return ra(r, l, e); l.ch >= r.text.length ? (l.ch = r.text.length, l.sticky = 'before') : l.ch <= 0 && (l.ch = 0, l.sticky = 'after'); var n = Ze(s, l.ch, l.sticky); var i = s[n]; if (t.doc.direction == 'ltr' && i.level % 2 == 0 && (e > 0 ? i.to > l.ch : i.from < l.ch)) return ra(r, l, e); function c (e, t) { return ta(r, e instanceof ge ? e.ch : e, t); } function o (e) { return t.options.lineWrapping ? (a = a || Rr(t, r), an(t, r, a, e)) : { begin: 0, end: r.text.length }; } var a; var u = o(l.sticky == 'before' ? c(l, -1) : l.ch); if (t.doc.direction == 'rtl' || i.level == 1) { var d = i.level == 1 == e < 0; var f = c(l, d ? 1 : -1); if (f != null && (d ? f <= i.to && f <= u.end : f >= i.from && f >= u.begin)) { var h = d ? 'before' : 'after'; return new ge(l.line, f, h); } } function p (e, t, r) { for (var n = function (e, t) { return t ? new ge(l.line, c(e, 1), 'before') : new ge(l.line, e, 'after'); }; e >= 0 && e < s.length; e += t) { var i = s[e]; var o = t > 0 == (i.level != 1); var a = o ? r.begin : c(r.end, -1); if (i.from <= a && a < i.to) return n(a, o); if (a = o ? i.from : c(i.to, -1), r.begin <= a && a < r.end) return n(a, o); } } var m = p(n + e, e, u); if (m) return m; var g = e > 0 ? u.end : c(u.begin, -1); return g == null || e > 0 && g == r.text.length || !(m = p(e > 0 ? 0 : s.length - 1, e, o(g))) ? null : m; }Go.basic = { Left: 'goCharLeft', Right: 'goCharRight', Up: 'goLineUp', Down: 'goLineDown', End: 'goLineEnd', Home: 'goLineStartSmart', PageUp: 'goPageUp', PageDown: 'goPageDown', Delete: 'delCharAfter', Backspace: 'delCharBefore', 'Shift-Backspace': 'delCharBefore', Tab: 'defaultTab', 'Shift-Tab': 'indentAuto', Enter: 'newlineAndIndent', Insert: 'toggleOverwrite', Esc: 'singleSelection' }, Go.pcDefault = { 'Ctrl-A': 'selectAll', 'Ctrl-D': 'deleteLine', 'Ctrl-Z': 'undo', 'Shift-Ctrl-Z': 'redo', 'Ctrl-Y': 'redo', 'Ctrl-Home': 'goDocStart', 'Ctrl-End': 'goDocEnd', 'Ctrl-Up': 'goLineUp', 'Ctrl-Down': 'goLineDown', 'Ctrl-Left': 'goGroupLeft', 'Ctrl-Right': 'goGroupRight', 'Alt-Left': 'goLineStart', 'Alt-Right': 'goLineEnd', 'Ctrl-Backspace': 'delGroupBefore', 'Ctrl-Delete': 'delGroupAfter', 'Ctrl-S': 'save', 'Ctrl-F': 'find', 'Ctrl-G': 'findNext', 'Shift-Ctrl-G': 'findPrev', 'Shift-Ctrl-F': 'replace', 'Shift-Ctrl-R': 'replaceAll', 'Ctrl-[': 'indentLess', 'Ctrl-]': 'indentMore', 'Ctrl-U': 'undoSelection', 'Shift-Ctrl-U': 'redoSelection', 'Alt-U': 'redoSelection', fallthrough: 'basic' }, Go.emacsy = { 'Ctrl-F': 'goCharRight', 'Ctrl-B': 'goCharLeft', 'Ctrl-P': 'goLineUp', 'Ctrl-N': 'goLineDown', 'Alt-F': 'goWordRight', 'Alt-B': 'goWordLeft', 'Ctrl-A': 'goLineStart', 'Ctrl-E': 'goLineEnd', 'Ctrl-V': 'goPageDown', 'Shift-Ctrl-V': 'goPageUp', 'Ctrl-D': 'delCharAfter', 'Ctrl-H': 'delCharBefore', 'Alt-D': 'delWordAfter', 'Alt-Backspace': 'delWordBefore', 'Ctrl-K': 'killLine', 'Ctrl-T': 'transposeChars', 'Ctrl-O': 'openLine' }, Go.macDefault = { 'Cmd-A': 'selectAll', 'Cmd-D': 'deleteLine', 'Cmd-Z': 'undo', 'Shift-Cmd-Z': 'redo', 'Cmd-Y': 'redo', 'Cmd-Home': 'goDocStart', 'Cmd-Up': 'goDocStart', 'Cmd-End': 'goDocEnd', 'Cmd-Down': 'goDocEnd', 'Alt-Left': 'goGroupLeft', 'Alt-Right': 'goGroupRight', 'Cmd-Left': 'goLineLeft', 'Cmd-Right': 'goLineRight', 'Alt-Backspace': 'delGroupBefore', 'Ctrl-Alt-Backspace': 'delGroupAfter', 'Alt-Delete': 'delGroupAfter', 'Cmd-S': 'save', 'Cmd-F': 'find', 'Cmd-G': 'findNext', 'Shift-Cmd-G': 'findPrev', 'Cmd-Alt-F': 'replace', 'Shift-Cmd-Alt-F': 'replaceAll', 'Cmd-[': 'indentLess', 'Cmd-]': 'indentMore', 'Cmd-Backspace': 'delWrappedLineLeft', 'Cmd-Delete': 'delWrappedLineRight', 'Cmd-U': 'undoSelection', 'Shift-Cmd-U': 'redoSelection', 'Ctrl-Up': 'goDocStart', 'Ctrl-Down': 'goDocEnd', fallthrough: ['basic', 'emacsy'] }, Go.default = w ? Go.macDefault : Go.pcDefault; var oa = { selectAll: uo, singleSelection: function (e) { return e.setSelection(e.getCursor('anchor'), e.getCursor('head'), q); }, killLine: function (r) { return ea(r, function (e) { if (e.empty()) { var t = se(r.doc, e.head.line).text.length; return e.head.ch == t && e.head.line < r.lastLine() ? { from: e.head, to: ge(e.head.line + 1, 0) } : { from: e.head, to: ge(e.head.line, t) }; } return { from: e.from(), to: e.to() }; }); }, deleteLine: function (t) { return ea(t, function (e) { return { from: ge(e.from().line, 0), to: Ce(t.doc, ge(e.to().line + 1, 0)) }; }); }, delLineLeft: function (e) { return ea(e, function (e) { return { from: ge(e.from().line, 0), to: e.from() }; }); }, delWrappedLineLeft: function (r) { return ea(r, function (e) { var t = r.charCoords(e.head, 'div').top + 5; return { from: r.coordsChar({ left: 0, top: t }, 'div'), to: e.from() }; }); }, delWrappedLineRight: function (n) { return ea(n, function (e) { var t = n.charCoords(e.head, 'div').top + 5; var r = n.coordsChar({ left: n.display.lineDiv.offsetWidth + 100, top: t }, 'div'); return { from: e.from(), to: r }; }); }, undo: function (e) { return e.undo(); }, redo: function (e) { return e.redo(); }, undoSelection: function (e) { return e.undoSelection(); }, redoSelection: function (e) { return e.redoSelection(); }, goDocStart: function (e) { return e.extendSelection(ge(e.firstLine(), 0)); }, goDocEnd: function (e) { return e.extendSelection(ge(e.lastLine())); }, goLineStart: function (t) { return t.extendSelectionsBy(function (e) { return aa(t, e.head.line); }, { origin: '+move', bias: 1 }); }, goLineStartSmart: function (t) { return t.extendSelectionsBy(function (e) { return la(t, e.head); }, { origin: '+move', bias: 1 }); }, goLineEnd: function (t) { return t.extendSelectionsBy(function (e) { return (function (e, t) { var r = se(e.doc, t); var n = (function (e) { for (var t; t = Re(e);)e = t.find(1, !0).line; return e; }(r)); n != r && (t = fe(n)); return na(!0, e, r, t, -1); }(t, e.head.line)); }, { origin: '+move', bias: -1 }); }, goLineRight: function (r) { return r.extendSelectionsBy(function (e) { var t = r.cursorCoords(e.head, 'div').top + 5; return r.coordsChar({ left: r.display.lineDiv.offsetWidth + 100, top: t }, 'div'); }, V); }, goLineLeft: function (r) { return r.extendSelectionsBy(function (e) { var t = r.cursorCoords(e.head, 'div').top + 5; return r.coordsChar({ left: 0, top: t }, 'div'); }, V); }, goLineLeftSmart: function (n) { return n.extendSelectionsBy(function (e) { var t = n.cursorCoords(e.head, 'div').top + 5; var r = n.coordsChar({ left: 0, top: t }, 'div'); return r.ch < n.getLine(r.line).search(/\S/) ? la(n, e.head) : r; }, V); }, goLineUp: function (e) { return e.moveV(-1, 'line'); }, goLineDown: function (e) { return e.moveV(1, 'line'); }, goPageUp: function (e) { return e.moveV(-1, 'page'); }, goPageDown: function (e) { return e.moveV(1, 'page'); }, goCharLeft: function (e) { return e.moveH(-1, 'char'); }, goCharRight: function (e) { return e.moveH(1, 'char'); }, goColumnLeft: function (e) { return e.moveH(-1, 'column'); }, goColumnRight: function (e) { return e.moveH(1, 'column'); }, goWordLeft: function (e) { return e.moveH(-1, 'word'); }, goGroupRight: function (e) { return e.moveH(1, 'group'); }, goGroupLeft: function (e) { return e.moveH(-1, 'group'); }, goWordRight: function (e) { return e.moveH(1, 'word'); }, delCharBefore: function (e) { return e.deleteH(-1, 'char'); }, delCharAfter: function (e) { return e.deleteH(1, 'char'); }, delWordBefore: function (e) { return e.deleteH(-1, 'word'); }, delWordAfter: function (e) { return e.deleteH(1, 'word'); }, delGroupBefore: function (e) { return e.deleteH(-1, 'group'); }, delGroupAfter: function (e) { return e.deleteH(1, 'group'); }, indentAuto: function (e) { return e.indentSelection('smart'); }, indentMore: function (e) { return e.indentSelection('add'); }, indentLess: function (e) { return e.indentSelection('subtract'); }, insertTab: function (e) { return e.replaceSelection('\t'); }, insertSoftTab: function (e) { for (var t = [], r = e.listSelections(), n = e.options.tabSize, i = 0; i < r.length; i++) { var o = r[i].from(); var a = F(e.getLine(o.line), o.ch, n); t.push($(n - a % n)); }e.replaceSelections(t); }, defaultTab: function (e) { e.somethingSelected() ? e.indentSelection('add') : e.execCommand('insertTab'); }, transposeChars: function (a) { return ti(a, function () { for (var e = a.listSelections(), t = [], r = 0; r < e.length; r++) if (e[r].empty()) { var n = e[r].head; var i = se(a.doc, n.line).text; if (i) if (n.ch == i.length && (n = new ge(n.line, n.ch - 1)), n.ch > 0)n = new ge(n.line, n.ch + 1), a.replaceRange(i.charAt(n.ch - 1) + i.charAt(n.ch - 2), ge(n.line, n.ch - 2), n, '+transpose'); else if (n.line > a.doc.first) { var o = se(a.doc, n.line - 1).text; o && (n = new ge(n.line, 1), a.replaceRange(i.charAt(0) + a.doc.lineSeparator() + o.charAt(o.length - 1), ge(n.line - 1, o.length - 1), n, '+transpose')); }t.push(new Li(n, n)); }a.setSelections(t); }); }, newlineAndIndent: function (n) { return ti(n, function () { for (var e = n.listSelections(), t = e.length - 1; t >= 0; t--)n.replaceRange(n.doc.lineSeparator(), e[t].anchor, e[t].head, '+input'); e = n.listSelections(); for (var r = 0; r < e.length; r++)n.indentLine(e[r].from().line, null, !0); Hn(n); }); }, openLine: function (e) { return e.replaceSelection('\n', 'start'); }, toggleOverwrite: function (e) { return e.toggleOverwrite(); } }; function aa (e, t) { var r = se(e.doc, t); var n = Ke(r); return n != r && (t = fe(n)), na(!0, e, n, t, 1); } function la (e, t) { var r = aa(e, t.line); var n = se(e.doc, r.line); var i = lt(n, e.doc.direction); if (i && i[0].level != 0) return r; var o = Math.max(0, n.text.search(/\S/)); var a = t.line == r.line && t.ch <= o && t.ch; return ge(r.line, a ? 0 : o, r.sticky); } function sa (e, t, r) { if (typeof t == 'string' && !(t = oa[t])) return !1; e.display.input.ensurePolled(); var n = e.display.shift; var i = !1; try { e.isReadOnly() && (e.state.suppressEdits = !0), r && (e.display.shift = !1), i = t(e) != K; } finally { e.display.shift = n, e.state.suppressEdits = !1; } return i; } var ca = new R(); function ua (e, t, r, n) { var i = e.state.keySeq; if (i) { if (Yo(t)) return 'handled'; if (/\'$/.test(t) ? e.state.keySeq = null : ca.set(50, function () { e.state.keySeq == i && (e.state.keySeq = null, e.display.input.reset()); }), da(e, i + ' ' + t, r, n)) return !0; } return da(e, t, r, n); } function da (e, t, r, n) { var i = (function (e, t, r) { for (var n = 0; n < e.state.keyMaps.length; n++) { var i = Xo(t, e.state.keyMaps[n], r, e); if (i) return i; } return e.options.extraKeys && Xo(t, e.options.extraKeys, r, e) || Xo(t, e.options.keyMap, r, e); }(e, t, n)); return i == 'multi' && (e.state.keySeq = t), i == 'handled' && gr(e, 'keyHandled', e, t, r), i != 'handled' && i != 'multi' || (vt(r), kn(e)), !!i; } function fa (t, e) { var r = Qo(e, !0); return !!r && (e.shiftKey && !t.state.keySeq ? ua(t, 'Shift-' + r, e, function (e) { return sa(t, e, !0); }) || ua(t, r, e, function (e) { if (typeof e == 'string' ? /^go[A-Z]/.test(e) : e.motion) return sa(t, e); }) : ua(t, r, e, function (e) { return sa(t, e); })); } var ha = null; function pa (e) { var t = this; if (t.curOp.focus = W(), !ht(t, e)) { x && k < 11 && e.keyCode == 27 && (e.returnValue = !1); var r = e.keyCode; t.display.shift = r == 16 || e.shiftKey; var n = fa(t, e); g && (ha = n ? r : null, !n && r == 88 && !zt && (w ? e.metaKey : e.ctrlKey) && t.replaceSelection('', null, 'cut')), r != 18 || /\bCodeMirror-crosshair\b/.test(t.display.lineDiv.className) || (function (e) { var t = e.display.lineDiv; function r (e) { e.keyCode != 18 && e.altKey || (L(t, 'CodeMirror-crosshair'), dt(document, 'keyup', r), dt(document, 'mouseover', r)); }D(t, 'CodeMirror-crosshair'), ct(document, 'keyup', r), ct(document, 'mouseover', r); }(t)); } } function ma (e) { e.keyCode == 16 && (this.doc.sel.shift = !1), ht(this, e); } function ga (e) { var t = this; if (!(Nr(t.display, e) || ht(t, e) || e.ctrlKey && !e.altKey || w && e.metaKey)) { var r = e.keyCode; var n = e.charCode; if (g && r == ha) return ha = null, void vt(e); if (!g || e.which && !(e.which < 10) || !fa(t, e)) { var i = String.fromCharCode(n == null ? r : n); i == '\b' || (function (t, e, r) { return ua(t, "'" + r + "'", e, function (e) { return sa(t, e, !0); }); }(t, e, i)) || t.display.input.onKeyPress(e); } } } var va; var ya; var ba = function (e, t, r) { this.time = e, this.pos = t, this.button = r; }; function wa (e) { var t = this; var r = t.display; if (!(ht(t, e) || r.activeTouch && r.input.supportsTouch())) if (r.input.ensurePolled(), r.shift = e.shiftKey, Nr(r, e))b || (r.scroller.draggable = !1, setTimeout(function () { return r.scroller.draggable = !0; }, 100)); else if (!Ca(t, e)) { var n = mn(t, e); var i = kt(e); var o = n ? (function (e, t) { var r = +new Date(); return ya && ya.compare(r, e, t) ? (va = ya = null, 'triple') : va && va.compare(r, e, t) ? (ya = new ba(r, e, t), va = null, 'double') : (va = new ba(r, e, t), ya = null, 'single'); }(n, i)) : 'single'; window.focus(), i == 1 && t.state.selectingText && t.state.selectingText(e), n && (function (r, e, n, t, i) { var o = 'Click'; t == 'double' ? o = 'Double' + o : t == 'triple' && (o = 'Triple' + o); return ua(r, Zo(o = (e == 1 ? 'Left' : e == 2 ? 'Middle' : 'Right') + o, i), i, function (e) { if (typeof e == 'string' && (e = oa[e]), !e) return !1; var t = !1; try { r.isReadOnly() && (r.state.suppressEdits = !0), t = e(r, n) != K; } finally { r.state.suppressEdits = !1; } return t; }); }(t, i, n, o, e)) || (i == 1 ? n ? (function (e, t, r, n) { x ? setTimeout(E(Cn, e), 0) : e.curOp.focus = W(); var i; var o = (function (e, t, r) { var n = e.getOption('configureMouse'); var i = n ? n(e, t, r) : {}; if (i.unit == null) { var o = h ? r.shiftKey && r.metaKey : r.altKey; i.unit = o ? 'rectangle' : t == 'single' ? 'char' : t == 'double' ? 'word' : 'line'; }i.extend != null && !e.doc.extend || (i.extend = e.doc.extend || r.shiftKey); i.addNew == null && (i.addNew = w ? r.metaKey : r.ctrlKey); i.moveOnDrag == null && (i.moveOnDrag = !(w ? r.altKey : r.ctrlKey)); return i; }(e, r, n)); var a = e.doc.sel; e.options.dragDrop && Tt && !e.isReadOnly() && r == 'single' && (i = a.contains(t)) > -1 && (ve((i = a.ranges[i]).from(), t) < 0 || t.xRel > 0) && (ve(i.to(), t) > 0 || t.xRel < 0) ? (function (t, r, n, i) { var o = t.display; var a = !1; var l = ri(t, function (e) { b && (o.scroller.draggable = !1), t.state.draggingText = !1, dt(o.wrapper.ownerDocument, 'mouseup', l), dt(o.wrapper.ownerDocument, 'mousemove', s), dt(o.scroller, 'dragstart', c), dt(o.scroller, 'drop', l), a || (vt(e), i.addNew || Zi(t.doc, n, null, null, i.extend), b || x && k == 9 ? setTimeout(function () { o.wrapper.ownerDocument.body.focus(), o.input.focus(); }, 20) : o.input.focus()); }); var s = function (e) { a = a || Math.abs(r.clientX - e.clientX) + Math.abs(r.clientY - e.clientY) >= 10; }; var c = function () { return a = !0; }; b && (o.scroller.draggable = !0); (t.state.draggingText = l).copy = !i.moveOnDrag, o.scroller.dragDrop && o.scroller.dragDrop(); ct(o.wrapper.ownerDocument, 'mouseup', l), ct(o.wrapper.ownerDocument, 'mousemove', s), ct(o.scroller, 'dragstart', c), ct(o.scroller, 'drop', l), Sn(t), setTimeout(function () { return o.input.focus(); }, 20); }(e, n, t, o)) : (function (g, e, v, y) { var a = g.display; var b = g.doc; vt(e); var w; var x; var k = b.sel; var t = k.ranges; y.addNew && !y.extend ? (x = b.sel.contains(v), w = x > -1 ? t[x] : new Li(v, v)) : (w = b.sel.primary(), x = b.sel.primIndex); if (y.unit == 'rectangle')y.addNew || (w = new Li(v, v)), v = mn(g, e, !0, !0), x = -1; else { var r = xa(g, v, y.unit); w = y.extend ? Yi(w, r.anchor, r.head, y.extend) : r; }y.addNew ? x == -1 ? (x = t.length, ro(b, Mi(t.concat([w]), x), { scroll: !1, origin: '*mouse' })) : t.length > 1 && t[x].empty() && y.unit == 'char' && !y.extend ? (ro(b, Mi(t.slice(0, x).concat(t.slice(x + 1)), 0), { scroll: !1, origin: '*mouse' }), k = b.sel) : Ji(b, x, w, U) : (ro(b, new Ti([w], x = 0), U), k = b.sel); var C = v; function l (e) { if (ve(C, e) != 0) if (C = e, y.unit == 'rectangle') { for (var t = [], r = g.options.tabSize, n = F(se(b, v.line).text, v.ch, r), i = F(se(b, e.line).text, e.ch, r), o = Math.min(n, i), a = Math.max(n, i), l = Math.min(v.line, e.line), s = Math.min(g.lastLine(), Math.max(v.line, e.line)); l <= s; l++) { var c = se(b, l).text; var u = G(c, o, r); o == a ? t.push(new Li(ge(l, u), ge(l, u))) : c.length > u && t.push(new Li(ge(l, u), ge(l, G(c, a, r)))); }t.length || t.push(new Li(v, v)), ro(b, Mi(k.ranges.slice(0, x).concat(t), x), { origin: '*mouse', scroll: !1 }), g.scrollIntoView(e); } else { var d; var f = w; var h = xa(g, e, y.unit); var p = f.anchor; p = ve(h.anchor, p) > 0 ? (d = h.head, xe(f.from(), h.anchor)) : (d = h.anchor, we(f.to(), h.head)); var m = k.ranges.slice(0); m[x] = (function (e, t) { var r = t.anchor; var n = t.head; var i = se(e.doc, r.line); if (ve(r, n) == 0 && r.sticky == n.sticky) return t; var o = lt(i); if (!o) return t; var a = Ze(o, r.ch, r.sticky); var l = o[a]; if (l.from != r.ch && l.to != r.ch) return t; var s; var c = a + (l.from == r.ch == (l.level != 1) ? 0 : 1); if (c == 0 || c == o.length) return t; if (n.line != r.line)s = (n.line - r.line) * (e.doc.direction == 'ltr' ? 1 : -1) > 0; else { var u = Ze(o, n.ch, n.sticky); var d = u - a || (n.ch - r.ch) * (l.level == 1 ? -1 : 1); s = u == c - 1 || u == c ? d < 0 : d > 0; } var f = o[c + (s ? -1 : 0)]; var h = s == (f.level == 1); var p = h ? f.from : f.to; var m = h ? 'after' : 'before'; return r.ch == p && r.sticky == m ? t : new Li(new ge(r.line, p, m), n); }(g, new Li(Ce(b, p), d))), ro(b, Mi(m, x), U); } } var s = a.wrapper.getBoundingClientRect(); var c = 0; function n (e) { g.state.selectingText = !1, c = 1 / 0, vt(e), a.input.focus(), dt(a.wrapper.ownerDocument, 'mousemove', i), dt(a.wrapper.ownerDocument, 'mouseup', o), b.history.lastSelOrigin = null; } var i = ri(g, function (e) { e.buttons !== 0 && kt(e) ? (function e (t) { var r = ++c; var n = mn(g, t, !0, y.unit == 'rectangle'); if (n) if (ve(n, C) != 0) { g.curOp.focus = W(), l(n); var i = Nn(a, b); (n.line >= i.to || n.line < i.from) && setTimeout(ri(g, function () { c == r && e(t); }), 150); } else { var o = t.clientY < s.top ? -20 : t.clientY > s.bottom ? 20 : 0; o && setTimeout(ri(g, function () { c == r && (a.scroller.scrollTop += o, e(t)); }), 50); } }(e)) : n(e); }); var o = ri(g, n); g.state.selectingText = o, ct(a.wrapper.ownerDocument, 'mousemove', i), ct(a.wrapper.ownerDocument, 'mouseup', o); }(e, n, t, o)); }(t, n, o, e)) : xt(e) == r.scroller && vt(e) : i == 2 ? (n && Zi(t.doc, n), setTimeout(function () { return r.input.focus(); }, 20)) : i == 3 && (C ? Sa(t, e) : Sn(t))); } } function xa (e, t, r) { if (r == 'char') return new Li(t, t); if (r == 'word') return e.findWordAt(t); if (r == 'line') return new Li(ge(t.line, 0), Ce(e.doc, ge(t.line + 1, 0))); var n = r(e, t); return new Li(n.from, n.to); } function ka (e, t, r, n) { var i, o; if (t.touches)i = t.touches[0].clientX, o = t.touches[0].clientY; else try { i = t.clientX, o = t.clientY; } catch (t) { return !1; } if (i >= Math.floor(e.display.gutters.getBoundingClientRect().right)) return !1; n && vt(t); var a = e.display; var l = a.lineDiv.getBoundingClientRect(); if (o > l.bottom || !mt(e, r)) return bt(t); o -= l.top - a.viewOffset; for (var s = 0; s < e.options.gutters.length; ++s) { var c = a.gutters.childNodes[s]; if (c && c.getBoundingClientRect().right >= i) return ft(e, r, e, he(e.doc, o), e.options.gutters[s], t), bt(t); } } function Ca (e, t) { return ka(e, t, 'gutterClick', !0); } function Sa (e, t) { Nr(e.display, t) || (function (e, t) { return !!mt(e, 'gutterContextMenu') && ka(e, t, 'gutterContextMenu', !1); }(e, t)) || ht(e, t, 'contextmenu') || e.display.input.onContextMenu(t); } function Ta (e) { e.display.wrapper.className = e.display.wrapper.className.replace(/\s*cm-s-\S+/g, '') + e.options.theme.replace(/(^|\s)\s*/g, ' cm-s-'), _r(e); }ba.prototype.compare = function (e, t, r) { return this.time + 400 > e && ve(t, this.pos) == 0 && r == this.button; }; var La = { toString: function () { return 'CodeMirror.Init'; } }; var Ma = {}; var Aa = {}; function Na (e) { yi(e), oi(e), On(e); } function Oa (e, t, r) { if (!t != !(r && r != La)) { var n = e.display.dragFunctions; var i = t ? ct : dt; i(e.display.scroller, 'dragstart', n.start), i(e.display.scroller, 'dragenter', n.enter), i(e.display.scroller, 'dragover', n.over), i(e.display.scroller, 'dragleave', n.leave), i(e.display.scroller, 'drop', n.drop); } } function za (e) { e.options.lineWrapping ? (D(e.display.wrapper, 'CodeMirror-wrap'), e.display.sizer.style.minWidth = '', e.display.sizerWidth = null) : (L(e.display.wrapper, 'CodeMirror-wrap'), Xe(e)), pn(e), oi(e), _r(e), setTimeout(function () { return Un(e); }, 100); } function Wa (e, t) { var r = this; if (!(this instanceof Wa)) return new Wa(e, t); this.options = t = t ? I(t) : {}, I(Ma, t, !1), bi(t); var n = t.value; typeof n == 'string' && (n = new Ho(n, t.mode, null, t.lineSeparator, t.direction)), this.doc = n; var i = new Wa.inputStyles[t.inputStyle](this); var o = this.display = new le(e, n, i); for (var a in yi(o.wrapper.CodeMirror = this), Ta(this), t.lineWrapping && (this.display.wrapper.className += ' CodeMirror-wrap'), _n(this), this.state = { keyMaps: [], overlays: [], modeGen: 0, overwrite: !1, delayingBlurEvent: !1, focused: !1, suppressEdits: !1, pasteIncoming: !1, cutIncoming: !1, selectingText: !1, draggingText: !1, highlight: new R(), keySeq: null, specialChars: null }, t.autofocus && !f && o.input.focus(), x && k < 11 && setTimeout(function () { return r.display.input.reset(!0); }, 20), (function (i) { var o = i.display; ct(o.scroller, 'mousedown', ri(i, wa)), ct(o.scroller, 'dblclick', x && k < 11 ? ri(i, function (e) { if (!ht(i, e)) { var t = mn(i, e); if (t && !Ca(i, e) && !Nr(i.display, e)) { vt(e); var r = i.findWordAt(t); Zi(i.doc, r.anchor, r.head); } } }) : function (e) { return ht(i, e) || vt(e); }); C || ct(o.scroller, 'contextmenu', function (e) { return Sa(i, e); }); var r; var n = { end: 0 }; function a () { o.activeTouch && (r = setTimeout(function () { return o.activeTouch = null; }, 1e3), (n = o.activeTouch).end = +new Date()); } function l (e, t) { if (t.left == null) return !0; var r = t.left - e.left; var n = t.top - e.top; return r * r + n * n > 400; }ct(o.scroller, 'touchstart', function (e) { if (!ht(i, e) && !(function (e) { if (e.touches.length != 1) return !1; var t = e.touches[0]; return t.radiusX <= 1 && t.radiusY <= 1; }(e)) && !Ca(i, e)) { o.input.ensurePolled(), clearTimeout(r); var t = +new Date(); o.activeTouch = { start: t, moved: !1, prev: t - n.end <= 300 ? n : null }, e.touches.length == 1 && (o.activeTouch.left = e.touches[0].pageX, o.activeTouch.top = e.touches[0].pageY); } }), ct(o.scroller, 'touchmove', function () { o.activeTouch && (o.activeTouch.moved = !0); }), ct(o.scroller, 'touchend', function (e) { var t = o.activeTouch; if (t && !Nr(o, e) && t.left != null && !t.moved && new Date() - t.start < 300) { var r; var n = i.coordsChar(o.activeTouch, 'page'); r = !t.prev || l(t, t.prev) ? new Li(n, n) : !t.prev.prev || l(t, t.prev.prev) ? i.findWordAt(n) : new Li(ge(n.line, 0), Ce(i.doc, ge(n.line + 1, 0))), i.setSelection(r.anchor, r.head), i.focus(), vt(e); }a(); }), ct(o.scroller, 'touchcancel', a), ct(o.scroller, 'scroll', function () { o.scroller.clientHeight && (Fn(i, o.scroller.scrollTop), jn(i, o.scroller.scrollLeft, !0), ft(i, 'scroll', i)); }), ct(o.scroller, 'mousewheel', function (e) { return Si(i, e); }), ct(o.scroller, 'DOMMouseScroll', function (e) { return Si(i, e); }), ct(o.wrapper, 'scroll', function () { return o.wrapper.scrollTop = o.wrapper.scrollLeft = 0; }), o.dragFunctions = { enter: function (e) { ht(i, e) || wt(e); }, over: function (e) { ht(i, e) || ((function (e, t) { var r = mn(e, t); if (r) { var n = document.createDocumentFragment(); bn(e, r, n), e.display.dragCursor || (e.display.dragCursor = O('div', null, 'CodeMirror-cursors CodeMirror-dragcursors'), e.display.lineSpace.insertBefore(e.display.dragCursor, e.display.cursorDiv)), A(e.display.dragCursor, n); } }(i, e)), wt(e)); }, start: function (e) { return (function (e, t) { if (x && (!e.state.draggingText || +new Date() - Po < 100))wt(t); else if (!ht(e, t) && !Nr(e.display, t) && (t.dataTransfer.setData('Text', e.getSelection()), t.dataTransfer.effectAllowed = 'copyMove', t.dataTransfer.setDragImage && !s)) { var r = O('img', null, null, 'position: fixed; left: 0; top: 0;'); r.src = 'data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==', g && (r.width = r.height = 1, e.display.wrapper.appendChild(r), r._top = r.offsetTop), t.dataTransfer.setDragImage(r, 0, 0), g && r.parentNode.removeChild(r); } }(i, e)); }, drop: ri(i, Eo), leave: function (e) { ht(i, e) || Io(i); } }; var e = o.input.getField(); ct(e, 'keyup', function (e) { return ma.call(i, e); }), ct(e, 'keydown', ri(i, pa)), ct(e, 'keypress', ri(i, ga)), ct(e, 'focus', function (e) { return Tn(i, e); }), ct(e, 'blur', function (e) { return Ln(i, e); }); }(this)), jo(), Xn(this), this.curOp.forceUpdate = !0, Fi(this, n), t.autofocus && !f || this.hasFocus() ? setTimeout(E(Tn, this), 20) : Ln(this), Aa)Aa.hasOwnProperty(a) && Aa[a](r, t[a], La); zn(this), t.finishInit && t.finishInit(this); for (var l = 0; l < Da.length; ++l)Da[l](r); Yn(this), b && t.lineWrapping && getComputedStyle(o.lineDiv).textRendering == 'optimizelegibility' && (o.lineDiv.style.textRendering = 'auto'); }Wa.defaults = Ma, Wa.optionHandlers = Aa; var Da = []; function Ha (e, t, r, n) { var i; var o = e.doc; r == null && (r = 'add'), r == 'smart' && (o.mode.indent ? i = _t(e, t).state : r = 'prev'); var a = e.options.tabSize; var l = se(o, t); var s = F(l.text, null, a); l.stateAfter && (l.stateAfter = null); var c; var u = l.text.match(/^\s*/)[0]; if (n || /\S/.test(l.text)) { if (r == 'smart' && ((c = o.mode.indent(i, l.text.slice(u.length), l.text)) == K || c > 150)) { if (!n) return; r = 'prev'; } } else c = 0, r = 'not'; r == 'prev' ? c = t > o.first ? F(se(o, t - 1).text, null, a) : 0 : r == 'add' ? c = s + e.options.indentUnit : r == 'subtract' ? c = s - e.options.indentUnit : typeof r == 'number' && (c = s + r), c = Math.max(0, c); var d = ''; var f = 0; if (e.options.indentWithTabs) for (var h = Math.floor(c / a); h; --h)f += a, d += '\t'; if (f < c && (d += $(c - f)), d != u) return yo(o, d, ge(t, 0), ge(t, u.length), '+input'), !(l.stateAfter = null); for (var p = 0; p < o.sel.ranges.length; p++) { var m = o.sel.ranges[p]; if (m.head.line == t && m.head.ch < u.length) { var g = ge(t, u.length); Ji(o, p, new Li(g, g)); break; } } }Wa.defineInitHook = function (e) { return Da.push(e); }; var Pa = null; function Ea (e) { Pa = e; } function Ia (e, t, r, n, i) { var o = e.doc; e.display.shift = !1, n = n || o.sel; var a; var l = e.state.pasteIncoming || i == 'paste'; var s = Nt(t); var c = null; if (l && n.ranges.length > 1) if (Pa && Pa.text.join('\n') == t) { if (n.ranges.length % Pa.text.length == 0) { c = []; for (var u = 0; u < Pa.text.length; u++)c.push(o.splitLines(Pa.text[u])); } } else s.length == n.ranges.length && e.options.pasteLinesPerSelection && (c = Y(s, function (e) { return [e]; })); for (var d = n.ranges.length - 1; d >= 0; d--) { var f = n.ranges[d]; var h = f.from(); var p = f.to(); f.empty() && (r && r > 0 ? h = ge(h.line, h.ch - r) : e.state.overwrite && !l ? p = ge(p.line, Math.min(se(o, p.line).text.length, p.ch + X(s).length)) : Pa && Pa.lineWise && Pa.text.join('\n') == t && (h = p = ge(h.line, 0))), a = e.curOp.updateInput; var m = { from: h, to: p, text: c ? c[d % c.length] : s, origin: i || (l ? 'paste' : e.state.cutIncoming ? 'cut' : '+input') }; ho(e.doc, m), gr(e, 'inputRead', e, m); }t && !l && Ra(e, t), Hn(e), e.curOp.updateInput = a, e.curOp.typing = !0, e.state.pasteIncoming = e.state.cutIncoming = !1; } function Fa (e, t) { var r = e.clipboardData && e.clipboardData.getData('Text'); if (r) return e.preventDefault(), t.isReadOnly() || t.options.disableInput || ti(t, function () { return Ia(t, r, 0, null, 'paste'); }), !0; } function Ra (e, t) { if (e.options.electricChars && e.options.smartIndent) for (var r = e.doc.sel, n = r.ranges.length - 1; n >= 0; n--) { var i = r.ranges[n]; if (!(i.head.ch > 100 || n && r.ranges[n - 1].head.line == i.head.line)) { var o = e.getModeAt(i.head); var a = !1; if (o.electricChars) { for (var l = 0; l < o.electricChars.length; l++) if (t.indexOf(o.electricChars.charAt(l)) > -1) { a = Ha(e, i.head.line, 'smart'); break; } } else o.electricInput && o.electricInput.test(se(e.doc, i.head.line).text.slice(0, i.head.ch)) && (a = Ha(e, i.head.line, 'smart')); a && gr(e, 'electricInput', e, i.head.line); } } } function ja (e) { for (var t = [], r = [], n = 0; n < e.doc.sel.ranges.length; n++) { var i = e.doc.sel.ranges[n].head.line; var o = { anchor: ge(i, 0), head: ge(i + 1, 0) }; r.push(o), t.push(e.getRange(o.anchor, o.head)); } return { text: t, ranges: r }; } function Ba (e, t) { e.setAttribute('autocorrect', 'off'), e.setAttribute('autocapitalize', 'off'), e.setAttribute('spellcheck', !!t); } function Ka () { var e = O('textarea', null, null, 'position: absolute; bottom: -1em; padding: 0; width: 1px; height: 1em; outline: none'); var t = O('div', [e], null, 'overflow: hidden; position: relative; width: 3px; height: 0px;'); return b ? e.style.width = '1000px' : e.setAttribute('wrap', 'off'), u && (e.style.border = '1px solid black'), Ba(e), t; } function qa (r, n, i, e, o) { var t = n; var a = i; var l = se(r, n.line); function s (e) { var t; if ((t = o ? ia(r.cm, l, n, i) : ra(l, n, i)) == null) { if (e || !(function () { var e = n.line + i; return !(e < r.first || e >= r.first + r.size) && (n = new ge(e, n.ch, n.sticky), l = se(r, e)); }())) return !1; n = na(o, r.cm, l, n.line, i); } else n = t; return !0; } if (e == 'char')s(); else if (e == 'column')s(!0); else if (e == 'word' || e == 'group') for (var c = null, u = e == 'group', d = r.cm && r.cm.getHelper(n, 'wordChars'), f = !0; !(i < 0) || s(!f); f = !1) { var h = l.text.charAt(n.ch) || '\n'; var p = te(h, d) ? 'w' : u && h == '\n' ? 'n' : !u || /\s/.test(h) ? null : 'p'; if (!u || f || p || (p = 's'), c && c != p) { i < 0 && (i = 1, s(), n.sticky = 'after'); break; } if (p && (c = p), i > 0 && !s(!f)) break; } var m = so(r, n, t, a, !0); return ye(t, m) && (m.hitSide = !0), m; } function Ua (e, t, r, n) { var i; var o; var a = e.doc; var l = t.left; if (n == 'page') { var s = Math.min(e.display.wrapper.clientHeight, window.innerHeight || document.documentElement.clientHeight); var c = Math.max(s - 0.5 * cn(e.display), 3); i = (r > 0 ? t.bottom : t.top) + r * c; } else n == 'line' && (i = r > 0 ? t.bottom + 3 : t.top - 3); for (;(o = nn(e, l, i)).outside;) { if (r < 0 ? i <= 0 : i >= a.height) { o.hitSide = !0; break; }i += 5 * r; } return o; } function Va (e) { this.cm = e, this.lastAnchorNode = this.lastAnchorOffset = this.lastFocusNode = this.lastFocusOffset = null, this.polling = new R(), this.composing = null, this.gracePeriod = !1, this.readDOMTimeout = null; } function Ga (e, t) { var r = Fr(e, t.line); if (!r || r.hidden) return null; var n = se(e.doc, t.line); var i = Er(r, n, t.line); var o = lt(n, e.doc.direction); var a = 'left'; o && (a = Ze(o, t.ch) % 2 ? 'right' : 'left'); var l = qr(i.map, t.ch, a); return l.offset = l.collapse == 'right' ? l.end : l.start, l; } function _a (e, t) { return t && (e.bad = !0), e; } function $a (e, t, r) { var n; if (t == e.display.lineDiv) { if (!(n = e.display.lineDiv.childNodes[r])) return _a(e.clipPos(ge(e.display.viewTo - 1)), !0); t = null, r = 0; } else for (n = t; ;n = n.parentNode) { if (!n || n == e.display.lineDiv) return null; if (n.parentNode && n.parentNode == e.display.lineDiv) break; } for (var i = 0; i < e.display.view.length; i++) { var o = e.display.view[i]; if (o.node == n) return Xa(o, t, r); } } function Xa (c, e, t) { var r = c.text.firstChild; var n = !1; if (!e || !z(r, e)) return _a(ge(fe(c.line), 0), !0); if (e == r && (n = !0, e = r.childNodes[t], t = 0, !e)) { var i = c.rest ? X(c.rest) : c.line; return _a(ge(fe(i), i.text.length), n); } var o = e.nodeType == 3 ? e : null; var a = e; for (o || e.childNodes.length != 1 || e.firstChild.nodeType != 3 || (o = e.firstChild, t = t && o.nodeValue.length); a.parentNode != r;)a = a.parentNode; var u = c.measure; var d = u.maps; function l (e, t, r) { for (var n = -1; n < (d ? d.length : 0); n++) for (var i = n < 0 ? u.map : d[n], o = 0; o < i.length; o += 3) { var a = i[o + 2]; if (a == e || a == t) { var l = fe(n < 0 ? c.line : c.rest[n]); var s = i[o] + r; return (r < 0 || a != e) && (s = i[o + (r ? 1 : 0)]), ge(l, s); } } } var s = l(o, a, t); if (s) return _a(s, n); for (var f = a.nextSibling, h = o ? o.nodeValue.length - t : 0; f; f = f.nextSibling) { if (s = l(f, f.firstChild, 0)) return _a(ge(s.line, s.ch - h), n); h += f.textContent.length; } for (var p = a.previousSibling, m = t; p; p = p.previousSibling) { if (s = l(p, p.firstChild, -1)) return _a(ge(s.line, s.ch + m), n); m += p.textContent.length; } }Va.prototype.init = function (e) { var t = this; var a = this; var l = a.cm; var s = a.div = e.lineDiv; function r (e) { if (!ht(l, e)) { if (l.somethingSelected())Ea({ lineWise: !1, text: l.getSelections() }), e.type == 'cut' && l.replaceSelection('', null, 'cut'); else { if (!l.options.lineWiseCopyCut) return; var t = ja(l); Ea({ lineWise: !0, text: t.text }), e.type == 'cut' && l.operation(function () { l.setSelections(t.ranges, 0, q), l.replaceSelection('', null, 'cut'); }); } if (e.clipboardData) { e.clipboardData.clearData(); var r = Pa.text.join('\n'); if (e.clipboardData.setData('Text', r), e.clipboardData.getData('Text') == r) return void e.preventDefault(); } var n = Ka(); var i = n.firstChild; l.display.lineSpace.insertBefore(n, l.display.lineSpace.firstChild), i.value = Pa.text.join('\n'); var o = document.activeElement; P(i), setTimeout(function () { l.display.lineSpace.removeChild(n), o.focus(), o == s && a.showPrimarySelection(); }, 50); } }Ba(s, l.options.spellcheck), ct(s, 'paste', function (e) { ht(l, e) || Fa(e, l) || k <= 11 && setTimeout(ri(l, function () { return t.updateFromDOM(); }), 20); }), ct(s, 'compositionstart', function (e) { t.composing = { data: e.data, done: !1 }; }), ct(s, 'compositionupdate', function (e) { t.composing || (t.composing = { data: e.data, done: !1 }); }), ct(s, 'compositionend', function (e) { t.composing && (e.data != t.composing.data && t.readFromDOMSoon(), t.composing.done = !0); }), ct(s, 'touchstart', function () { return a.forceCompositionEnd(); }), ct(s, 'input', function () { t.composing || t.readFromDOMSoon(); }), ct(s, 'copy', r), ct(s, 'cut', r); }, Va.prototype.prepareSelection = function () { var e = yn(this.cm, !1); return e.focus = this.cm.state.focused, e; }, Va.prototype.showSelection = function (e, t) { e && this.cm.display.view.length && ((e.focus || t) && this.showPrimarySelection(), this.showMultipleSelections(e)); }, Va.prototype.getSelection = function () { return this.cm.display.wrapper.ownerDocument.getSelection(); }, Va.prototype.showPrimarySelection = function () { var e = this.getSelection(); var t = this.cm; var r = t.doc.sel.primary(); var n = r.from(); var i = r.to(); if (t.display.viewTo == t.display.viewFrom || n.line >= t.display.viewTo || i.line < t.display.viewFrom)e.removeAllRanges(); else { var o = $a(t, e.anchorNode, e.anchorOffset); var a = $a(t, e.focusNode, e.focusOffset); if (!o || o.bad || !a || a.bad || ve(xe(o, a), n) != 0 || ve(we(o, a), i) != 0) { var l = t.display.view; var s = n.line >= t.display.viewFrom && Ga(t, n) || { node: l[0].measure.map[2], offset: 0 }; var c = i.line < t.display.viewTo && Ga(t, i); if (!c) { var u = l[l.length - 1].measure; var d = u.maps ? u.maps[u.maps.length - 1] : u.map; c = { node: d[d.length - 1], offset: d[d.length - 2] - d[d.length - 3] }; } if (s && c) { var f; var h = e.rangeCount && e.getRangeAt(0); try { f = T(s.node, s.offset, c.offset, c.node); } catch (e) {}f && (!m && t.state.focused ? (e.collapse(s.node, s.offset), f.collapsed || (e.removeAllRanges(), e.addRange(f))) : (e.removeAllRanges(), e.addRange(f)), h && e.anchorNode == null ? e.addRange(h) : m && this.startGracePeriod()), this.rememberSelection(); } else e.removeAllRanges(); } } }, Va.prototype.startGracePeriod = function () { var e = this; clearTimeout(this.gracePeriod), this.gracePeriod = setTimeout(function () { e.gracePeriod = !1, e.selectionChanged() && e.cm.operation(function () { return e.cm.curOp.selectionChanged = !0; }); }, 20); }, Va.prototype.showMultipleSelections = function (e) { A(this.cm.display.cursorDiv, e.cursors), A(this.cm.display.selectionDiv, e.selection); }, Va.prototype.rememberSelection = function () { var e = this.getSelection(); this.lastAnchorNode = e.anchorNode, this.lastAnchorOffset = e.anchorOffset, this.lastFocusNode = e.focusNode, this.lastFocusOffset = e.focusOffset; }, Va.prototype.selectionInEditor = function () { var e = this.getSelection(); if (!e.rangeCount) return !1; var t = e.getRangeAt(0).commonAncestorContainer; return z(this.div, t); }, Va.prototype.focus = function () { this.cm.options.readOnly != 'nocursor' && (this.selectionInEditor() || this.showSelection(this.prepareSelection(), !0), this.div.focus()); }, Va.prototype.blur = function () { this.div.blur(); }, Va.prototype.getField = function () { return this.div; }, Va.prototype.supportsTouch = function () { return !0; }, Va.prototype.receivedFocus = function () { var t = this; this.selectionInEditor() ? this.pollSelection() : ti(this.cm, function () { return t.cm.curOp.selectionChanged = !0; }), this.polling.set(this.cm.options.pollInterval, function e () { t.cm.state.focused && (t.pollSelection(), t.polling.set(t.cm.options.pollInterval, e)); }); }, Va.prototype.selectionChanged = function () { var e = this.getSelection(); return e.anchorNode != this.lastAnchorNode || e.anchorOffset != this.lastAnchorOffset || e.focusNode != this.lastFocusNode || e.focusOffset != this.lastFocusOffset; }, Va.prototype.pollSelection = function () { if (this.readDOMTimeout == null && !this.gracePeriod && this.selectionChanged()) { var e = this.getSelection(); var t = this.cm; if (d && a && this.cm.options.gutters.length && (function (e) { for (var t = e; t; t = t.parentNode) if (/CodeMirror-gutter-wrapper/.test(t.className)) return !0; return !1; }(e.anchorNode))) return this.cm.triggerOnKeyDown({ type: 'keydown', keyCode: 8, preventDefault: Math.abs }), this.blur(), void this.focus(); if (!this.composing) { this.rememberSelection(); var r = $a(t, e.anchorNode, e.anchorOffset); var n = $a(t, e.focusNode, e.focusOffset); r && n && ti(t, function () { ro(t.doc, Ai(r, n), q), (r.bad || n.bad) && (t.curOp.selectionChanged = !0); }); } } }, Va.prototype.pollContent = function () { this.readDOMTimeout != null && (clearTimeout(this.readDOMTimeout), this.readDOMTimeout = null); var e; var t; var r; var n = this.cm; var i = n.display; var o = n.doc.sel.primary(); var a = o.from(); var l = o.to(); if (a.ch == 0 && a.line > n.firstLine() && (a = ge(a.line - 1, se(n.doc, a.line - 1).length)), l.ch == se(n.doc, l.line).text.length && l.line < n.lastLine() && (l = ge(l.line + 1, 0)), a.line < i.viewFrom || l.line > i.viewTo - 1) return !1; r = a.line == i.viewFrom || (e = gn(n, a.line)) == 0 ? (t = fe(i.view[0].line), i.view[0].node) : (t = fe(i.view[e].line), i.view[e - 1].node.nextSibling); var s; var c; var u = gn(n, l.line); if (c = u == i.view.length - 1 ? (s = i.viewTo - 1, i.lineDiv.lastChild) : (s = fe(i.view[u + 1].line) - 1, i.view[u + 1].node.previousSibling), !r) return !1; for (var d = n.doc.splitLines(function (l, e, t, s, c) { var r = ''; var u = !1; var d = l.doc.lineSeparator(); var f = !1; function h () { u && (r += d, f && (r += d), u = f = !1); } function p (e) { e && (h(), r += e); } function m (e) { if (e.nodeType == 1) { var t = e.getAttribute('cm-text'); if (t) return void p(t); var r; var n = e.getAttribute('cm-marker'); if (n) { var i = l.findMarks(ge(s, 0), ge(c + 1, 0), (function (t) { return function (e) { return e.id == t; }; }(+n))); return void (i.length && (r = i[0].find(0)) && p(ce(l.doc, r.from, r.to).join(d))); } if (e.getAttribute('contenteditable') == 'false') return; var o = /^(pre|div|p|li|table|br)$/i.test(e.nodeName); if (!/^br$/i.test(e.nodeName) && e.textContent.length == 0) return; o && h(); for (var a = 0; a < e.childNodes.length; a++)m(e.childNodes[a]); /^(pre|p)$/i.test(e.nodeName) && (f = !0), o && (u = !0); } else e.nodeType == 3 && p(e.nodeValue.replace(/\u200b/g, '').replace(/\u00a0/g, ' ')); } for (;m(e), e != t;)e = e.nextSibling, f = !1; return r; }(n, r, c, t, s)), f = ce(n.doc, ge(t, 0), ge(s, se(n.doc, s).text.length)); d.length > 1 && f.length > 1;) if (X(d) == X(f))d.pop(), f.pop(), s--; else { if (d[0] != f[0]) break; d.shift(), f.shift(), t++; } for (var h = 0, p = 0, m = d[0], g = f[0], v = Math.min(m.length, g.length); h < v && m.charCodeAt(h) == g.charCodeAt(h);)++h; for (var y = X(d), b = X(f), w = Math.min(y.length - (d.length == 1 ? h : 0), b.length - (f.length == 1 ? h : 0)); p < w && y.charCodeAt(y.length - p - 1) == b.charCodeAt(b.length - p - 1);)++p; if (d.length == 1 && f.length == 1 && t == a.line) for (;h && h > a.ch && y.charCodeAt(y.length - p - 1) == b.charCodeAt(b.length - p - 1);)h--, p++; d[d.length - 1] = y.slice(0, y.length - p).replace(/^\u200b+/, ''), d[0] = d[0].slice(h).replace(/\u200b+$/, ''); var x = ge(t, h); var k = ge(s, f.length ? X(f).length - p : 0); return d.length > 1 || d[0] || ve(x, k) ? (yo(n.doc, d, x, k, '+input'), !0) : void 0; }, Va.prototype.ensurePolled = function () { this.forceCompositionEnd(); }, Va.prototype.reset = function () { this.forceCompositionEnd(); }, Va.prototype.forceCompositionEnd = function () { this.composing && (clearTimeout(this.readDOMTimeout), this.composing = null, this.updateFromDOM(), this.div.blur(), this.div.focus()); }, Va.prototype.readFromDOMSoon = function () { var e = this; this.readDOMTimeout == null && (this.readDOMTimeout = setTimeout(function () { if (e.readDOMTimeout = null, e.composing) { if (!e.composing.done) return; e.composing = null; }e.updateFromDOM(); }, 80)); }, Va.prototype.updateFromDOM = function () { var e = this; !this.cm.isReadOnly() && this.pollContent() || ti(this.cm, function () { return oi(e.cm); }); }, Va.prototype.setUneditable = function (e) { e.contentEditable = 'false'; }, Va.prototype.onKeyPress = function (e) { e.charCode == 0 || this.composing || (e.preventDefault(), this.cm.isReadOnly() || ri(this.cm, Ia)(this.cm, String.fromCharCode(e.charCode == null ? e.keyCode : e.charCode), 0)); }, Va.prototype.readOnlyChanged = function (e) { this.div.contentEditable = String(e != 'nocursor'); }, Va.prototype.onContextMenu = function () {}, Va.prototype.resetPosition = function () {}, Va.prototype.needsContentAttribute = !0; function Ya (e) { this.cm = e, this.prevInput = '', this.pollingFast = !1, this.polling = new R(), this.hasSelection = !1, this.composing = null; } var Za, Qa, Ja, el, tl; function rl (e, t, n, r) { Za.defaults[e] = t, n && (Qa[e] = r ? function (e, t, r) { r != La && n(e, t, r); } : n); }Ya.prototype.init = function (t) { var e = this; var r = this; var n = this.cm; this.createField(t); var i = this.textarea; function o (e) { if (!ht(n, e)) { if (n.somethingSelected())Ea({ lineWise: !1, text: n.getSelections() }); else { if (!n.options.lineWiseCopyCut) return; var t = ja(n); Ea({ lineWise: !0, text: t.text }), e.type == 'cut' ? n.setSelections(t.ranges, null, q) : (r.prevInput = '', i.value = t.text.join('\n'), P(i)); }e.type == 'cut' && (n.state.cutIncoming = !0); } }t.wrapper.insertBefore(this.wrapper, t.wrapper.firstChild), u && (i.style.width = '0px'), ct(i, 'input', function () { x && k >= 9 && e.hasSelection && (e.hasSelection = null), r.poll(); }), ct(i, 'paste', function (e) { ht(n, e) || Fa(e, n) || (n.state.pasteIncoming = !0, r.fastPoll()); }), ct(i, 'cut', o), ct(i, 'copy', o), ct(t.scroller, 'paste', function (e) { Nr(t, e) || ht(n, e) || (n.state.pasteIncoming = !0, r.focus()); }), ct(t.lineSpace, 'selectstart', function (e) { Nr(t, e) || vt(e); }), ct(i, 'compositionstart', function () { var e = n.getCursor('from'); r.composing && r.composing.range.clear(), r.composing = { start: e, range: n.markText(e, n.getCursor('to'), { className: 'CodeMirror-composing' }) }; }), ct(i, 'compositionend', function () { r.composing && (r.poll(), r.composing.range.clear(), r.composing = null); }); }, Ya.prototype.createField = function (e) { this.wrapper = Ka(), this.textarea = this.wrapper.firstChild; }, Ya.prototype.prepareSelection = function () { var e = this.cm; var t = e.display; var r = e.doc; var n = yn(e); if (e.options.moveInputWithCursor) { var i = en(e, r.sel.primary().head, 'div'); var o = t.wrapper.getBoundingClientRect(); var a = t.lineDiv.getBoundingClientRect(); n.teTop = Math.max(0, Math.min(t.wrapper.clientHeight - 10, i.top + a.top - o.top)), n.teLeft = Math.max(0, Math.min(t.wrapper.clientWidth - 10, i.left + a.left - o.left)); } return n; }, Ya.prototype.showSelection = function (e) { var t = this.cm.display; A(t.cursorDiv, e.cursors), A(t.selectionDiv, e.selection), e.teTop != null && (this.wrapper.style.top = e.teTop + 'px', this.wrapper.style.left = e.teLeft + 'px'); }, Ya.prototype.reset = function (e) { if (!this.contextMenuPending && !this.composing) { var t = this.cm; if (t.somethingSelected()) { this.prevInput = ''; var r = t.getSelection(); this.textarea.value = r, t.state.focused && P(this.textarea), x && k >= 9 && (this.hasSelection = r); } else e || (this.prevInput = this.textarea.value = '', x && k >= 9 && (this.hasSelection = null)); } }, Ya.prototype.getField = function () { return this.textarea; }, Ya.prototype.supportsTouch = function () { return !1; }, Ya.prototype.focus = function () { if (this.cm.options.readOnly != 'nocursor' && (!f || W() != this.textarea)) try { this.textarea.focus(); } catch (e) {} }, Ya.prototype.blur = function () { this.textarea.blur(); }, Ya.prototype.resetPosition = function () { this.wrapper.style.top = this.wrapper.style.left = 0; }, Ya.prototype.receivedFocus = function () { this.slowPoll(); }, Ya.prototype.slowPoll = function () { var e = this; this.pollingFast || this.polling.set(this.cm.options.pollInterval, function () { e.poll(), e.cm.state.focused && e.slowPoll(); }); }, Ya.prototype.fastPoll = function () { var t = !1; var r = this; r.pollingFast = !0, r.polling.set(20, function e () { r.poll() || t ? (r.pollingFast = !1, r.slowPoll()) : (t = !0, r.polling.set(60, e)); }); }, Ya.prototype.poll = function () { var e = this; var t = this.cm; var r = this.textarea; var n = this.prevInput; if (this.contextMenuPending || !t.state.focused || Ot(r) && !n && !this.composing || t.isReadOnly() || t.options.disableInput || t.state.keySeq) return !1; var i = r.value; if (i == n && !t.somethingSelected()) return !1; if (x && k >= 9 && this.hasSelection === i || w && /[\uf700-\uf7ff]/.test(i)) return t.display.input.reset(), !1; if (t.doc.sel == t.display.selForContextMenu) { var o = i.charCodeAt(0); if (o != 8203 || n || (n = '​'), o == 8666) return this.reset(), this.cm.execCommand('undo'); } for (var a = 0, l = Math.min(n.length, i.length); a < l && n.charCodeAt(a) == i.charCodeAt(a);)++a; return ti(t, function () { Ia(t, i.slice(a), n.length - a, null, e.composing ? '*compose' : null), i.length > 1e3 || i.indexOf('\n') > -1 ? r.value = e.prevInput = '' : e.prevInput = i, e.composing && (e.composing.range.clear(), e.composing.range = t.markText(e.composing.start, t.getCursor('to'), { className: 'CodeMirror-composing' })); }), !0; }, Ya.prototype.ensurePolled = function () { this.pollingFast && this.poll() && (this.pollingFast = !1); }, Ya.prototype.onKeyPress = function () { x && k >= 9 && (this.hasSelection = null), this.fastPoll(); }, Ya.prototype.onContextMenu = function (e) { var r = this; var n = r.cm; var i = n.display; var o = r.textarea; var t = mn(n, e); var a = i.scroller.scrollTop; if (t && !g) { n.options.resetSelectionOnContextMenu && n.doc.sel.contains(t) == -1 && ri(n, ro)(n.doc, Ai(t), q); var l = o.style.cssText; var s = r.wrapper.style.cssText; r.wrapper.style.cssText = 'position: absolute'; var c; var u = r.wrapper.getBoundingClientRect(); if (o.style.cssText = 'position: absolute; width: 30px; height: 30px;\n      top: ' + (e.clientY - u.top - 5) + 'px; left: ' + (e.clientX - u.left - 5) + 'px;\n      z-index: 1000; background: ' + (x ? 'rgba(255, 255, 255, .05)' : 'transparent') + ';\n      outline: none; border-width: 0; outline: none; overflow: hidden; opacity: .05; filter: alpha(opacity=5);', b && (c = window.scrollY), i.input.focus(), b && window.scrollTo(null, c), i.input.reset(), n.somethingSelected() || (o.value = r.prevInput = ' '), r.contextMenuPending = !0, i.selForContextMenu = n.doc.sel, clearTimeout(i.detectingSelectAll), x && k >= 9 && f(), C) { wt(e); var d = function () { dt(window, 'mouseup', d), setTimeout(h, 20); }; ct(window, 'mouseup', d); } else setTimeout(h, 50); } function f () { if (o.selectionStart != null) { var e = n.somethingSelected(); var t = '​' + (e ? o.value : ''); o.value = '⇚', o.value = t, r.prevInput = e ? '' : '​', o.selectionStart = 1, o.selectionEnd = t.length, i.selForContextMenu = n.doc.sel; } } function h () { if (r.contextMenuPending = !1, r.wrapper.style.cssText = s, o.style.cssText = l, x && k < 9 && i.scrollbars.setScrollTop(i.scroller.scrollTop = a), o.selectionStart != null) { (!x || x && k < 9) && f(); var e = 0; var t = function () { i.selForContextMenu == n.doc.sel && o.selectionStart == 0 && o.selectionEnd > 0 && r.prevInput == '​' ? ri(n, uo)(n) : e++ < 10 ? i.detectingSelectAll = setTimeout(t, 500) : (i.selForContextMenu = null, i.input.reset()); }; i.detectingSelectAll = setTimeout(t, 200); } } }, Ya.prototype.readOnlyChanged = function (e) { e || this.reset(), this.textarea.disabled = e == 'nocursor'; }, Ya.prototype.setUneditable = function () {}, Ya.prototype.needsContentAttribute = !1, Qa = (Za = Wa).optionHandlers, Za.defineOption = rl, Za.Init = La, rl('value', '', function (e, t) { return e.setValue(t); }, !0), rl('mode', null, function (e, t) { e.doc.modeOption = t, Di(e); }, !0), rl('indentUnit', 2, Di, !0), rl('indentWithTabs', !1), rl('smartIndent', !0), rl('tabSize', 4, function (e) { Hi(e), _r(e), oi(e); }, !0), rl('lineSeparator', null, function (e, n) { if (e.doc.lineSep = n) { var i = []; var o = e.doc.first; e.doc.iter(function (e) { for (var t = 0; ;) { var r = e.text.indexOf(n, t); if (r == -1) break; t = r + n.length, i.push(ge(o, r)); }o++; }); for (var t = i.length - 1; t >= 0; t--)yo(e.doc, n, i[t], ge(i[t].line, i[t].ch + n.length)); } }), rl('specialChars', /[\u0000-\u001f\u007f-\u009f\u00ad\u061c\u200b-\u200f\u2028\u2029\ufeff]/g, function (e, t, r) { e.state.specialChars = new RegExp(t.source + (t.test('\t') ? '' : '|\t'), 'g'), r != La && e.refresh(); }), rl('specialCharPlaceholder', ar, function (e) { return e.refresh(); }, !0), rl('electricChars', !0), rl('inputStyle', f ? 'contenteditable' : 'textarea', function () { throw new Error('inputStyle can not (yet) be changed in a running editor'); }, !0), rl('spellcheck', !1, function (e, t) { return e.getInputField().spellcheck = t; }, !0), rl('rtlMoveVisually', !p), rl('wholeLineUpdateBefore', !0), rl('theme', 'default', function (e) { Ta(e), Na(e); }, !0), rl('keyMap', 'default', function (e, t, r) { var n = Jo(t); var i = r != La && Jo(r); i && i.detach && i.detach(e, n), n.attach && n.attach(e, i || null); }), rl('extraKeys', null), rl('configureMouse', null), rl('lineWrapping', !1, za, !0), rl('gutters', [], function (e) { bi(e.options), Na(e); }, !0), rl('fixedGutter', !0, function (e, t) { e.display.gutters.style.left = t ? fn(e.display) + 'px' : '0', e.refresh(); }, !0), rl('coverGutterNextToScrollbar', !1, function (e) { return Un(e); }, !0), rl('scrollbarStyle', 'native', function (e) { _n(e), Un(e), e.display.scrollbars.setScrollTop(e.doc.scrollTop), e.display.scrollbars.setScrollLeft(e.doc.scrollLeft); }, !0), rl('lineNumbers', !1, function (e) { bi(e.options), Na(e); }, !0), rl('firstLineNumber', 1, Na, !0), rl('lineNumberFormatter', function (e) { return e; }, Na, !0), rl('showCursorWhenSelecting', !1, vn, !0), rl('resetSelectionOnContextMenu', !0), rl('lineWiseCopyCut', !0), rl('pasteLinesPerSelection', !0), rl('readOnly', !1, function (e, t) { t == 'nocursor' && (Ln(e), e.display.input.blur()), e.display.input.readOnlyChanged(t); }), rl('disableInput', !1, function (e, t) { t || e.display.input.reset(); }, !0), rl('dragDrop', !0, Oa), rl('allowDropFileTypes', null), rl('cursorBlinkRate', 530), rl('cursorScrollMargin', 0), rl('cursorHeight', 1, vn, !0), rl('singleCursorHeightPerLine', !0, vn, !0), rl('workTime', 100), rl('workDelay', 100), rl('flattenSpans', !0, Hi, !0), rl('addModeClass', !1, Hi, !0), rl('pollInterval', 100), rl('undoDepth', 200, function (e, t) { return e.doc.history.undoDepth = t; }), rl('historyEventDelay', 1250), rl('viewportMargin', 10, function (e) { return e.refresh(); }, !0), rl('maxHighlightLength', 1e4, Hi, !0), rl('moveInputWithCursor', !0, function (e, t) { t || e.display.input.resetPosition(); }), rl('tabindex', null, function (e, t) { return e.display.input.getField().tabIndex = t || ''; }), rl('autofocus', null), rl('direction', 'ltr', function (e, t) { return e.doc.setDirection(t); }, !0), el = (Ja = Wa).optionHandlers, tl = Ja.helpers = {}, Ja.prototype = { constructor: Ja, focus: function () { window.focus(), this.display.input.focus(); }, setOption: function (e, t) { var r = this.options; var n = r[e]; r[e] == t && e != 'mode' || (r[e] = t, el.hasOwnProperty(e) && ri(this, el[e])(this, t, n), ft(this, 'optionChange', this, e)); }, getOption: function (e) { return this.options[e]; }, getDoc: function () { return this.doc; }, addKeyMap: function (e, t) { this.state.keyMaps[t ? 'push' : 'unshift'](Jo(e)); }, removeKeyMap: function (e) { for (var t = this.state.keyMaps, r = 0; r < t.length; ++r) if (t[r] == e || t[r].name == e) return t.splice(r, 1), !0; }, addOverlay: ni(function (e, t) { var r = e.token ? e : Ja.getMode(this.options, e); if (r.startState) throw new Error('Overlays may not be stateful.'); !(function (e, t, r) { for (var n = 0, i = r(t); n < e.length && r(e[n]) <= i;)n++; e.splice(n, 0, t); }(this.state.overlays, { mode: r, modeSpec: e, opaque: t && t.opaque, priority: t && t.priority || 0 }, function (e) { return e.priority; })), this.state.modeGen++, oi(this); }), removeOverlay: ni(function (e) { for (var t = this.state.overlays, r = 0; r < t.length; ++r) { var n = t[r].modeSpec; if (n == e || typeof e == 'string' && n.name == e) return t.splice(r, 1), this.state.modeGen++, void oi(this); } }), indentLine: ni(function (e, t, r) { typeof t != 'string' && typeof t != 'number' && (t = t == null ? this.options.smartIndent ? 'smart' : 'prev' : t ? 'add' : 'subtract'), pe(this.doc, e) && Ha(this, e, t, r); }), indentSelection: ni(function (e) { for (var t = this, r = this.doc.sel.ranges, n = -1, i = 0; i < r.length; i++) { var o = r[i]; if (o.empty())o.head.line > n && (Ha(t, o.head.line, e, !0), n = o.head.line, i == t.doc.sel.primIndex && Hn(t)); else { var a = o.from(); var l = o.to(); var s = Math.max(n, a.line); n = Math.min(t.lastLine(), l.line - (l.ch ? 0 : 1)) + 1; for (var c = s; c < n; ++c)Ha(t, c, e); var u = t.doc.sel.ranges; a.ch == 0 && r.length == u.length && u[i].from().ch > 0 && Ji(t.doc, i, new Li(a, u[i].to()), q); } } }), getTokenAt: function (e, t) { return Qt(this, e, t); }, getLineTokens: function (e, t) { return Qt(this, ge(e), t, !0); }, getTokenTypeAt: function (e) { e = Ce(this.doc, e); var t; var r = Gt(this, se(this.doc, e.line)); var n = 0; var i = (r.length - 1) / 2; var o = e.ch; if (o == 0)t = r[2]; else for (;;) { var a = n + i >> 1; if ((a ? r[2 * a - 1] : 0) >= o)i = a; else { if (!(r[2 * a + 1] < o)) { t = r[2 * a + 2]; break; }n = 1 + a; } } var l = t ? t.indexOf('overlay ') : -1; return l < 0 ? t : l == 0 ? null : t.slice(0, l - 1); }, getModeAt: function (e) { var t = this.doc.mode; return t.innerMode ? Ja.innerMode(t, this.getTokenAt(e).state).mode : t; }, getHelper: function (e, t) { return this.getHelpers(e, t)[0]; }, getHelpers: function (e, t) { var r = []; if (!tl.hasOwnProperty(t)) return r; var n = tl[t]; var i = this.getModeAt(e); if (typeof i[t] == 'string')n[i[t]] && r.push(n[i[t]]); else if (i[t]) for (var o = 0; o < i[t].length; o++) { var a = n[i[t][o]]; a && r.push(a); } else i.helperType && n[i.helperType] ? r.push(n[i.helperType]) : n[i.name] && r.push(n[i.name]); for (var l = 0; l < n._global.length; l++) { var s = n._global[l]; s.pred(i, this) && j(r, s.val) == -1 && r.push(s.val); } return r; }, getStateAfter: function (e, t) { var r = this.doc; return _t(this, (e = ke(r, e == null ? r.first + r.size - 1 : e)) + 1, t).state; }, cursorCoords: function (e, t) { var r = this.doc.sel.primary(); return en(this, e == null ? r.head : typeof e == 'object' ? Ce(this.doc, e) : e ? r.from() : r.to(), t || 'page'); }, charCoords: function (e, t) { return Jr(this, Ce(this.doc, e), t || 'page'); }, coordsChar: function (e, t) { return nn(this, (e = Qr(this, e, t || 'page')).left, e.top); }, lineAtHeight: function (e, t) { return e = Qr(this, { top: e, left: 0 }, t || 'page').top, he(this.doc, e + this.display.viewOffset); }, heightAtLine: function (e, t, r) { var n; var i = !1; if (typeof e == 'number') { var o = this.doc.first + this.doc.size - 1; e < this.doc.first ? e = this.doc.first : o < e && (e = o, i = !0), n = se(this.doc, e); } else n = e; return Zr(this, n, { top: 0, left: 0 }, t || 'page', r || i).top + (i ? this.doc.height - _e(n) : 0); }, defaultTextHeight: function () { return cn(this.display); }, defaultCharWidth: function () { return un(this.display); }, getViewport: function () { return { from: this.display.viewFrom, to: this.display.viewTo }; }, addWidget: function (e, t, r, n, i) { var o = this.display; var a = (e = en(this, Ce(this.doc, e))).bottom; var l = e.left; if (t.style.position = 'absolute', t.setAttribute('cm-ignore-events', 'true'), this.display.input.setUneditable(t), o.sizer.appendChild(t), n == 'over')a = e.top; else if (n == 'above' || n == 'near') { var s = Math.max(o.wrapper.clientHeight, this.doc.height); var c = Math.max(o.sizer.clientWidth, o.lineSpace.clientWidth); (n == 'above' || e.bottom + t.offsetHeight > s) && e.top > t.offsetHeight ? a = e.top - t.offsetHeight : e.bottom + t.offsetHeight <= s && (a = e.bottom), l + t.offsetWidth > c && (l = c - t.offsetWidth); }t.style.top = a + 'px', t.style.left = t.style.right = '', i == 'right' ? (l = o.sizer.clientWidth - t.offsetWidth, t.style.right = '0px') : (i == 'left' ? l = 0 : i == 'middle' && (l = (o.sizer.clientWidth - t.offsetWidth) / 2), t.style.left = l + 'px'), r && (function (e, t) { var r = Wn(e, t); r.scrollTop != null && Fn(e, r.scrollTop), r.scrollLeft != null && jn(e, r.scrollLeft); }(this, { left: l, top: a, right: l + t.offsetWidth, bottom: a + t.offsetHeight })); }, triggerOnKeyDown: ni(pa), triggerOnKeyPress: ni(ga), triggerOnKeyUp: ma, triggerOnMouseDown: ni(wa), execCommand: function (e) { if (oa.hasOwnProperty(e)) return oa[e].call(null, this); }, triggerElectric: ni(function (e) { Ra(this, e); }), findPosH: function (e, t, r, n) { var i = 1; t < 0 && (i = -1, t = -t); for (var o = Ce(this.doc, e), a = 0; a < t && !(o = qa(this.doc, o, i, r, n)).hitSide; ++a);return o; }, moveH: ni(function (t, r) { var n = this; this.extendSelectionsBy(function (e) { return n.display.shift || n.doc.extend || e.empty() ? qa(n.doc, e.head, t, r, n.options.rtlMoveVisually) : t < 0 ? e.from() : e.to(); }, V); }), deleteH: ni(function (r, n) { var e = this.doc.sel; var i = this.doc; e.somethingSelected() ? i.replaceSelection('', null, '+delete') : ea(this, function (e) { var t = qa(i, e.head, r, n, !1); return r < 0 ? { from: t, to: e.head } : { from: e.head, to: t }; }); }), findPosV: function (e, t, r, n) { var i = 1; var o = n; t < 0 && (i = -1, t = -t); for (var a = Ce(this.doc, e), l = 0; l < t; ++l) { var s = en(this, a, 'div'); if (o == null ? o = s.left : s.left = o, (a = Ua(this, s, i, r)).hitSide) break; } return a; }, moveV: ni(function (n, i) { var o = this; var a = this.doc; var l = []; var s = !this.display.shift && !a.extend && a.sel.somethingSelected(); if (a.extendSelectionsBy(function (e) { if (s) return n < 0 ? e.from() : e.to(); var t = en(o, e.head, 'div'); e.goalColumn != null && (t.left = e.goalColumn), l.push(t.left); var r = Ua(o, t, n, i); return i == 'page' && e == a.sel.primary() && Dn(o, Jr(o, r, 'div').top - t.top), r; }, V), l.length) for (var e = 0; e < a.sel.ranges.length; e++)a.sel.ranges[e].goalColumn = l[e]; }), findWordAt: function (e) { var t = se(this.doc, e.line).text; var r = e.ch; var n = e.ch; if (t) { var i = this.getHelper(e, 'wordChars'); e.sticky != 'before' && n != t.length || !r ? ++n : --r; for (var o = t.charAt(r), a = te(o, i) ? function (e) { return te(e, i); } : /\s/.test(o) ? function (e) { return /\s/.test(e); } : function (e) { return !/\s/.test(e) && !te(e); }; r > 0 && a(t.charAt(r - 1));)--r; for (;n < t.length && a(t.charAt(n));)++n; } return new Li(ge(e.line, r), ge(e.line, n)); }, toggleOverwrite: function (e) { e != null && e == this.state.overwrite || ((this.state.overwrite = !this.state.overwrite) ? D(this.display.cursorDiv, 'CodeMirror-overwrite') : L(this.display.cursorDiv, 'CodeMirror-overwrite'), ft(this, 'overwriteToggle', this, this.state.overwrite)); }, hasFocus: function () { return this.display.input.getField() == W(); }, isReadOnly: function () { return !(!this.options.readOnly && !this.doc.cantEdit); }, scrollTo: ni(function (e, t) { Pn(this, e, t); }), getScrollInfo: function () { var e = this.display.scroller; return { left: e.scrollLeft, top: e.scrollTop, height: e.scrollHeight - Dr(this) - this.display.barHeight, width: e.scrollWidth - Dr(this) - this.display.barWidth, clientHeight: Pr(this), clientWidth: Hr(this) }; }, scrollIntoView: ni(function (e, t) { e == null ? (e = { from: this.doc.sel.primary().head, to: null }, t == null && (t = this.options.cursorScrollMargin)) : typeof e == 'number' ? e = { from: ge(e, 0), to: null } : e.from == null && (e = { from: e, to: null }), e.to || (e.to = e.from), e.margin = t || 0, e.from.line != null ? (function (e, t) { En(e), e.curOp.scrollToPos = t; }(this, e)) : In(this, e.from, e.to, e.margin); }), setSize: ni(function (e, t) { function r (e) { return typeof e == 'number' || /^\d+$/.test(String(e)) ? e + 'px' : e; } var n = this; e != null && (this.display.wrapper.style.width = r(e)), t != null && (this.display.wrapper.style.height = r(t)), this.options.lineWrapping && Gr(this); var i = this.display.viewFrom; this.doc.iter(i, this.display.viewTo, function (e) { if (e.widgets) for (var t = 0; t < e.widgets.length; t++) if (e.widgets[t].noHScroll) { ai(n, i, 'widget'); break; }++i; }), this.curOp.forceUpdate = !0, ft(this, 'refresh', this); }), operation: function (e) { return ti(this, e); }, startOperation: function () { return Xn(this); }, endOperation: function () { return Yn(this); }, refresh: ni(function () { var e = this.display.cachedTextHeight; oi(this), this.curOp.forceUpdate = !0, _r(this), Pn(this, this.doc.scrollLeft, this.doc.scrollTop), gi(this), (e == null || Math.abs(e - cn(this.display)) > 0.5) && pn(this), ft(this, 'refresh', this); }), swapDoc: ni(function (e) { var t = this.doc; return t.cm = null, Fi(this, e), _r(this), this.display.input.reset(), Pn(this, e.scrollLeft, e.scrollTop), this.curOp.forceScroll = !0, gr(this, 'swapDoc', this, t), t; }), getInputField: function () { return this.display.input.getField(); }, getWrapperElement: function () { return this.display.wrapper; }, getScrollerElement: function () { return this.display.scroller; }, getGutterElement: function () { return this.display.gutters; } }, gt(Ja), Ja.registerHelper = function (e, t, r) { tl.hasOwnProperty(e) || (tl[e] = Ja[e] = { _global: [] }), tl[e][t] = r; }, Ja.registerGlobalHelper = function (e, t, r, n) { Ja.registerHelper(e, t, n), tl[e]._global.push({ pred: r, val: n }); }; var nl; var il = 'iter insert remove copy getEditor constructor'.split(' '); for (var ol in Ho.prototype)Ho.prototype.hasOwnProperty(ol) && j(il, ol) < 0 && (Wa.prototype[ol] = (function (e) { return function () { return e.apply(this.doc, arguments); }; }(Ho.prototype[ol]))); return gt(Ho), Wa.inputStyles = { textarea: Ya, contenteditable: Va }, Wa.defineMode = function (e) { Wa.defaults.mode || e == 'null' || (Wa.defaults.mode = e), (function (e, t) { arguments.length > 2 && (t.dependencies = Array.prototype.slice.call(arguments, 2)), Dt[e] = t; }.apply(this, arguments)); }, Wa.defineMIME = function (e, t) { Ht[e] = t; }, Wa.defineMode('null', function () { return { token: function (e) { return e.skipToEnd(); } }; }), Wa.defineMIME('text/plain', 'null'), Wa.defineExtension = function (e, t) { Wa.prototype[e] = t; }, Wa.defineDocExtension = function (e, t) { Ho.prototype[e] = t; }, Wa.fromTextArea = function (t, e) { if ((e = e ? I(e) : {}).value = t.value, !e.tabindex && t.tabIndex && (e.tabindex = t.tabIndex), !e.placeholder && t.placeholder && (e.placeholder = t.placeholder), e.autofocus == null) { var r = W(); e.autofocus = r == t || t.getAttribute('autofocus') != null && r == document.body; } function n () { t.value = l.getValue(); } var i; if (t.form && (ct(t.form, 'submit', n), !e.leaveSubmitMethodAlone)) { var o = t.form; i = o.submit; try { var a = o.submit = function () { n(), o.submit = i, o.submit(), o.submit = a; }; } catch (e) {} }e.finishInit = function (e) { e.save = n, e.getTextArea = function () { return t; }, e.toTextArea = function () { e.toTextArea = isNaN, n(), t.parentNode.removeChild(e.getWrapperElement()), t.style.display = '', t.form && (dt(t.form, 'submit', n), typeof t.form.submit == 'function' && (t.form.submit = i)); }; }, t.style.display = 'none'; var l = Wa(function (e) { return t.parentNode.insertBefore(e, t.nextSibling); }, e); return l; }, (nl = Wa).off = dt, nl.on = ct, nl.wheelEventPixels = Ci, nl.Doc = Ho, nl.splitLines = Nt, nl.countColumn = F, nl.findColumn = G, nl.isWordChar = ee, nl.Pass = K, nl.signal = ft, nl.Line = tr, nl.changeEnd = Ni, nl.scrollbarModel = Gn, nl.Pos = ge, nl.cmpPos = ve, nl.modes = Dt, nl.mimeModes = Ht, nl.resolveMode = Pt, nl.getMode = Et, nl.modeExtensions = It, nl.extendMode = Ft, nl.copyState = Rt, nl.startState = Bt, nl.innerMode = jt, nl.commands = oa, nl.keyMap = Go, nl.keyName = Qo, nl.isModifierKey = Yo, nl.lookupKey = Xo, nl.normalizeKeyMap = $o, nl.StringStream = Kt, nl.SharedTextMarker = Oo, nl.TextMarker = Ao, nl.LineWidget = To, nl.e_preventDefault = vt, nl.e_stopPropagation = yt, nl.e_stop = wt, nl.addClass = D, nl.contains = z, nl.rmClass = L, nl.keyNames = Ko, Wa.version = '5.39.0', Wa; })), (function (e) { typeof exports == 'object' && typeof module == 'object' ? e(require('../../lib/codemirror')) : typeof define == 'function' && define.amd ? define(['../../lib/codemirror'], e) : e(CodeMirror); }(function (O) { 'use strict'; function e (e) { for (var t = {}, r = 0; r < e.length; ++r)t[e[r].toLowerCase()] = !0; return t; }O.defineMode('css', function (e, t) { var r = t.inline; t.propertyKeywords || (t = O.resolveMode('text/css')); var n; var i; var o = e.indentUnit; var a = t.tokenHooks; var l = t.documentTypes || {}; var s = t.mediaTypes || {}; var c = t.mediaFeatures || {}; var u = t.mediaValueKeywords || {}; var d = t.propertyKeywords || {}; var f = t.nonStandardPropertyKeywords || {}; var h = t.fontProperties || {}; var p = t.counterDescriptors || {}; var m = t.colorKeywords || {}; var g = t.valueKeywords || {}; var v = t.allowNested; var y = t.lineComment; var b = !0 === t.supportsAtComponent; function w (e, t) { return n = t, e; } function x (i) { return function (e, t) { for (var r, n = !1; (r = e.next()) != null;) { if (r == i && !n) { i == ')' && e.backUp(1); break; }n = !n && r == '\\'; } return r != i && (n || i == ')') || (t.tokenize = null), w('string', 'string'); }; } function k (e, t) { return e.next(), e.match(/\s*[\"\')]/, !1) ? t.tokenize = null : t.tokenize = x(')'), w(null, '('); } function C (e, t, r) { this.type = e, this.indent = t, this.prev = r; } function S (e, t, r, n) { return e.context = new C(r, t.indentation() + (!1 === n ? 0 : o), e.context), r; } function T (e) { return e.context.prev && (e.context = e.context.prev), e.context.type; } function L (e, t, r) { return N[r.context.type](e, t, r); } function M (e, t, r, n) { for (var i = n || 1; i > 0; i--)r.context = r.context.prev; return L(e, t, r); } function A (e) { var t = e.current().toLowerCase(); i = g.hasOwnProperty(t) ? 'atom' : m.hasOwnProperty(t) ? 'keyword' : 'variable'; } var N = { top: function (e, t, r) { if (e == '{') return S(r, t, 'block'); if (e == '}' && r.context.prev) return T(r); if (b && /@component/i.test(e)) return S(r, t, 'atComponentBlock'); if (/^@(-moz-)?document$/i.test(e)) return S(r, t, 'documentTypes'); if (/^@(media|supports|(-moz-)?document|import)$/i.test(e)) return S(r, t, 'atBlock'); if (/^@(font-face|counter-style)/i.test(e)) return r.stateArg = e, 'restricted_atBlock_before'; if (/^@(-(moz|ms|o|webkit)-)?keyframes$/i.test(e)) return 'keyframes'; if (e && e.charAt(0) == '@') return S(r, t, 'at'); if (e == 'hash')i = 'builtin'; else if (e == 'word')i = 'tag'; else { if (e == 'variable-definition') return 'maybeprop'; if (e == 'interpolation') return S(r, t, 'interpolation'); if (e == ':') return 'pseudo'; if (v && e == '(') return S(r, t, 'parens'); } return r.context.type; }, block: function (e, t, r) { if (e != 'word') return e == 'meta' ? 'block' : v || e != 'hash' && e != 'qualifier' ? N.top(e, t, r) : (i = 'error', 'block'); var n = t.current().toLowerCase(); return d.hasOwnProperty(n) ? (i = 'property', 'maybeprop') : f.hasOwnProperty(n) ? (i = 'string-2', 'maybeprop') : v ? (i = t.match(/^\s*:(?:\s|$)/, !1) ? 'property' : 'tag', 'block') : (i += ' error', 'maybeprop'); }, maybeprop: function (e, t, r) { return e == ':' ? S(r, t, 'prop') : L(e, t, r); }, prop: function (e, t, r) { if (e == ';') return T(r); if (e == '{' && v) return S(r, t, 'propBlock'); if (e == '}' || e == '{') return M(e, t, r); if (e == '(') return S(r, t, 'parens'); if (e != 'hash' || /^#([0-9a-fA-f]{3,4}|[0-9a-fA-f]{6}|[0-9a-fA-f]{8})$/.test(t.current())) { if (e == 'word')A(t); else if (e == 'interpolation') return S(r, t, 'interpolation'); } else i += ' error'; return 'prop'; }, propBlock: function (e, t, r) { return e == '}' ? T(r) : e == 'word' ? (i = 'property', 'maybeprop') : r.context.type; }, parens: function (e, t, r) { return e == '{' || e == '}' ? M(e, t, r) : e == ')' ? T(r) : e == '(' ? S(r, t, 'parens') : e == 'interpolation' ? S(r, t, 'interpolation') : (e == 'word' && A(t), 'parens'); }, pseudo: function (e, t, r) { return e == 'meta' ? 'pseudo' : e == 'word' ? (i = 'variable-3', r.context.type) : L(e, t, r); }, documentTypes: function (e, t, r) { return e == 'word' && l.hasOwnProperty(t.current()) ? (i = 'tag', r.context.type) : N.atBlock(e, t, r); }, atBlock: function (e, t, r) { if (e == '(') return S(r, t, 'atBlock_parens'); if (e == '}' || e == ';') return M(e, t, r); if (e == '{') return T(r) && S(r, t, v ? 'block' : 'top'); if (e == 'interpolation') return S(r, t, 'interpolation'); if (e == 'word') { var n = t.current().toLowerCase(); i = n == 'only' || n == 'not' || n == 'and' || n == 'or' ? 'keyword' : s.hasOwnProperty(n) ? 'attribute' : c.hasOwnProperty(n) ? 'property' : u.hasOwnProperty(n) ? 'keyword' : d.hasOwnProperty(n) ? 'property' : f.hasOwnProperty(n) ? 'string-2' : g.hasOwnProperty(n) ? 'atom' : m.hasOwnProperty(n) ? 'keyword' : 'error'; } return r.context.type; }, atComponentBlock: function (e, t, r) { return e == '}' ? M(e, t, r) : e == '{' ? T(r) && S(r, t, v ? 'block' : 'top', !1) : (e == 'word' && (i = 'error'), r.context.type); }, atBlock_parens: function (e, t, r) { return e == ')' ? T(r) : e == '{' || e == '}' ? M(e, t, r, 2) : N.atBlock(e, t, r); }, restricted_atBlock_before: function (e, t, r) { return e == '{' ? S(r, t, 'restricted_atBlock') : e == 'word' && r.stateArg == '@counter-style' ? (i = 'variable', 'restricted_atBlock_before') : L(e, t, r); }, restricted_atBlock: function (e, t, r) { return e == '}' ? (r.stateArg = null, T(r)) : e == 'word' ? (i = r.stateArg == '@font-face' && !h.hasOwnProperty(t.current().toLowerCase()) || r.stateArg == '@counter-style' && !p.hasOwnProperty(t.current().toLowerCase()) ? 'error' : 'property', 'maybeprop') : 'restricted_atBlock'; }, keyframes: function (e, t, r) { return e == 'word' ? (i = 'variable', 'keyframes') : e == '{' ? S(r, t, 'top') : L(e, t, r); }, at: function (e, t, r) { return e == ';' ? T(r) : e == '{' || e == '}' ? M(e, t, r) : (e == 'word' ? i = 'tag' : e == 'hash' && (i = 'builtin'), 'at'); }, interpolation: function (e, t, r) { return e == '}' ? T(r) : e == '{' || e == ';' ? M(e, t, r) : (e == 'word' ? i = 'variable' : e != 'variable' && e != '(' && e != ')' && (i = 'error'), 'interpolation'); } }; return { startState: function (e) { return { tokenize: null, state: r ? 'block' : 'top', stateArg: null, context: new C(r ? 'block' : 'top', e || 0, null) }; }, token: function (e, t) { if (!t.tokenize && e.eatSpace()) return null; var r = (t.tokenize || function (e, t) { var r = e.next(); if (a[r]) { var n = a[r](e, t); if (!1 !== n) return n; } return r == '@' ? (e.eatWhile(/[\w\\\-]/), w('def', e.current())) : r == '=' || (r == '~' || r == '|') && e.eat('=') ? w(null, 'compare') : r == '"' || r == "'" ? (t.tokenize = x(r), t.tokenize(e, t)) : r == '#' ? (e.eatWhile(/[\w\\\-]/), w('atom', 'hash')) : r == '!' ? (e.match(/^\s*\w*/), w('keyword', 'important')) : /\d/.test(r) || r == '.' && e.eat(/\d/) ? (e.eatWhile(/[\w.%]/), w('number', 'unit')) : r !== '-' ? /[,+>*\/]/.test(r) ? w(null, 'select-op') : r == '.' && e.match(/^-?[_a-z][_a-z0-9-]*/i) ? w('qualifier', 'qualifier') : /[:;{}\[\]\(\)]/.test(r) ? w(null, r) : (r == 'u' || r == 'U') && e.match(/rl(-prefix)?\(/i) || (r == 'd' || r == 'D') && e.match('omain(', !0, !0) || (r == 'r' || r == 'R') && e.match('egexp(', !0, !0) ? (e.backUp(1), t.tokenize = k, w('property', 'word')) : /[\w\\\-]/.test(r) ? (e.eatWhile(/[\w\\\-]/), w('property', 'word')) : w(null, null) : /[\d.]/.test(e.peek()) ? (e.eatWhile(/[\w.%]/), w('number', 'unit')) : e.match(/^-[\w\\\-]+/) ? (e.eatWhile(/[\w\\\-]/), e.match(/^\s*:/, !1) ? w('variable-2', 'variable-definition') : w('variable-2', 'variable')) : e.match(/^\w+-/) ? w('meta', 'meta') : void 0; })(e, t); return r && typeof r == 'object' && (n = r[1], r = r[0]), i = r, n != 'comment' && (t.state = N[t.state](n, e, t)), i; }, indent: function (e, t) { var r = e.context; var n = t && t.charAt(0); var i = r.indent; return r.type != 'prop' || n != '}' && n != ')' || (r = r.prev), r.prev && (n != '}' || r.type != 'block' && r.type != 'top' && r.type != 'interpolation' && r.type != 'restricted_atBlock' ? (n != ')' || r.type != 'parens' && r.type != 'atBlock_parens') && (n != '{' || r.type != 'at' && r.type != 'atBlock') || (i = Math.max(0, r.indent - o)) : i = (r = r.prev).indent), i; }, electricChars: '}', blockCommentStart: '/*', blockCommentEnd: '*/', blockCommentContinue: ' * ', lineComment: y, fold: 'brace' }; }); var t = ['domain', 'regexp', 'url', 'url-prefix']; var r = e(t); var n = ['all', 'aural', 'braille', 'handheld', 'print', 'projection', 'screen', 'tty', 'tv', 'embossed']; var i = e(n); var o = ['width', 'min-width', 'max-width', 'height', 'min-height', 'max-height', 'device-width', 'min-device-width', 'max-device-width', 'device-height', 'min-device-height', 'max-device-height', 'aspect-ratio', 'min-aspect-ratio', 'max-aspect-ratio', 'device-aspect-ratio', 'min-device-aspect-ratio', 'max-device-aspect-ratio', 'color', 'min-color', 'max-color', 'color-index', 'min-color-index', 'max-color-index', 'monochrome', 'min-monochrome', 'max-monochrome', 'resolution', 'min-resolution', 'max-resolution', 'scan', 'grid', 'orientation', 'device-pixel-ratio', 'min-device-pixel-ratio', 'max-device-pixel-ratio', 'pointer', 'any-pointer', 'hover', 'any-hover']; var a = e(o); var l = ['landscape', 'portrait', 'none', 'coarse', 'fine', 'on-demand', 'hover', 'interlace', 'progressive']; var s = e(l); var c = ['align-content', 'align-items', 'align-self', 'alignment-adjust', 'alignment-baseline', 'anchor-point', 'animation', 'animation-delay', 'animation-direction', 'animation-duration', 'animation-fill-mode', 'animation-iteration-count', 'animation-name', 'animation-play-state', 'animation-timing-function', 'appearance', 'azimuth', 'backface-visibility', 'background', 'background-attachment', 'background-blend-mode', 'background-clip', 'background-color', 'background-image', 'background-origin', 'background-position', 'background-repeat', 'background-size', 'baseline-shift', 'binding', 'bleed', 'bookmark-label', 'bookmark-level', 'bookmark-state', 'bookmark-target', 'border', 'border-bottom', 'border-bottom-color', 'border-bottom-left-radius', 'border-bottom-right-radius', 'border-bottom-style', 'border-bottom-width', 'border-collapse', 'border-color', 'border-image', 'border-image-outset', 'border-image-repeat', 'border-image-slice', 'border-image-source', 'border-image-width', 'border-left', 'border-left-color', 'border-left-style', 'border-left-width', 'border-radius', 'border-right', 'border-right-color', 'border-right-style', 'border-right-width', 'border-spacing', 'border-style', 'border-top', 'border-top-color', 'border-top-left-radius', 'border-top-right-radius', 'border-top-style', 'border-top-width', 'border-width', 'bottom', 'box-decoration-break', 'box-shadow', 'box-sizing', 'break-after', 'break-before', 'break-inside', 'caption-side', 'caret-color', 'clear', 'clip', 'color', 'color-profile', 'column-count', 'column-fill', 'column-gap', 'column-rule', 'column-rule-color', 'column-rule-style', 'column-rule-width', 'column-span', 'column-width', 'columns', 'content', 'counter-increment', 'counter-reset', 'crop', 'cue', 'cue-after', 'cue-before', 'cursor', 'direction', 'display', 'dominant-baseline', 'drop-initial-after-adjust', 'drop-initial-after-align', 'drop-initial-before-adjust', 'drop-initial-before-align', 'drop-initial-size', 'drop-initial-value', 'elevation', 'empty-cells', 'fit', 'fit-position', 'flex', 'flex-basis', 'flex-direction', 'flex-flow', 'flex-grow', 'flex-shrink', 'flex-wrap', 'float', 'float-offset', 'flow-from', 'flow-into', 'font', 'font-feature-settings', 'font-family', 'font-kerning', 'font-language-override', 'font-size', 'font-size-adjust', 'font-stretch', 'font-style', 'font-synthesis', 'font-variant', 'font-variant-alternates', 'font-variant-caps', 'font-variant-east-asian', 'font-variant-ligatures', 'font-variant-numeric', 'font-variant-position', 'font-weight', 'grid', 'grid-area', 'grid-auto-columns', 'grid-auto-flow', 'grid-auto-rows', 'grid-column', 'grid-column-end', 'grid-column-gap', 'grid-column-start', 'grid-gap', 'grid-row', 'grid-row-end', 'grid-row-gap', 'grid-row-start', 'grid-template', 'grid-template-areas', 'grid-template-columns', 'grid-template-rows', 'hanging-punctuation', 'height', 'hyphens', 'icon', 'image-orientation', 'image-rendering', 'image-resolution', 'inline-box-align', 'justify-content', 'justify-items', 'justify-self', 'left', 'letter-spacing', 'line-break', 'line-height', 'line-stacking', 'line-stacking-ruby', 'line-stacking-shift', 'line-stacking-strategy', 'list-style', 'list-style-image', 'list-style-position', 'list-style-type', 'margin', 'margin-bottom', 'margin-left', 'margin-right', 'margin-top', 'marks', 'marquee-direction', 'marquee-loop', 'marquee-play-count', 'marquee-speed', 'marquee-style', 'max-height', 'max-width', 'min-height', 'min-width', 'move-to', 'nav-down', 'nav-index', 'nav-left', 'nav-right', 'nav-up', 'object-fit', 'object-position', 'opacity', 'order', 'orphans', 'outline', 'outline-color', 'outline-offset', 'outline-style', 'outline-width', 'overflow', 'overflow-style', 'overflow-wrap', 'overflow-x', 'overflow-y', 'padding', 'padding-bottom', 'padding-left', 'padding-right', 'padding-top', 'page', 'page-break-after', 'page-break-before', 'page-break-inside', 'page-policy', 'pause', 'pause-after', 'pause-before', 'perspective', 'perspective-origin', 'pitch', 'pitch-range', 'place-content', 'place-items', 'place-self', 'play-during', 'position', 'presentation-level', 'punctuation-trim', 'quotes', 'region-break-after', 'region-break-before', 'region-break-inside', 'region-fragment', 'rendering-intent', 'resize', 'rest', 'rest-after', 'rest-before', 'richness', 'right', 'rotation', 'rotation-point', 'ruby-align', 'ruby-overhang', 'ruby-position', 'ruby-span', 'shape-image-threshold', 'shape-inside', 'shape-margin', 'shape-outside', 'size', 'speak', 'speak-as', 'speak-header', 'speak-numeral', 'speak-punctuation', 'speech-rate', 'stress', 'string-set', 'tab-size', 'table-layout', 'target', 'target-name', 'target-new', 'target-position', 'text-align', 'text-align-last', 'text-decoration', 'text-decoration-color', 'text-decoration-line', 'text-decoration-skip', 'text-decoration-style', 'text-emphasis', 'text-emphasis-color', 'text-emphasis-position', 'text-emphasis-style', 'text-height', 'text-indent', 'text-justify', 'text-outline', 'text-overflow', 'text-shadow', 'text-size-adjust', 'text-space-collapse', 'text-transform', 'text-underline-position', 'text-wrap', 'top', 'transform', 'transform-origin', 'transform-style', 'transition', 'transition-delay', 'transition-duration', 'transition-property', 'transition-timing-function', 'unicode-bidi', 'user-select', 'vertical-align', 'visibility', 'voice-balance', 'voice-duration', 'voice-family', 'voice-pitch', 'voice-range', 'voice-rate', 'voice-stress', 'voice-volume', 'volume', 'white-space', 'widows', 'width', 'will-change', 'word-break', 'word-spacing', 'word-wrap', 'z-index', 'clip-path', 'clip-rule', 'mask', 'enable-background', 'filter', 'flood-color', 'flood-opacity', 'lighting-color', 'stop-color', 'stop-opacity', 'pointer-events', 'color-interpolation', 'color-interpolation-filters', 'color-rendering', 'fill', 'fill-opacity', 'fill-rule', 'image-rendering', 'marker', 'marker-end', 'marker-mid', 'marker-start', 'shape-rendering', 'stroke', 'stroke-dasharray', 'stroke-dashoffset', 'stroke-linecap', 'stroke-linejoin', 'stroke-miterlimit', 'stroke-opacity', 'stroke-width', 'text-rendering', 'baseline-shift', 'dominant-baseline', 'glyph-orientation-horizontal', 'glyph-orientation-vertical', 'text-anchor', 'writing-mode']; var u = e(c); var d = ['scrollbar-arrow-color', 'scrollbar-base-color', 'scrollbar-dark-shadow-color', 'scrollbar-face-color', 'scrollbar-highlight-color', 'scrollbar-shadow-color', 'scrollbar-3d-light-color', 'scrollbar-track-color', 'shape-inside', 'searchfield-cancel-button', 'searchfield-decoration', 'searchfield-results-button', 'searchfield-results-decoration', 'zoom']; var f = e(d); var h = e(['font-family', 'src', 'unicode-range', 'font-variant', 'font-feature-settings', 'font-stretch', 'font-weight', 'font-style']); var p = e(['additive-symbols', 'fallback', 'negative', 'pad', 'prefix', 'range', 'speak-as', 'suffix', 'symbols', 'system']); var m = ['aliceblue', 'antiquewhite', 'aqua', 'aquamarine', 'azure', 'beige', 'bisque', 'black', 'blanchedalmond', 'blue', 'blueviolet', 'brown', 'burlywood', 'cadetblue', 'chartreuse', 'chocolate', 'coral', 'cornflowerblue', 'cornsilk', 'crimson', 'cyan', 'darkblue', 'darkcyan', 'darkgoldenrod', 'darkgray', 'darkgreen', 'darkkhaki', 'darkmagenta', 'darkolivegreen', 'darkorange', 'darkorchid', 'darkred', 'darksalmon', 'darkseagreen', 'darkslateblue', 'darkslategray', 'darkturquoise', 'darkviolet', 'deeppink', 'deepskyblue', 'dimgray', 'dodgerblue', 'firebrick', 'floralwhite', 'forestgreen', 'fuchsia', 'gainsboro', 'ghostwhite', 'gold', 'goldenrod', 'gray', 'grey', 'green', 'greenyellow', 'honeydew', 'hotpink', 'indianred', 'indigo', 'ivory', 'khaki', 'lavender', 'lavenderblush', 'lawngreen', 'lemonchiffon', 'lightblue', 'lightcoral', 'lightcyan', 'lightgoldenrodyellow', 'lightgray', 'lightgreen', 'lightpink', 'lightsalmon', 'lightseagreen', 'lightskyblue', 'lightslategray', 'lightsteelblue', 'lightyellow', 'lime', 'limegreen', 'linen', 'magenta', 'maroon', 'mediumaquamarine', 'mediumblue', 'mediumorchid', 'mediumpurple', 'mediumseagreen', 'mediumslateblue', 'mediumspringgreen', 'mediumturquoise', 'mediumvioletred', 'midnightblue', 'mintcream', 'mistyrose', 'moccasin', 'navajowhite', 'navy', 'oldlace', 'olive', 'olivedrab', 'orange', 'orangered', 'orchid', 'palegoldenrod', 'palegreen', 'paleturquoise', 'palevioletred', 'papayawhip', 'peachpuff', 'peru', 'pink', 'plum', 'powderblue', 'purple', 'rebeccapurple', 'red', 'rosybrown', 'royalblue', 'saddlebrown', 'salmon', 'sandybrown', 'seagreen', 'seashell', 'sienna', 'silver', 'skyblue', 'slateblue', 'slategray', 'snow', 'springgreen', 'steelblue', 'tan', 'teal', 'thistle', 'tomato', 'turquoise', 'violet', 'wheat', 'white', 'whitesmoke', 'yellow', 'yellowgreen']; var g = e(m); var v = ['above', 'absolute', 'activeborder', 'additive', 'activecaption', 'afar', 'after-white-space', 'ahead', 'alias', 'all', 'all-scroll', 'alphabetic', 'alternate', 'always', 'amharic', 'amharic-abegede', 'antialiased', 'appworkspace', 'arabic-indic', 'armenian', 'asterisks', 'attr', 'auto', 'auto-flow', 'avoid', 'avoid-column', 'avoid-page', 'avoid-region', 'background', 'backwards', 'baseline', 'below', 'bidi-override', 'binary', 'bengali', 'blink', 'block', 'block-axis', 'bold', 'bolder', 'border', 'border-box', 'both', 'bottom', 'break', 'break-all', 'break-word', 'bullets', 'button', 'button-bevel', 'buttonface', 'buttonhighlight', 'buttonshadow', 'buttontext', 'calc', 'cambodian', 'capitalize', 'caps-lock-indicator', 'caption', 'captiontext', 'caret', 'cell', 'center', 'checkbox', 'circle', 'cjk-decimal', 'cjk-earthly-branch', 'cjk-heavenly-stem', 'cjk-ideographic', 'clear', 'clip', 'close-quote', 'col-resize', 'collapse', 'color', 'color-burn', 'color-dodge', 'column', 'column-reverse', 'compact', 'condensed', 'contain', 'content', 'contents', 'content-box', 'context-menu', 'continuous', 'copy', 'counter', 'counters', 'cover', 'crop', 'cross', 'crosshair', 'currentcolor', 'cursive', 'cyclic', 'darken', 'dashed', 'decimal', 'decimal-leading-zero', 'default', 'default-button', 'dense', 'destination-atop', 'destination-in', 'destination-out', 'destination-over', 'devanagari', 'difference', 'disc', 'discard', 'disclosure-closed', 'disclosure-open', 'document', 'dot-dash', 'dot-dot-dash', 'dotted', 'double', 'down', 'e-resize', 'ease', 'ease-in', 'ease-in-out', 'ease-out', 'element', 'ellipse', 'ellipsis', 'embed', 'end', 'ethiopic', 'ethiopic-abegede', 'ethiopic-abegede-am-et', 'ethiopic-abegede-gez', 'ethiopic-abegede-ti-er', 'ethiopic-abegede-ti-et', 'ethiopic-halehame-aa-er', 'ethiopic-halehame-aa-et', 'ethiopic-halehame-am-et', 'ethiopic-halehame-gez', 'ethiopic-halehame-om-et', 'ethiopic-halehame-sid-et', 'ethiopic-halehame-so-et', 'ethiopic-halehame-ti-er', 'ethiopic-halehame-ti-et', 'ethiopic-halehame-tig', 'ethiopic-numeric', 'ew-resize', 'exclusion', 'expanded', 'extends', 'extra-condensed', 'extra-expanded', 'fantasy', 'fast', 'fill', 'fixed', 'flat', 'flex', 'flex-end', 'flex-start', 'footnotes', 'forwards', 'from', 'geometricPrecision', 'georgian', 'graytext', 'grid', 'groove', 'gujarati', 'gurmukhi', 'hand', 'hangul', 'hangul-consonant', 'hard-light', 'hebrew', 'help', 'hidden', 'hide', 'higher', 'highlight', 'highlighttext', 'hiragana', 'hiragana-iroha', 'horizontal', 'hsl', 'hsla', 'hue', 'icon', 'ignore', 'inactiveborder', 'inactivecaption', 'inactivecaptiontext', 'infinite', 'infobackground', 'infotext', 'inherit', 'initial', 'inline', 'inline-axis', 'inline-block', 'inline-flex', 'inline-grid', 'inline-table', 'inset', 'inside', 'intrinsic', 'invert', 'italic', 'japanese-formal', 'japanese-informal', 'justify', 'kannada', 'katakana', 'katakana-iroha', 'keep-all', 'khmer', 'korean-hangul-formal', 'korean-hanja-formal', 'korean-hanja-informal', 'landscape', 'lao', 'large', 'larger', 'left', 'level', 'lighter', 'lighten', 'line-through', 'linear', 'linear-gradient', 'lines', 'list-item', 'listbox', 'listitem', 'local', 'logical', 'loud', 'lower', 'lower-alpha', 'lower-armenian', 'lower-greek', 'lower-hexadecimal', 'lower-latin', 'lower-norwegian', 'lower-roman', 'lowercase', 'ltr', 'luminosity', 'malayalam', 'match', 'matrix', 'matrix3d', 'media-controls-background', 'media-current-time-display', 'media-fullscreen-button', 'media-mute-button', 'media-play-button', 'media-return-to-realtime-button', 'media-rewind-button', 'media-seek-back-button', 'media-seek-forward-button', 'media-slider', 'media-sliderthumb', 'media-time-remaining-display', 'media-volume-slider', 'media-volume-slider-container', 'media-volume-sliderthumb', 'medium', 'menu', 'menulist', 'menulist-button', 'menulist-text', 'menulist-textfield', 'menutext', 'message-box', 'middle', 'min-intrinsic', 'mix', 'mongolian', 'monospace', 'move', 'multiple', 'multiply', 'myanmar', 'n-resize', 'narrower', 'ne-resize', 'nesw-resize', 'no-close-quote', 'no-drop', 'no-open-quote', 'no-repeat', 'none', 'normal', 'not-allowed', 'nowrap', 'ns-resize', 'numbers', 'numeric', 'nw-resize', 'nwse-resize', 'oblique', 'octal', 'opacity', 'open-quote', 'optimizeLegibility', 'optimizeSpeed', 'oriya', 'oromo', 'outset', 'outside', 'outside-shape', 'overlay', 'overline', 'padding', 'padding-box', 'painted', 'page', 'paused', 'persian', 'perspective', 'plus-darker', 'plus-lighter', 'pointer', 'polygon', 'portrait', 'pre', 'pre-line', 'pre-wrap', 'preserve-3d', 'progress', 'push-button', 'radial-gradient', 'radio', 'read-only', 'read-write', 'read-write-plaintext-only', 'rectangle', 'region', 'relative', 'repeat', 'repeating-linear-gradient', 'repeating-radial-gradient', 'repeat-x', 'repeat-y', 'reset', 'reverse', 'rgb', 'rgba', 'ridge', 'right', 'rotate', 'rotate3d', 'rotateX', 'rotateY', 'rotateZ', 'round', 'row', 'row-resize', 'row-reverse', 'rtl', 'run-in', 'running', 's-resize', 'sans-serif', 'saturation', 'scale', 'scale3d', 'scaleX', 'scaleY', 'scaleZ', 'screen', 'scroll', 'scrollbar', 'scroll-position', 'se-resize', 'searchfield', 'searchfield-cancel-button', 'searchfield-decoration', 'searchfield-results-button', 'searchfield-results-decoration', 'self-start', 'self-end', 'semi-condensed', 'semi-expanded', 'separate', 'serif', 'show', 'sidama', 'simp-chinese-formal', 'simp-chinese-informal', 'single', 'skew', 'skewX', 'skewY', 'skip-white-space', 'slide', 'slider-horizontal', 'slider-vertical', 'sliderthumb-horizontal', 'sliderthumb-vertical', 'slow', 'small', 'small-caps', 'small-caption', 'smaller', 'soft-light', 'solid', 'somali', 'source-atop', 'source-in', 'source-out', 'source-over', 'space', 'space-around', 'space-between', 'space-evenly', 'spell-out', 'square', 'square-button', 'start', 'static', 'status-bar', 'stretch', 'stroke', 'sub', 'subpixel-antialiased', 'super', 'sw-resize', 'symbolic', 'symbols', 'system-ui', 'table', 'table-caption', 'table-cell', 'table-column', 'table-column-group', 'table-footer-group', 'table-header-group', 'table-row', 'table-row-group', 'tamil', 'telugu', 'text', 'text-bottom', 'text-top', 'textarea', 'textfield', 'thai', 'thick', 'thin', 'threeddarkshadow', 'threedface', 'threedhighlight', 'threedlightshadow', 'threedshadow', 'tibetan', 'tigre', 'tigrinya-er', 'tigrinya-er-abegede', 'tigrinya-et', 'tigrinya-et-abegede', 'to', 'top', 'trad-chinese-formal', 'trad-chinese-informal', 'transform', 'translate', 'translate3d', 'translateX', 'translateY', 'translateZ', 'transparent', 'ultra-condensed', 'ultra-expanded', 'underline', 'unset', 'up', 'upper-alpha', 'upper-armenian', 'upper-greek', 'upper-hexadecimal', 'upper-latin', 'upper-norwegian', 'upper-roman', 'uppercase', 'urdu', 'url', 'var', 'vertical', 'vertical-text', 'visible', 'visibleFill', 'visiblePainted', 'visibleStroke', 'visual', 'w-resize', 'wait', 'wave', 'wider', 'window', 'windowframe', 'windowtext', 'words', 'wrap', 'wrap-reverse', 'x-large', 'x-small', 'xor', 'xx-large', 'xx-small']; var y = e(v); var b = t.concat(n).concat(o).concat(l).concat(c).concat(d).concat(m).concat(v); function w (e, t) { for (var r, n = !1; (r = e.next()) != null;) { if (n && r == '/') { t.tokenize = null; break; }n = r == '*'; } return ['comment', 'comment']; }O.registerHelper('hintWords', 'css', b), O.defineMIME('text/css', { documentTypes: r, mediaTypes: i, mediaFeatures: a, mediaValueKeywords: s, propertyKeywords: u, nonStandardPropertyKeywords: f, fontProperties: h, counterDescriptors: p, colorKeywords: g, valueKeywords: y, tokenHooks: { '/': function (e, t) { return !!e.eat('*') && (t.tokenize = w)(e, t); } }, name: 'css' }), O.defineMIME('text/x-scss', { mediaTypes: i, mediaFeatures: a, mediaValueKeywords: s, propertyKeywords: u, nonStandardPropertyKeywords: f, colorKeywords: g, valueKeywords: y, fontProperties: h, allowNested: !0, lineComment: '//', tokenHooks: { '/': function (e, t) { return e.eat('/') ? (e.skipToEnd(), ['comment', 'comment']) : e.eat('*') ? (t.tokenize = w)(e, t) : ['operator', 'operator']; }, ':': function (e) { return !!e.match(/\s*\{/, !1) && [null, null]; }, $: function (e) { return e.match(/^[\w-]+/), e.match(/^\s*:/, !1) ? ['variable-2', 'variable-definition'] : ['variable-2', 'variable']; }, '#': function (e) { return !!e.eat('{') && [null, 'interpolation']; } }, name: 'css', helperType: 'scss' }), O.defineMIME('text/x-less', { mediaTypes: i, mediaFeatures: a, mediaValueKeywords: s, propertyKeywords: u, nonStandardPropertyKeywords: f, colorKeywords: g, valueKeywords: y, fontProperties: h, allowNested: !0, lineComment: '//', tokenHooks: { '/': function (e, t) { return e.eat('/') ? (e.skipToEnd(), ['comment', 'comment']) : e.eat('*') ? (t.tokenize = w)(e, t) : ['operator', 'operator']; }, '@': function (e) { return e.eat('{') ? [null, 'interpolation'] : !e.match(/^(charset|document|font-face|import|(-(moz|ms|o|webkit)-)?keyframes|media|namespace|page|supports)\b/i, !1) && (e.eatWhile(/[\w\\\-]/), e.match(/^\s*:/, !1) ? ['variable-2', 'variable-definition'] : ['variable-2', 'variable']); }, '&': function () { return ['atom', 'atom']; } }, name: 'css', helperType: 'less' }), O.defineMIME('text/x-gss', { documentTypes: r, mediaTypes: i, mediaFeatures: a, propertyKeywords: u, nonStandardPropertyKeywords: f, fontProperties: h, counterDescriptors: p, colorKeywords: g, valueKeywords: y, supportsAtComponent: !0, tokenHooks: { '/': function (e, t) { return !!e.eat('*') && (t.tokenize = w)(e, t); } }, name: 'css', helperType: 'gss' }); })), (function (e) { typeof exports == 'object' && typeof module == 'object' ? e(require('../../lib/codemirror')) : typeof define == 'function' && define.amd ? define(['../../lib/codemirror'], e) : e(CodeMirror); }(function (Je) { 'use strict'; Je.defineMode('javascript', function (e, c) { var t; var r; var n; var i; var o; var a; var u = e.indentUnit; var d = c.statementIndent; var l = c.jsonld; var s = c.json || l; var f = c.typescript; var h = c.wordCharacters || /[\w$\xa1-\uffff]/; var p = (t = m('keyword a'), r = m('keyword b'), n = m('keyword c'), i = m('keyword d'), o = m('operator'), a = { type: 'atom', style: 'atom' }, { if: m('if'), while: t, with: t, else: r, do: r, try: r, finally: r, return: i, break: i, continue: i, new: m('new'), delete: n, void: n, throw: n, debugger: m('debugger'), var: m('var'), const: m('var'), let: m('var'), function: m('function'), catch: m('catch'), for: m('for'), switch: m('switch'), case: m('case'), default: m('default'), in: o, typeof: o, instanceof: o, true: a, false: a, null: a, undefined: a, NaN: a, Infinity: a, this: m('this'), class: m('class'), super: m('atom'), yield: n, export: m('export'), import: m('import'), extends: n, await: n }); function m (e) { return { type: e, style: 'keyword' }; } var g; var v; var y = /[+\-*&%=<>!?|~^@]/; var b = /^@(context|id|value|language|type|container|list|set|reverse|index|base|vocab|graph)"/; function w (e, t, r) { return g = e, v = r, t; } function x (e, t) { var r = e.next(); if (r == '"' || r == "'") return t.tokenize = (function (i) { return function (e, t) { var r; var n = !1; if (l && e.peek() == '@' && e.match(b)) return t.tokenize = x, w('jsonld-keyword', 'meta'); for (;(r = e.next()) != null && (r != i || n);)n = !n && r == '\\'; return n || (t.tokenize = x), w('string', 'string'); }; }(r)), t.tokenize(e, t); if (r == '.' && e.match(/^\d+(?:[eE][+\-]?\d+)?/)) return w('number', 'number'); if (r == '.' && e.match('..')) return w('spread', 'meta'); if (/[\[\]{}\(\),;\:\.]/.test(r)) return w(r); if (r == '=' && e.eat('>')) return w('=>', 'operator'); if (r == '0' && e.match(/^(?:x[\da-f]+|o[0-7]+|b[01]+)n?/i)) return w('number', 'number'); if (/\d/.test(r)) return e.match(/^\d*(?:n|(?:\.\d*)?(?:[eE][+\-]?\d+)?)?/), w('number', 'number'); if (r == '/') return e.eat('*') ? (t.tokenize = k)(e, t) : e.eat('/') ? (e.skipToEnd(), w('comment', 'comment')) : Qe(e, t, 1) ? ((function (e) { for (var t, r = !1, n = !1; (t = e.next()) != null;) { if (!r) { if (t == '/' && !n) return; t == '[' ? n = !0 : n && t == ']' && (n = !1); }r = !r && t == '\\'; } }(e)), e.match(/^\b(([gimyus])(?![gimyus]*\2))+\b/), w('regexp', 'string-2')) : (e.eat('='), w('operator', 'operator', e.current())); if (r == '`') return (t.tokenize = C)(e, t); if (r == '#') return e.skipToEnd(), w('error', 'error'); if (y.test(r)) return r == '>' && t.lexical && t.lexical.type == '>' || (e.eat('=') ? r != '!' && r != '=' || e.eat('=') : /[<>*+\-]/.test(r) && (e.eat(r), r == '>' && e.eat(r))), w('operator', 'operator', e.current()); if (h.test(r)) { e.eatWhile(h); var n = e.current(); if (t.lastType != '.') { if (p.propertyIsEnumerable(n)) { var i = p[n]; return w(i.type, i.style, n); } if (n == 'async' && e.match(/^(\s|\/\*.*?\*\/)*[\[\(\w]/, !1)) return w('async', 'keyword', n); } return w('variable', 'variable', n); } } function k (e, t) { for (var r, n = !1; r = e.next();) { if (r == '/' && n) { t.tokenize = x; break; }n = r == '*'; } return w('comment', 'comment'); } function C (e, t) { for (var r, n = !1; (r = e.next()) != null;) { if (!n && (r == '`' || r == '$' && e.eat('{'))) { t.tokenize = x; break; }n = !n && r == '\\'; } return w('quasi', 'string-2', e.current()); } var S = '([{}])'; function T (e, t) { t.fatArrowAt && (t.fatArrowAt = null); var r = e.string.indexOf('=>', e.start); if (!(r < 0)) { if (f) { var n = /:\s*(?:\w+(?:<[^>]*>|\[\])?|\{[^}]*\})\s*$/.exec(e.string.slice(e.start, r)); n && (r = n.index); } for (var i = 0, o = !1, a = r - 1; a >= 0; --a) { var l = e.string.charAt(a); var s = S.indexOf(l); if (s >= 0 && s < 3) { if (!i) { ++a; break; } if (--i == 0) { l == '(' && (o = !0); break; } } else if (s >= 3 && s < 6)++i; else if (h.test(l))o = !0; else { if (/["'\/]/.test(l)) return; if (o && !i) { ++a; break; } } }o && !i && (t.fatArrowAt = a); } } var L = { atom: !0, number: !0, variable: !0, string: !0, regexp: !0, this: !0, 'jsonld-keyword': !0 }; function M (e, t, r, n, i, o) { this.indented = e, this.column = t, this.type = r, this.prev = i, this.info = o, n != null && (this.align = n); } function A (e, t) { for (var r = e.localVars; r; r = r.next) if (r.name == t) return !0; for (var n = e.context; n; n = n.prev) for (r = n.vars; r; r = r.next) if (r.name == t) return !0; } var N = { state: null, column: null, marked: null, cc: null }; function O () { for (var e = arguments.length - 1; e >= 0; e--)N.cc.push(arguments[e]); } function z () { return O.apply(null, arguments), !0; } function W (e, t) { for (var r = t; r; r = r.next) if (r.name == e) return !0; return !1; } function D (e) { var t = N.state; if (N.marked = 'def', t.context) if (t.lexical.info == 'var' && t.context && t.context.block) { var r = (function e (t, r) { { if (r) { if (r.block) { var n = e(t, r.prev); return n ? n == r.prev ? r : new P(n, r.vars, !0) : null; } return W(t, r.vars) ? r : new P(r.prev, new E(t, r.vars), !1); } return null; } }(e, t.context)); if (r != null) return void (t.context = r); } else if (!W(e, t.localVars)) return void (t.localVars = new E(e, t.localVars)); c.globalVars && !W(e, t.globalVars) && (t.globalVars = new E(e, t.globalVars)); } function H (e) { return e == 'public' || e == 'private' || e == 'protected' || e == 'abstract' || e == 'readonly'; } function P (e, t, r) { this.prev = e, this.vars = t, this.block = r; } function E (e, t) { this.name = e, this.next = t; } var I = new E('this', new E('arguments', null)); function F () { N.state.context = new P(N.state.context, N.state.localVars, !1), N.state.localVars = I; } function R () { N.state.context = new P(N.state.context, N.state.localVars, !0), N.state.localVars = null; } function j () { N.state.localVars = N.state.context.vars, N.state.context = N.state.context.prev; } function B (n, i) { function e () { var e = N.state; var t = e.indented; if (e.lexical.type == 'stat')t = e.lexical.indented; else for (var r = e.lexical; r && r.type == ')' && r.align; r = r.prev)t = r.indented; e.lexical = new M(t, N.stream.column(), n, null, e.lexical, i); } return e.lex = !0, e; } function K () { var e = N.state; e.lexical.prev && (e.lexical.type == ')' && (e.indented = e.lexical.indented), e.lexical = e.lexical.prev); } function q (r) { return function e (t) { return t == r ? z() : r == ';' || t == '}' || t == ')' || t == ']' ? O() : z(e); }; } function U (e, t) { return e == 'var' ? z(B('vardef', t), Se, q(';'), K) : e == 'keyword a' ? z(B('form'), $, U, K) : e == 'keyword b' ? z(B('form'), U, K) : e == 'keyword d' ? N.stream.match(/^\s*$/, !1) ? z() : z(B('stat'), Y, q(';'), K) : e == 'debugger' ? z(q(';')) : e == '{' ? z(B('}'), R, fe, K, j) : e == ';' ? z() : e == 'if' ? (N.state.lexical.info == 'else' && N.state.cc[N.state.cc.length - 1] == K && N.state.cc.pop()(), z(B('form'), $, U, K, Ne)) : e == 'function' ? z(Pe) : e == 'for' ? z(B('form'), Oe, U, K) : e == 'class' || f && t == 'interface' ? (N.marked = 'keyword', z(B('form'), Fe, K)) : e == 'variable' ? f && t == 'declare' ? (N.marked = 'keyword', z(U)) : f && (t == 'module' || t == 'enum' || t == 'type') && N.stream.match(/^\s*\w/, !1) ? (N.marked = 'keyword', t == 'enum' ? z(Ye) : t == 'type' ? z(ge, q('operator'), ge, q(';')) : z(B('form'), Te, q('{'), B('}'), fe, K, K)) : f && t == 'namespace' ? (N.marked = 'keyword', z(B('form'), G, fe, K)) : f && t == 'abstract' ? (N.marked = 'keyword', z(U)) : z(B('stat'), oe) : e == 'switch' ? z(B('form'), $, q('{'), B('}', 'switch'), R, fe, K, K, j) : e == 'case' ? z(G, q(':')) : e == 'default' ? z(q(':')) : e == 'catch' ? z(B('form'), F, V, U, K, j) : e == 'export' ? z(B('stat'), Ke, K) : e == 'import' ? z(B('stat'), Ue, K) : e == 'async' ? z(U) : t == '@' ? z(G, U) : O(B('stat'), G, q(';'), K); } function V (e) { if (e == '(') return z(Ee, q(')')); } function G (e, t) { return X(e, t, !1); } function _ (e, t) { return X(e, t, !0); } function $ (e) { return e != '(' ? O() : z(B(')'), G, q(')'), K); } function X (e, t, r) { if (N.state.fatArrowAt == N.stream.start) { var n = r ? re : te; if (e == '(') return z(F, B(')'), ue(Ee, ')'), K, q('=>'), n, j); if (e == 'variable') return O(F, Te, q('=>'), n, j); } var i = r ? Q : Z; return L.hasOwnProperty(e) ? z(i) : e == 'function' ? z(Pe, i) : e == 'class' || f && t == 'interface' ? (N.marked = 'keyword', z(B('form'), Ie, K)) : e == 'keyword c' || e == 'async' ? z(r ? _ : G) : e == '(' ? z(B(')'), Y, q(')'), K, i) : e == 'operator' || e == 'spread' ? z(r ? _ : G) : e == '[' ? z(B(']'), Xe, K, i) : e == '{' ? de(le, '}', null, i) : e == 'quasi' ? O(J, i) : e == 'new' ? z(function (t) { return function (e) { return e == '.' ? z(t ? ie : ne) : e == 'variable' && f ? z(xe, t ? Q : Z) : O(t ? _ : G); }; }(r)) : e == 'import' ? z(G) : z(); } function Y (e) { return e.match(/[;\}\)\],]/) ? O() : O(G); } function Z (e, t) { return e == ',' ? z(G) : Q(e, t, !1); } function Q (e, t, r) { var n = r == 0 ? Z : Q; var i = r == 0 ? G : _; return e == '=>' ? z(F, r ? re : te, j) : e == 'operator' ? /\+\+|--/.test(t) || f && t == '!' ? z(n) : f && t == '<' && N.stream.match(/^([^>]|<.*?>)*>\s*\(/, !1) ? z(B('>'), ue(ge, '>'), K, n) : t == '?' ? z(G, q(':'), i) : z(i) : e == 'quasi' ? O(J, n) : e != ';' ? e == '(' ? de(_, ')', 'call', n) : e == '.' ? z(ae, n) : e == '[' ? z(B(']'), Y, q(']'), K, n) : f && t == 'as' ? (N.marked = 'keyword', z(ge, n)) : e == 'regexp' ? (N.state.lastType = N.marked = 'operator', N.stream.backUp(N.stream.pos - N.stream.start - 1), z(i)) : void 0 : void 0; } function J (e, t) { return e != 'quasi' ? O() : t.slice(t.length - 2) != '${' ? z(J) : z(G, ee); } function ee (e) { if (e == '}') return N.marked = 'string-2', N.state.tokenize = C, z(J); } function te (e) { return T(N.stream, N.state), O(e == '{' ? U : G); } function re (e) { return T(N.stream, N.state), O(e == '{' ? U : _); } function ne (e, t) { if (t == 'target') return N.marked = 'keyword', z(Z); } function ie (e, t) { if (t == 'target') return N.marked = 'keyword', z(Q); } function oe (e) { return e == ':' ? z(K, U) : O(Z, q(';'), K); } function ae (e) { if (e == 'variable') return N.marked = 'property', z(); } function le (e, t) { if (e == 'async') return N.marked = 'property', z(le); if (e == 'variable' || N.style == 'keyword') { return N.marked = 'property', t == 'get' || t == 'set' ? z(se) : (f && N.state.fatArrowAt == N.stream.start && (r = N.stream.match(/^\s*:\s*/, !1)) && (N.state.fatArrowAt = N.stream.pos + r[0].length), z(ce)); var r; } else { if (e == 'number' || e == 'string') return N.marked = l ? 'property' : N.style + ' property', z(ce); if (e == 'jsonld-keyword') return z(ce); if (f && H(t)) return N.marked = 'keyword', z(le); if (e == '[') return z(G, he, q(']'), ce); if (e == 'spread') return z(_, ce); if (t == '*') return N.marked = 'keyword', z(le); if (e == ':') return O(ce); } } function se (e) { return e != 'variable' ? O(ce) : (N.marked = 'property', z(Pe)); } function ce (e) { return e == ':' ? z(_) : e == '(' ? O(Pe) : void 0; } function ue (n, i, o) { function a (e, t) { if (o ? o.indexOf(e) > -1 : e == ',') { var r = N.state.lexical; return r.info == 'call' && (r.pos = (r.pos || 0) + 1), z(function (e, t) { return e == i || t == i ? O() : O(n); }, a); } return e == i || t == i ? z() : z(q(i)); } return function (e, t) { return e == i || t == i ? z() : O(n, a); }; } function de (e, t, r) { for (var n = 3; n < arguments.length; n++)N.cc.push(arguments[n]); return z(B(t, r), ue(e, t), K); } function fe (e) { return e == '}' ? z() : O(U, fe); } function he (e, t) { if (f) { if (e == ':') return z(ge); if (t == '?') return z(he); } } function pe (e) { if (f && e == ':') return N.stream.match(/^\s*\w+\s+is\b/, !1) ? z(G, me, ge) : z(ge); } function me (e, t) { if (t == 'is') return N.marked = 'keyword', z(); } function ge (e, t) { return t == 'keyof' || t == 'typeof' ? (N.marked = 'keyword', z(t == 'keyof' ? ge : _)) : e == 'variable' || t == 'void' ? (N.marked = 'type', z(we)) : e == 'string' || e == 'number' || e == 'atom' ? z(we) : e == '[' ? z(B(']'), ue(ge, ']', ','), K, we) : e == '{' ? z(B('}'), ue(ye, '}', ',;'), K, we) : e == '(' ? z(ue(be, ')'), ve) : e == '<' ? z(ue(ge, '>'), ge) : void 0; } function ve (e) { if (e == '=>') return z(ge); } function ye (e, t) { return e == 'variable' || N.style == 'keyword' ? (N.marked = 'property', z(ye)) : t == '?' ? z(ye) : e == ':' ? z(ge) : e == '[' ? z(G, he, q(']'), ye) : void 0; } function be (e, t) { return e == 'variable' && N.stream.match(/^\s*[?:]/, !1) || t == '?' ? z(be) : e == ':' ? z(ge) : O(ge); } function we (e, t) { return t == '<' ? z(B('>'), ue(ge, '>'), K, we) : t == '|' || e == '.' || t == '&' ? z(ge) : e == '[' ? z(q(']'), we) : t == 'extends' || t == 'implements' ? (N.marked = 'keyword', z(ge)) : void 0; } function xe (e, t) { if (t == '<') return z(B('>'), ue(ge, '>'), K, we); } function ke () { return O(ge, Ce); } function Ce (e, t) { if (t == '=') return z(ge); } function Se (e, t) { return t == 'enum' ? (N.marked = 'keyword', z(Ye)) : O(Te, he, Me, Ae); } function Te (e, t) { return f && H(t) ? (N.marked = 'keyword', z(Te)) : e == 'variable' ? (D(t), z()) : e == 'spread' ? z(Te) : e == '[' ? de(Te, ']') : e == '{' ? de(Le, '}') : void 0; } function Le (e, t) { return e != 'variable' || N.stream.match(/^\s*:/, !1) ? (e == 'variable' && (N.marked = 'property'), e == 'spread' ? z(Te) : e == '}' ? O() : z(q(':'), Te, Me)) : (D(t), z(Me)); } function Me (e, t) { if (t == '=') return z(_); } function Ae (e) { if (e == ',') return z(Se); } function Ne (e, t) { if (e == 'keyword b' && t == 'else') return z(B('form', 'else'), U, K); } function Oe (e, t) { return t == 'await' ? z(Oe) : e == '(' ? z(B(')'), ze, q(')'), K) : void 0; } function ze (e) { return e == 'var' ? z(Se, q(';'), De) : e == ';' ? z(De) : e == 'variable' ? z(We) : O(G, q(';'), De); } function We (e, t) { return t == 'in' || t == 'of' ? (N.marked = 'keyword', z(G)) : z(Z, De); } function De (e, t) { return e == ';' ? z(He) : t == 'in' || t == 'of' ? (N.marked = 'keyword', z(G)) : O(G, q(';'), He); } function He (e) { e != ')' && z(G); } function Pe (e, t) { return t == '*' ? (N.marked = 'keyword', z(Pe)) : e == 'variable' ? (D(t), z(Pe)) : e == '(' ? z(F, B(')'), ue(Ee, ')'), K, pe, U, j) : f && t == '<' ? z(B('>'), ue(ke, '>'), K, Pe) : void 0; } function Ee (e, t) { return t == '@' && z(G, Ee), e == 'spread' ? z(Ee) : f && H(t) ? (N.marked = 'keyword', z(Ee)) : O(Te, he, Me); } function Ie (e, t) { return e == 'variable' ? Fe(e, t) : Re(e, t); } function Fe (e, t) { if (e == 'variable') return D(t), z(Re); } function Re (e, t) { return t == '<' ? z(B('>'), ue(ke, '>'), K, Re) : t == 'extends' || t == 'implements' || f && e == ',' ? (t == 'implements' && (N.marked = 'keyword'), z(f ? ge : G, Re)) : e == '{' ? z(B('}'), je, K) : void 0; } function je (e, t) { return e == 'async' || e == 'variable' && (t == 'static' || t == 'get' || t == 'set' || f && H(t)) && N.stream.match(/^\s+[\w$\xa1-\uffff]/, !1) ? (N.marked = 'keyword', z(je)) : e == 'variable' || N.style == 'keyword' ? (N.marked = 'property', z(f ? Be : Pe, je)) : e == '[' ? z(G, he, q(']'), f ? Be : Pe, je) : t == '*' ? (N.marked = 'keyword', z(je)) : e == ';' ? z(je) : e == '}' ? z() : t == '@' ? z(G, je) : void 0; } function Be (e, t) { return t == '?' ? z(Be) : e == ':' ? z(ge, Me) : t == '=' ? z(_) : O(Pe); } function Ke (e, t) { return t == '*' ? (N.marked = 'keyword', z($e, q(';'))) : t == 'default' ? (N.marked = 'keyword', z(G, q(';'))) : e == '{' ? z(ue(qe, '}'), $e, q(';')) : O(U); } function qe (e, t) { return t == 'as' ? (N.marked = 'keyword', z(q('variable'))) : e == 'variable' ? O(_, qe) : void 0; } function Ue (e) { return e == 'string' ? z() : e == '(' ? O(G) : O(Ve, Ge, $e); } function Ve (e, t) { return e == '{' ? de(Ve, '}') : (e == 'variable' && D(t), t == '*' && (N.marked = 'keyword'), z(_e)); } function Ge (e) { if (e == ',') return z(Ve, Ge); } function _e (e, t) { if (t == 'as') return N.marked = 'keyword', z(Ve); } function $e (e, t) { if (t == 'from') return N.marked = 'keyword', z(G); } function Xe (e) { return e == ']' ? z() : O(ue(_, ']')); } function Ye () { return O(B('form'), Te, q('{'), B('}'), ue(Ze, '}'), K, K); } function Ze () { return O(Te, Me); } function Qe (e, t, r) { return t.tokenize == x && /^(?:operator|sof|keyword [bcd]|case|new|export|default|spread|[\[{}\(,;:]|=>)$/.test(t.lastType) || t.lastType == 'quasi' && /\{\s*$/.test(e.string.slice(0, e.pos - (r || 0))); } return K.lex = j.lex = !0, { startState: function (e) { var t = { tokenize: x, lastType: 'sof', cc: [], lexical: new M((e || 0) - u, 0, 'block', !1), localVars: c.localVars, context: c.localVars && new P(null, null, !1), indented: e || 0 }; return c.globalVars && typeof c.globalVars == 'object' && (t.globalVars = c.globalVars), t; }, token: function (e, t) { if (e.sol() && (t.lexical.hasOwnProperty('align') || (t.lexical.align = !1), t.indented = e.indentation(), T(e, t)), t.tokenize != k && e.eatSpace()) return null; var r = t.tokenize(e, t); return g == 'comment' ? r : (t.lastType = g != 'operator' || v != '++' && v != '--' ? g : 'incdec', (function (e, t, r, n, i) { var o = e.cc; for (N.state = e, N.stream = i, N.marked = null, N.cc = o, N.style = t, e.lexical.hasOwnProperty('align') || (e.lexical.align = !0); ;) { if ((o.length ? o.pop() : s ? G : U)(r, n)) { for (;o.length && o[o.length - 1].lex;)o.pop()(); return N.marked ? N.marked : r == 'variable' && A(e, n) ? 'variable-2' : t; } } }(t, r, g, v, e))); }, indent: function (e, t) { if (e.tokenize == k) return Je.Pass; if (e.tokenize != x) return 0; var r; var n = t && t.charAt(0); var i = e.lexical; if (!/^\s*else\b/.test(t)) for (var o = e.cc.length - 1; o >= 0; --o) { var a = e.cc[o]; if (a == K)i = i.prev; else if (a != Ne) break; } for (;(i.type == 'stat' || i.type == 'form') && (n == '}' || (r = e.cc[e.cc.length - 1]) && (r == Z || r == Q) && !/^[,\.=+\-*:?[\(]/.test(t));)i = i.prev; d && i.type == ')' && i.prev.type == 'stat' && (i = i.prev); var l = i.type; var s = n == l; return l == 'vardef' ? i.indented + (e.lastType == 'operator' || e.lastType == ',' ? i.info.length + 1 : 0) : l == 'form' && n == '{' ? i.indented : l == 'form' ? i.indented + u : l == 'stat' ? i.indented + ((function (e, t) { return e.lastType == 'operator' || e.lastType == ',' || y.test(t.charAt(0)) || /[,.]/.test(t.charAt(0)); }(e, t)) ? d || u : 0) : i.info != 'switch' || s || c.doubleIndentSwitch == 0 ? i.align ? i.column + (s ? 0 : 1) : i.indented + (s ? 0 : u) : i.indented + (/^(?:case|default)\b/.test(t) ? u : 2 * u); }, electricInput: /^\s*(?:case .*?:|default:|\{|\})$/, blockCommentStart: s ? null : '/*', blockCommentEnd: s ? null : '*/', blockCommentContinue: s ? null : ' * ', lineComment: s ? null : '//', fold: 'brace', closeBrackets: "()[]{}''\"\"``", helperType: s ? 'json' : 'javascript', jsonldMode: l, jsonMode: s, expressionAllowed: Qe, skipExpression: function (e) { var t = e.cc[e.cc.length - 1]; t != G && t != _ || e.cc.pop(); } }; }), Je.registerHelper('wordChars', 'javascript', /[\w$]/), Je.defineMIME('text/javascript', 'javascript'), Je.defineMIME('text/ecmascript', 'javascript'), Je.defineMIME('application/javascript', 'javascript'), Je.defineMIME('application/x-javascript', 'javascript'), Je.defineMIME('application/ecmascript', 'javascript'), Je.defineMIME('application/json', { name: 'javascript', json: !0 }), Je.defineMIME('application/x-json', { name: 'javascript', json: !0 }), Je.defineMIME('application/ld+json', { name: 'javascript', jsonld: !0 }), Je.defineMIME('text/typescript', { name: 'javascript', typescript: !0 }), Je.defineMIME('application/typescript', { name: 'javascript', typescript: !0 }); })), (function (e) { typeof exports == 'object' && typeof module == 'object' ? e(require('../../lib/codemirror')) : typeof define == 'function' && define.amd ? define(['../../lib/codemirror'], e) : e(CodeMirror); }(function (C) { 'use strict'; var S = { autoSelfClosers: { area: !0, base: !0, br: !0, col: !0, command: !0, embed: !0, frame: !0, hr: !0, img: !0, input: !0, keygen: !0, link: !0, meta: !0, param: !0, source: !0, track: !0, wbr: !0, menuitem: !0 }, implicitlyClosed: { dd: !0, li: !0, optgroup: !0, option: !0, p: !0, rp: !0, rt: !0, tbody: !0, td: !0, tfoot: !0, th: !0, tr: !0 }, contextGrabbers: { dd: { dd: !0, dt: !0 }, dt: { dd: !0, dt: !0 }, li: { li: !0 }, option: { option: !0, optgroup: !0 }, optgroup: { optgroup: !0 }, p: { address: !0, article: !0, aside: !0, blockquote: !0, dir: !0, div: !0, dl: !0, fieldset: !0, footer: !0, form: !0, h1: !0, h2: !0, h3: !0, h4: !0, h5: !0, h6: !0, header: !0, hgroup: !0, hr: !0, menu: !0, nav: !0, ol: !0, p: !0, pre: !0, section: !0, table: !0, ul: !0 }, rp: { rp: !0, rt: !0 }, rt: { rp: !0, rt: !0 }, tbody: { tbody: !0, tfoot: !0 }, td: { td: !0, th: !0 }, tfoot: { tbody: !0 }, th: { td: !0, th: !0 }, thead: { tbody: !0, tfoot: !0 }, tr: { tr: !0 } }, doNotIndent: { pre: !0 }, allowUnquoted: !0, allowMissing: !0, caseFold: !0 }; var T = { autoSelfClosers: {}, implicitlyClosed: {}, contextGrabbers: {}, doNotIndent: {}, allowUnquoted: !1, allowMissing: !1, allowMissingTagName: !1, caseFold: !1 }; C.defineMode('xml', function (e, t) { var i; var o; var a = e.indentUnit; var l = {}; var r = t.htmlMode ? S : T; for (var n in r)l[n] = r[n]; for (var n in t)l[n] = t[n]; function s (t, r) { function e (e) { return (r.tokenize = e)(t, r); } var n = t.next(); return n == '<' ? t.eat('!') ? t.eat('[') ? t.match('CDATA[') ? e(u('atom', ']]>')) : null : t.match('--') ? e(u('comment', '--\x3e')) : t.match('DOCTYPE', !0, !0) ? (t.eatWhile(/[\w\._\-]/), e(function n (i) { return function (e, t) { for (var r; (r = e.next()) != null;) { if (r == '<') return t.tokenize = n(i + 1), t.tokenize(e, t); if (r == '>') { if (i != 1) return t.tokenize = n(i - 1), t.tokenize(e, t); t.tokenize = s; break; } } return 'meta'; }; }(1))) : null : t.eat('?') ? (t.eatWhile(/[\w\._\-]/), r.tokenize = u('meta', '?>'), 'meta') : (i = t.eat('/') ? 'closeTag' : 'openTag', r.tokenize = c, 'tag bracket') : n != '&' ? (t.eatWhile(/[^&<]/), null) : (t.eat('#') ? t.eat('x') ? t.eatWhile(/[a-fA-F\d]/) && t.eat(';') : t.eatWhile(/[\d]/) && t.eat(';') : t.eatWhile(/[\w\.\-:]/) && t.eat(';')) ? 'atom' : 'error'; } function c (e, t) { var r = e.next(); if (r == '>' || r == '/' && e.eat('>')) return t.tokenize = s, i = r == '>' ? 'endTag' : 'selfcloseTag', 'tag bracket'; if (r == '=') return i = 'equals', null; if (r != '<') return /[\'\"]/.test(r) ? (t.tokenize = (function (r) { function e (e, t) { for (;!e.eol();) if (e.next() == r) { t.tokenize = c; break; } return 'string'; } return e.isInAttribute = !0, e; }(r)), t.stringStartCol = e.column(), t.tokenize(e, t)) : (e.match(/^[^\s\u00a0=<>\"\']*[^\s\u00a0=<>\"\'\/]/), 'word'); t.tokenize = s, t.state = p, t.tagName = t.tagStart = null; var n = t.tokenize(e, t); return n ? n + ' tag error' : 'tag error'; } function u (r, n) { return function (e, t) { for (;!e.eol();) { if (e.match(n)) { t.tokenize = s; break; }e.next(); } return r; }; } function d (e, t, r) { this.prev = e.context, this.tagName = t, this.indent = e.indented, this.startOfLine = r, (l.doNotIndent.hasOwnProperty(t) || e.context && e.context.noIndent) && (this.noIndent = !0); } function f (e) { e.context && (e.context = e.context.prev); } function h (e, t) { for (var r; ;) { if (!e.context) return; if (r = e.context.tagName, !l.contextGrabbers.hasOwnProperty(r) || !l.contextGrabbers[r].hasOwnProperty(t)) return; f(e); } } function p (e, t, r) { return e == 'openTag' ? (r.tagStart = t.column(), m) : e == 'closeTag' ? g : p; } function m (e, t, r) { return e == 'word' ? (r.tagName = t.current(), o = 'tag', b) : l.allowMissingTagName && e == 'endTag' ? (o = 'tag bracket', b(e, t, r)) : (o = 'error', m); } function g (e, t, r) { if (e != 'word') return l.allowMissingTagName && e == 'endTag' ? (o = 'tag bracket', v(e, t, r)) : (o = 'error', y); var n = t.current(); return r.context && r.context.tagName != n && l.implicitlyClosed.hasOwnProperty(r.context.tagName) && f(r), r.context && r.context.tagName == n || !1 === l.matchClosing ? (o = 'tag', v) : (o = 'tag error', y); } function v (e, t, r) { return e != 'endTag' ? (o = 'error', v) : (f(r), p); } function y (e, t, r) { return o = 'error', v(e, 0, r); } function b (e, t, r) { if (e == 'word') return o = 'attribute', w; if (e != 'endTag' && e != 'selfcloseTag') return o = 'error', b; var n = r.tagName; var i = r.tagStart; return r.tagName = r.tagStart = null, e == 'selfcloseTag' || l.autoSelfClosers.hasOwnProperty(n) ? h(r, n) : (h(r, n), r.context = new d(r, n, i == r.indented)), p; } function w (e, t, r) { return e == 'equals' ? x : (l.allowMissing || (o = 'error'), b(e, 0, r)); } function x (e, t, r) { return e == 'string' ? k : e == 'word' && l.allowUnquoted ? (o = 'string', b) : (o = 'error', b(e, 0, r)); } function k (e, t, r) { return e == 'string' ? k : b(e, 0, r); } return s.isInText = !0, { startState: function (e) { var t = { tokenize: s, state: p, indented: e || 0, tagName: null, tagStart: null, context: null }; return e != null && (t.baseIndent = e), t; }, token: function (e, t) { if (!t.tagName && e.sol() && (t.indented = e.indentation()), e.eatSpace()) return null; i = null; var r = t.tokenize(e, t); return (r || i) && r != 'comment' && (o = null, t.state = t.state(i || r, e, t), o && (r = o == 'error' ? r + ' error' : o)), r; }, indent: function (e, t, r) { var n = e.context; if (e.tokenize.isInAttribute) return e.tagStart == e.indented ? e.stringStartCol + 1 : e.indented + a; if (n && n.noIndent) return C.Pass; if (e.tokenize != c && e.tokenize != s) return r ? r.match(/^(\s*)/)[0].length : 0; if (e.tagName) return !1 !== l.multilineTagIndentPastTag ? e.tagStart + e.tagName.length + 2 : e.tagStart + a * (l.multilineTagIndentFactor || 1); if (l.alignCDATA && /<!\[CDATA\[/.test(t)) return 0; var i = t && /^<(\/)?([\w_:\.-]*)/.exec(t); if (i && i[1]) for (;n;) { if (n.tagName == i[2]) { n = n.prev; break; } if (!l.implicitlyClosed.hasOwnProperty(n.tagName)) break; n = n.prev; } else if (i) for (;n;) { var o = l.contextGrabbers[n.tagName]; if (!o || !o.hasOwnProperty(i[2])) break; n = n.prev; } for (;n && n.prev && !n.startOfLine;)n = n.prev; return n ? n.indent + a : e.baseIndent || 0; }, electricInput: /<\/[\s\w:]+>$/, blockCommentStart: '\x3c!--', blockCommentEnd: '--\x3e', configuration: l.htmlMode ? 'html' : 'xml', helperType: l.htmlMode ? 'html' : 'xml', skipAttribute: function (e) { e.state == x && (e.state = b); } }; }), C.defineMIME('text/xml', 'xml'), C.defineMIME('application/xml', 'xml'), C.mimeModes.hasOwnProperty('text/html') || C.defineMIME('text/html', { name: 'xml', htmlMode: !0 }); })), (function (e) { typeof exports == 'object' && typeof module == 'object' ? e(require('../../lib/codemirror'), require('../xml/xml'), require('../javascript/javascript'), require('../css/css')) : typeof define == 'function' && define.amd ? define(['../../lib/codemirror', '../xml/xml', '../javascript/javascript', '../css/css'], e) : e(CodeMirror); }(function (p) { 'use strict'; var i = { script: [['lang', /(javascript|babel)/i, 'javascript'], ['type', /^(?:text|application)\/(?:x-)?(?:java|ecma)script$|^module$|^$/i, 'javascript'], ['type', /./, 'text/plain'], [null, null, 'javascript']], style: [['lang', /^css$/i, 'css'], ['type', /^(text\/)?(x-)?(stylesheet|css)$/i, 'css'], ['type', /./, 'text/plain'], [null, null, 'css']] }; var n = {}; function m (e, t) { var r = e.match(function (e) { var t = n[e]; return t || (n[e] = new RegExp('\\s+' + e + "\\s*=\\s*('|\")?([^'\"]+)('|\")?\\s*")); }(t)); return r ? /^\s*(.*?)\s*$/.exec(r[2])[1] : ''; } function g (e, t) { return new RegExp((t ? '^' : '') + '</s*' + e + 's*>', 'i'); } function o (e, t) { for (var r in e) for (var n = t[r] || (t[r] = []), i = e[r], o = i.length - 1; o >= 0; o--)n.unshift(i[o]); }p.defineMode('htmlmixed', function (u, e) { var d = p.getMode(u, { name: 'xml', htmlMode: !0, multilineTagIndentFactor: e.multilineTagIndentFactor, multilineTagIndentPastTag: e.multilineTagIndentPastTag }); var f = {}; var t = e && e.tags; var r = e && e.scriptTypes; if (o(i, f), t && o(t, f), r) for (var n = r.length - 1; n >= 0; n--)f.script.unshift(['type', r[n].matches, r[n].mode]); function h (e, t) { var r; var n = d.token(e, t.htmlState); var i = /\btag\b/.test(n); if (i && !/[<>\s\/]/.test(e.current()) && (r = t.htmlState.tagName && t.htmlState.tagName.toLowerCase()) && f.hasOwnProperty(r))t.inTag = r + ' '; else if (t.inTag && i && />$/.test(e.current())) { var o = /^([\S]+) (.*)/.exec(t.inTag); t.inTag = null; var a = e.current() == '>' && (function (e, t) { for (var r = 0; r < e.length; r++) { var n = e[r]; if (!n[0] || n[1].test(m(t, n[0]))) return n[2]; } }(f[o[1]], o[2])); var l = p.getMode(u, a); var s = g(o[1], !0); var c = g(o[1], !1); t.token = function (e, t) { return e.match(s, !1) ? (t.token = h, t.localState = t.localMode = null, null) : (function (e, t, r) { var n = e.current(); var i = n.search(t); return i > -1 ? e.backUp(n.length - i) : n.match(/<\/?$/) && (e.backUp(n.length), e.match(t, !1) || e.match(n)), r; }(e, c, t.localMode.token(e, t.localState))); }, t.localMode = l, t.localState = p.startState(l, d.indent(t.htmlState, '')); } else t.inTag && (t.inTag += e.current(), e.eol() && (t.inTag += ' ')); return n; } return { startState: function () { return { token: h, inTag: null, localMode: null, localState: null, htmlState: p.startState(d) }; }, copyState: function (e) { var t; return e.localState && (t = p.copyState(e.localMode, e.localState)), { token: e.token, inTag: e.inTag, localMode: e.localMode, localState: t, htmlState: p.copyState(d, e.htmlState) }; }, token: function (e, t) { return t.token(e, t); }, indent: function (e, t, r) { return !e.localMode || /^\s*<\//.test(t) ? d.indent(e.htmlState, t) : e.localMode.indent ? e.localMode.indent(e.localState, t, r) : p.Pass; }, innerMode: function (e) { return { state: e.localState || e.htmlState, mode: e.localMode || d }; } }; }, 'xml', 'javascript', 'css'), p.defineMIME('text/html', 'htmlmixed'); })), (function (e) { typeof exports == 'object' && typeof module == 'object' ? e(require('../../lib/codemirror')) : typeof define == 'function' && define.amd ? define(['../../lib/codemirror'], e) : e(CodeMirror); }(function (l) { 'use strict'; function n (e, t, r) { this.orientation = t, this.scroll = r, this.screen = this.total = this.size = 1, this.pos = 0, this.node = document.createElement('div'), this.node.className = e + '-' + t, this.inner = this.node.appendChild(document.createElement('div')); var a = this; function n (e) { var t = l.wheelEventPixels(e)[a.orientation == 'horizontal' ? 'x' : 'y']; var r = a.pos; a.moveTo(a.pos + t), a.pos != r && l.e_preventDefault(e); }l.on(this.inner, 'mousedown', function (e) { if (e.which == 1) { l.e_preventDefault(e); var t = a.orientation == 'horizontal' ? 'pageX' : 'pageY'; var r = e[t]; var n = a.pos; l.on(document, 'mousemove', o), l.on(document, 'mouseup', i); } function i () { l.off(document, 'mousemove', o), l.off(document, 'mouseup', i); } function o (e) { if (e.which != 1) return i(); a.moveTo(n + (e[t] - r) * (a.total / a.size)); } }), l.on(this.node, 'click', function (e) { l.e_preventDefault(e); var t; var r = a.inner.getBoundingClientRect(); t = a.orientation == 'horizontal' ? e.clientX < r.left ? -1 : e.clientX > r.right ? 1 : 0 : e.clientY < r.top ? -1 : e.clientY > r.bottom ? 1 : 0, a.moveTo(a.pos + t * a.screen); }), l.on(this.node, 'mousewheel', n), l.on(this.node, 'DOMMouseScroll', n); }n.prototype.setPos = function (e, t) { return e < 0 && (e = 0), e > this.total - this.screen && (e = this.total - this.screen), !(!t && e == this.pos) && (this.pos = e, this.inner.style[this.orientation == 'horizontal' ? 'left' : 'top'] = e * (this.size / this.total) + 'px', !0); }, n.prototype.moveTo = function (e) { this.setPos(e) && this.scroll(e, this.orientation); }; function r (e, t, r) { this.addClass = e, this.horiz = new n(e, 'horizontal', r), t(this.horiz.node), this.vert = new n(e, 'vertical', r), t(this.vert.node), this.width = null; }n.prototype.update = function (e, t, r) { var n = this.screen != t || this.total != e || this.size != r; n && (this.screen = t, this.total = e, this.size = r); var i = this.screen * (this.size / this.total); i < 10 && (this.size -= 10 - i, i = 10), this.inner.style[this.orientation == 'horizontal' ? 'width' : 'height'] = i + 'px', this.setPos(this.pos, n); }, r.prototype.update = function (e) { if (this.width == null) { var t = window.getComputedStyle ? window.getComputedStyle(this.horiz.node) : this.horiz.node.currentStyle; t && (this.width = parseInt(t.height)); } var r = this.width || 0; var n = e.scrollWidth > e.clientWidth + 1; var i = e.scrollHeight > e.clientHeight + 1; return this.vert.node.style.display = i ? 'block' : 'none', this.horiz.node.style.display = n ? 'block' : 'none', i && (this.vert.update(e.scrollHeight, e.clientHeight, e.viewHeight - (n ? r : 0)), this.vert.node.style.bottom = n ? r + 'px' : '0'), n && (this.horiz.update(e.scrollWidth, e.clientWidth, e.viewWidth - (i ? r : 0) - e.barLeft), this.horiz.node.style.right = i ? r + 'px' : '0', this.horiz.node.style.left = e.barLeft + 'px'), { right: i ? r : 0, bottom: n ? r : 0 }; }, r.prototype.setScrollTop = function (e) { this.vert.setPos(e); }, r.prototype.setScrollLeft = function (e) { this.horiz.setPos(e); }, r.prototype.clear = function () { var e = this.horiz.node.parentNode; e.removeChild(this.horiz.node), e.removeChild(this.vert.node); }, l.scrollbarModel.simple = function (e, t) { return new r('CodeMirror-simplescroll', e, t); }, l.scrollbarModel.overlay = function (e, t) { return new r('CodeMirror-overlayscroll', e, t); }; })), (function (e) { typeof exports == 'object' && typeof module == 'object' ? e(require('../../lib/codemirror')) : typeof define == 'function' && define.amd ? define(['../../lib/codemirror'], e) : e(CodeMirror); }(function (T) { 'use strict'; var L = 'CodeMirror-hint-active'; function i (e, t) { this.cm = e, this.options = t, this.widget = null, this.debounce = 0, this.tick = 0, this.startPos = this.cm.getCursor('start'), this.startLen = this.cm.getLine(this.startPos.line).length - this.cm.getSelection().length; var r = this; e.on('cursorActivity', this.activityFunc = function () { r.cursorActivity(); }); }T.showHint = function (e, t, r) { if (!t) return e.showHint(r); r && r.async && (t.async = !0); var n = { hint: t }; if (r) for (var i in r)n[i] = r[i]; return e.showHint(n); }, T.defineExtension('showHint', function (e) { e = (function (e, t, r) { var n = e.options.hintOptions; var i = {}; for (var o in s)i[o] = s[o]; if (n) for (var o in n) void 0 !== n[o] && (i[o] = n[o]); if (r) for (var o in r) void 0 !== r[o] && (i[o] = r[o]); i.hint.resolve && (i.hint = i.hint.resolve(e, t)); return i; }(this, this.getCursor('start'), e)); var t = this.listSelections(); if (!(t.length > 1)) { if (this.somethingSelected()) { if (!e.hint.supportsSelection) return; for (var r = 0; r < t.length; r++) if (t[r].head.line != t[r].anchor.line) return; } this.state.completionActive && this.state.completionActive.close(); var n = this.state.completionActive = new i(this, e); n.options.hint && (T.signal(this, 'startCompletion', this), n.update(!0)); } }); var n = window.requestAnimationFrame || function (e) { return setTimeout(e, 1e3 / 60); }; var o = window.cancelAnimationFrame || clearTimeout; function M (e) { return typeof e == 'string' ? e : e.text; } function A (e, t) { for (;t && t != e;) { if (t.nodeName.toUpperCase() === 'LI' && t.parentNode == e) return t; t = t.parentNode; } } function a (i, e) { this.completion = i, this.data = e, this.picked = !1; var r = this; var o = i.cm; var a = this.hints = document.createElement('ul'); a.className = 'CodeMirror-hints', this.selectedHint = e.selectedHint || 0; for (var t = e.list, n = 0; n < t.length; ++n) { var l = a.appendChild(document.createElement('li')); var s = t[n]; var c = 'CodeMirror-hint' + (n != this.selectedHint ? '' : ' ' + L); s.className != null && (c = s.className + ' ' + c), l.className = c, s.render ? s.render(l, e, s) : l.appendChild(document.createTextNode(s.displayText || M(s))), l.hintId = n; } var u = o.cursorCoords(i.options.alignWithWord ? e.from : null); var d = u.left; var f = u.bottom; var h = !0; a.style.left = d + 'px', a.style.top = f + 'px'; var p = window.innerWidth || Math.max(document.body.offsetWidth, document.documentElement.offsetWidth); var m = window.innerHeight || Math.max(document.body.offsetHeight, document.documentElement.offsetHeight); (i.options.container || document.body).appendChild(a); var g = a.getBoundingClientRect(); var v = g.bottom - m; var y = a.scrollHeight > a.clientHeight + 1; var b = o.getScrollInfo(); if (v > 0) { var w = g.bottom - g.top; if (u.top - (u.bottom - g.top) - w > 0)a.style.top = (f = u.top - w) + 'px', h = !1; else if (m < w) { a.style.height = m - 5 + 'px', a.style.top = (f = u.bottom - g.top) + 'px'; var x = o.getCursor(); e.from.ch != x.ch && (u = o.cursorCoords(x), a.style.left = (d = u.left) + 'px', g = a.getBoundingClientRect()); } } var k; var C = g.right - p; if (C > 0 && (g.right - g.left > p && (a.style.width = p - 5 + 'px', C -= g.right - g.left - p), a.style.left = (d = u.left - C) + 'px'), y) for (var S = a.firstChild; S; S = S.nextSibling)S.style.paddingRight = o.display.nativeBarWidth + 'px'; o.addKeyMap(this.keyMap = (function (e, n) { var i = { Up: function () { n.moveFocus(-1); }, Down: function () { n.moveFocus(1); }, PageUp: function () { n.moveFocus(1 - n.menuSize(), !0); }, PageDown: function () { n.moveFocus(n.menuSize() - 1, !0); }, Home: function () { n.setFocus(0); }, End: function () { n.setFocus(n.length - 1); }, Enter: n.pick, Tab: n.pick, Esc: n.close }; var t = e.options.customKeys; var o = t ? {} : i; function r (e, t) { var r; r = typeof t != 'string' ? function (e) { return t(e, n); } : i.hasOwnProperty(t) ? i[t] : t, o[e] = r; } if (t) for (var a in t)t.hasOwnProperty(a) && r(a, t[a]); var l = e.options.extraKeys; if (l) for (var a in l)l.hasOwnProperty(a) && r(a, l[a]); return o; }(i, { moveFocus: function (e, t) { r.changeActive(r.selectedHint + e, t); }, setFocus: function (e) { r.changeActive(e); }, menuSize: function () { return r.screenAmount(); }, length: t.length, close: function () { i.close(); }, pick: function () { r.pick(); }, data: e }))), i.options.closeOnUnfocus && (o.on('blur', this.onBlur = function () { k = setTimeout(function () { i.close(); }, 100); }), o.on('focus', this.onFocus = function () { clearTimeout(k); })); return o.on('scroll', this.onScroll = function () { var e = o.getScrollInfo(); var t = o.getWrapperElement().getBoundingClientRect(); var r = f + b.top - e.top; var n = r - (window.pageYOffset || (document.documentElement || document.body).scrollTop); if (h || (n += a.offsetHeight), n <= t.top || n >= t.bottom) return i.close(); a.style.top = r + 'px', a.style.left = d + b.left - e.left + 'px'; }), T.on(a, 'dblclick', function (e) { var t = A(a, e.target || e.srcElement); t && t.hintId != null && (r.changeActive(t.hintId), r.pick()); }), T.on(a, 'click', function (e) { var t = A(a, e.target || e.srcElement); t && t.hintId != null && (r.changeActive(t.hintId), i.options.completeOnSingleClick && r.pick()); }), T.on(a, 'mousedown', function () { setTimeout(function () { o.focus(); }, 20); }), T.signal(e, 'select', t[this.selectedHint], a.childNodes[this.selectedHint]), !0; } function l (e, t, r, n) { if (e.async)e(t, n, r); else { var i = e(t, r); i && i.then ? i.then(n) : n(i); } }i.prototype = { close: function () { this.active() && (this.cm.state.completionActive = null, this.tick = null, this.cm.off('cursorActivity', this.activityFunc), this.widget && this.data && T.signal(this.data, 'close'), this.widget && this.widget.close(), T.signal(this.cm, 'endCompletion', this.cm)); }, active: function () { return this.cm.state.completionActive == this; }, pick: function (e, t) { var r = e.list[t]; r.hint ? r.hint(this.cm, e, r) : this.cm.replaceRange(M(r), r.from || e.from, r.to || e.to, 'complete'), T.signal(e, 'pick', r), this.close(); }, cursorActivity: function () { this.debounce && (o(this.debounce), this.debounce = 0); var e = this.cm.getCursor(); var t = this.cm.getLine(e.line); if (e.line != this.startPos.line || t.length - e.ch != this.startLen - this.startPos.ch || e.ch < this.startPos.ch || this.cm.somethingSelected() || e.ch && this.options.closeCharacters.test(t.charAt(e.ch - 1))) this.close(); else { var r = this; this.debounce = n(function () { r.update(); }), this.widget && this.widget.disable(); } }, update: function (t) { if (this.tick != null) { var r = this; var n = ++this.tick; l(this.options.hint, this.cm, this.options, function (e) { r.tick == n && r.finishUpdate(e, t); }); } }, finishUpdate: function (e, t) { this.data && T.signal(this.data, 'update'); var r = this.widget && this.widget.picked || t && this.options.completeSingle; this.widget && this.widget.close(), (this.data = e) && e.list.length && (r && e.list.length == 1 ? this.pick(e, 0) : (this.widget = new a(this, e), T.signal(e, 'shown'))); } }, a.prototype = { close: function () { if (this.completion.widget == this) { this.completion.widget = null, this.hints.parentNode.removeChild(this.hints), this.completion.cm.removeKeyMap(this.keyMap); var e = this.completion.cm; this.completion.options.closeOnUnfocus && (e.off('blur', this.onBlur), e.off('focus', this.onFocus)), e.off('scroll', this.onScroll); } }, disable: function () { this.completion.cm.removeKeyMap(this.keyMap); var e = this; this.keyMap = { Enter: function () { e.picked = !0; } }, this.completion.cm.addKeyMap(this.keyMap); }, pick: function () { this.completion.pick(this.data, this.selectedHint); }, changeActive: function (e, t) { if (e >= this.data.list.length ? e = t ? this.data.list.length - 1 : 0 : e < 0 && (e = t ? 0 : this.data.list.length - 1), this.selectedHint != e) { var r = this.hints.childNodes[this.selectedHint]; r && (r.className = r.className.replace(' ' + L, '')), (r = this.hints.childNodes[this.selectedHint = e]).className += ' ' + L, r.offsetTop < this.hints.scrollTop ? this.hints.scrollTop = r.offsetTop - 3 : r.offsetTop + r.offsetHeight > this.hints.scrollTop + this.hints.clientHeight && (this.hints.scrollTop = r.offsetTop + r.offsetHeight - this.hints.clientHeight + 3), T.signal(this.data, 'select', this.data.list[this.selectedHint], r); } }, screenAmount: function () { return Math.floor(this.hints.clientHeight / this.hints.firstChild.offsetHeight) || 1; } }, T.registerHelper('hint', 'auto', { resolve: function (e, t) { var r; var a = e.getHelpers(t, 'hint'); if (a.length) { var n = function (e, n, i) { var o = (function (e, t) { if (!e.somethingSelected()) return t; for (var r = [], n = 0; n < t.length; n++)t[n].supportsSelection && r.push(t[n]); return r; }(e, a)); !(function t (r) { if (r == o.length) return n(null); l(o[r], e, i, function (e) { e && e.list.length > 0 ? n(e) : t(r + 1); }); }(0)); }; return n.async = !0, n.supportsSelection = !0, n; } return (r = e.getHelper(e.getCursor(), 'hintWords')) ? function (e) { return T.hint.fromList(e, { words: r }); } : T.hint.anyword ? function (e, t) { return T.hint.anyword(e, t); } : function () {}; } }), T.registerHelper('hint', 'fromList', function (e, t) { var r; var n = e.getCursor(); var i = e.getTokenAt(n); var o = T.Pos(n.line, i.start); var a = n; i.start < n.ch && /\w/.test(i.string.charAt(n.ch - i.start - 1)) ? r = i.string.substr(0, n.ch - i.start) : (r = '', o = n); for (var l = [], s = 0; s < t.words.length; s++) { var c = t.words[s]; c.slice(0, r.length) == r && l.push(c); } if (l.length) return { list: l, from: o, to: a }; }), T.commands.autocomplete = T.showHint; var s = { hint: T.hint.auto, completeSingle: !0, alignWithWord: !0, closeCharacters: /[\s()\[\]{};:>,]/, closeOnUnfocus: !0, completeOnSingleClick: !0, container: null, customKeys: null, extraKeys: null }; T.defineOption('hintOptions', null); })), (function (e) { typeof exports == 'object' && typeof module == 'object' ? e(require('../../lib/codemirror'), require('../../mode/css/css')) : typeof define == 'function' && define.amd ? define(['../../lib/codemirror', '../../mode/css/css'], e) : e(CodeMirror); }(function (d) { 'use strict'; var f = { link: 1, visited: 1, active: 1, hover: 1, focus: 1, 'first-letter': 1, 'first-line': 1, 'first-child': 1, before: 1, after: 1, lang: 1 }; d.registerHelper('hint', 'css', function (e) { var t = e.getCursor(); var r = e.getTokenAt(t); var n = d.innerMode(e.getMode(), r.state); if (n.mode.name == 'css') { if (r.type == 'keyword' && '!important'.indexOf(r.string) == 0) return { list: ['!important'], from: d.Pos(t.line, r.start), to: d.Pos(t.line, r.end) }; var i = r.start; var o = t.ch; var a = r.string.slice(0, o - i); /[^\w$_-]/.test(a) && (a = '', i = o = t.ch); var l = d.resolveMode('text/css'); var s = []; var c = n.state.state; return c == 'pseudo' || r.type == 'variable-3' ? u(f) : c == 'block' || c == 'maybeprop' ? u(l.propertyKeywords) : c == 'prop' || c == 'parens' || c == 'at' || c == 'params' ? (u(l.valueKeywords), u(l.colorKeywords)) : c != 'media' && c != 'media_parens' || (u(l.mediaTypes), u(l.mediaFeatures)), s.length ? { list: s, from: d.Pos(t.line, i), to: d.Pos(t.line, o) } : void 0; } function u (e) { for (var t in e)a && t.lastIndexOf(a, 0) != 0 || s.push(t); } }); })), (function (e) { typeof exports == 'object' && typeof module == 'object' ? e(require('../../lib/codemirror'), require('./xml-hint')) : typeof define == 'function' && define.amd ? define(['../../lib/codemirror', './xml-hint'], e) : e(CodeMirror); }(function (i) { 'use strict'; var e = 'ab aa af ak sq am ar an hy as av ae ay az bm ba eu be bn bh bi bs br bg my ca ch ce ny zh cv kw co cr hr cs da dv nl dz en eo et ee fo fj fi fr ff gl ka de el gn gu ht ha he hz hi ho hu ia id ie ga ig ik io is it iu ja jv kl kn kr ks kk km ki rw ky kv kg ko ku kj la lb lg li ln lo lt lu lv gv mk mg ms ml mt mi mr mh mn na nv nb nd ne ng nn no ii nr oc oj cu om or os pa pi fa pl ps pt qu rm rn ro ru sa sc sd se sm sg sr gd sn si sk sl so st es su sw ss sv ta te tg th ti bo tk tl tn to tr ts tt tw ty ug uk ur uz ve vi vo wa cy wo fy xh yi yo za zu'.split(' '); var t = ['_blank', '_self', '_top', '_parent']; var r = ['ascii', 'utf-8', 'utf-16', 'latin1', 'latin1']; var n = ['get', 'post', 'put', 'delete']; var o = ['application/x-www-form-urlencoded', 'multipart/form-data', 'text/plain']; var a = ['all', 'screen', 'print', 'embossed', 'braille', 'handheld', 'print', 'projection', 'screen', 'tty', 'tv', 'speech', '3d-glasses', 'resolution [>][<][=] [X]', 'device-aspect-ratio: X/Y', 'orientation:portrait', 'orientation:landscape', 'device-height: [X]', 'device-width: [X]']; var l = { attrs: {} }; var s = { a: { attrs: { href: null, ping: null, type: null, media: a, target: t, hreflang: e } }, abbr: l, acronym: l, address: l, applet: l, area: { attrs: { alt: null, coords: null, href: null, target: null, ping: null, media: a, hreflang: e, type: null, shape: ['default', 'rect', 'circle', 'poly'] } }, article: l, aside: l, audio: { attrs: { src: null, mediagroup: null, crossorigin: ['anonymous', 'use-credentials'], preload: ['none', 'metadata', 'auto'], autoplay: ['', 'autoplay'], loop: ['', 'loop'], controls: ['', 'controls'] } }, b: l, base: { attrs: { href: null, target: t } }, basefont: l, bdi: l, bdo: l, big: l, blockquote: { attrs: { cite: null } }, body: l, br: l, button: { attrs: { form: null, formaction: null, name: null, value: null, autofocus: ['', 'autofocus'], disabled: ['', 'autofocus'], formenctype: o, formmethod: n, formnovalidate: ['', 'novalidate'], formtarget: t, type: ['submit', 'reset', 'button'] } }, canvas: { attrs: { width: null, height: null } }, caption: l, center: l, cite: l, code: l, col: { attrs: { span: null } }, colgroup: { attrs: { span: null } }, command: { attrs: { type: ['command', 'checkbox', 'radio'], label: null, icon: null, radiogroup: null, command: null, title: null, disabled: ['', 'disabled'], checked: ['', 'checked'] } }, data: { attrs: { value: null } }, datagrid: { attrs: { disabled: ['', 'disabled'], multiple: ['', 'multiple'] } }, datalist: { attrs: { data: null } }, dd: l, del: { attrs: { cite: null, datetime: null } }, details: { attrs: { open: ['', 'open'] } }, dfn: l, dir: l, div: l, dl: l, dt: l, em: l, embed: { attrs: { src: null, type: null, width: null, height: null } }, eventsource: { attrs: { src: null } }, fieldset: { attrs: { disabled: ['', 'disabled'], form: null, name: null } }, figcaption: l, figure: l, font: l, footer: l, form: { attrs: { action: null, name: null, 'accept-charset': r, autocomplete: ['on', 'off'], enctype: o, method: n, novalidate: ['', 'novalidate'], target: t } }, frame: l, frameset: l, h1: l, h2: l, h3: l, h4: l, h5: l, h6: l, head: { attrs: {}, children: ['title', 'base', 'link', 'style', 'meta', 'script', 'noscript', 'command'] }, header: l, hgroup: l, hr: l, html: { attrs: { manifest: null }, children: ['head', 'body'] }, i: l, iframe: { attrs: { src: null, srcdoc: null, name: null, width: null, height: null, sandbox: ['allow-top-navigation', 'allow-same-origin', 'allow-forms', 'allow-scripts'], seamless: ['', 'seamless'] } }, img: { attrs: { alt: null, src: null, ismap: null, usemap: null, width: null, height: null, crossorigin: ['anonymous', 'use-credentials'] } }, input: { attrs: { alt: null, dirname: null, form: null, formaction: null, height: null, list: null, max: null, maxlength: null, min: null, name: null, pattern: null, placeholder: null, size: null, src: null, step: null, value: null, width: null, accept: ['audio/*', 'video/*', 'image/*'], autocomplete: ['on', 'off'], autofocus: ['', 'autofocus'], checked: ['', 'checked'], disabled: ['', 'disabled'], formenctype: o, formmethod: n, formnovalidate: ['', 'novalidate'], formtarget: t, multiple: ['', 'multiple'], readonly: ['', 'readonly'], required: ['', 'required'], type: ['hidden', 'text', 'search', 'tel', 'url', 'email', 'password', 'datetime', 'date', 'month', 'week', 'time', 'datetime-local', 'number', 'range', 'color', 'checkbox', 'radio', 'file', 'submit', 'image', 'reset', 'button'] } }, ins: { attrs: { cite: null, datetime: null } }, kbd: l, keygen: { attrs: { challenge: null, form: null, name: null, autofocus: ['', 'autofocus'], disabled: ['', 'disabled'], keytype: ['RSA'] } }, label: { attrs: { for: null, form: null } }, legend: l, li: { attrs: { value: null } }, link: { attrs: { href: null, type: null, hreflang: e, media: a, sizes: ['all', '16x16', '16x16 32x32', '16x16 32x32 64x64'] } }, map: { attrs: { name: null } }, mark: l, menu: { attrs: { label: null, type: ['list', 'context', 'toolbar'] } }, meta: { attrs: { content: null, charset: r, name: ['viewport', 'application-name', 'author', 'description', 'generator', 'keywords'], 'http-equiv': ['content-language', 'content-type', 'default-style', 'refresh'] } }, meter: { attrs: { value: null, min: null, low: null, high: null, max: null, optimum: null } }, nav: l, noframes: l, noscript: l, object: { attrs: { data: null, type: null, name: null, usemap: null, form: null, width: null, height: null, typemustmatch: ['', 'typemustmatch'] } }, ol: { attrs: { reversed: ['', 'reversed'], start: null, type: ['1', 'a', 'A', 'i', 'I'] } }, optgroup: { attrs: { disabled: ['', 'disabled'], label: null } }, option: { attrs: { disabled: ['', 'disabled'], label: null, selected: ['', 'selected'], value: null } }, output: { attrs: { for: null, form: null, name: null } }, p: l, param: { attrs: { name: null, value: null } }, pre: l, progress: { attrs: { value: null, max: null } }, q: { attrs: { cite: null } }, rp: l, rt: l, ruby: l, s: l, samp: l, script: { attrs: { type: ['text/javascript'], src: null, async: ['', 'async'], defer: ['', 'defer'], charset: r } }, section: l, select: { attrs: { form: null, name: null, size: null, autofocus: ['', 'autofocus'], disabled: ['', 'disabled'], multiple: ['', 'multiple'] } }, small: l, source: { attrs: { src: null, type: null, media: null } }, span: l, strike: l, strong: l, style: { attrs: { type: ['text/css'], media: a, scoped: null } }, sub: l, summary: l, sup: l, table: l, tbody: l, td: { attrs: { colspan: null, rowspan: null, headers: null } }, textarea: { attrs: { dirname: null, form: null, maxlength: null, name: null, placeholder: null, rows: null, cols: null, autofocus: ['', 'autofocus'], disabled: ['', 'disabled'], readonly: ['', 'readonly'], required: ['', 'required'], wrap: ['soft', 'hard'] } }, tfoot: l, th: { attrs: { colspan: null, rowspan: null, headers: null, scope: ['row', 'col', 'rowgroup', 'colgroup'] } }, thead: l, time: { attrs: { datetime: null } }, title: l, tr: l, track: { attrs: { src: null, label: null, default: null, kind: ['subtitles', 'captions', 'descriptions', 'chapters', 'metadata'], srclang: e } }, tt: l, u: l, ul: l, var: l, video: { attrs: { src: null, poster: null, width: null, height: null, crossorigin: ['anonymous', 'use-credentials'], preload: ['auto', 'metadata', 'none'], autoplay: ['', 'autoplay'], mediagroup: ['movie'], muted: ['', 'muted'], controls: ['', 'controls'] } }, wbr: l }; var c = { accesskey: ['a', 'b', 'c', 'd', 'e', 'f', 'g', 'h', 'i', 'j', 'k', 'l', 'm', 'n', 'o', 'p', 'q', 'r', 's', 't', 'u', 'v', 'w', 'x', 'y', 'z', '0', '1', '2', '3', '4', '5', '6', '7', '8', '9'], class: null, contenteditable: ['true', 'false'], contextmenu: null, dir: ['ltr', 'rtl', 'auto'], draggable: ['true', 'false', 'auto'], dropzone: ['copy', 'move', 'link', 'string:', 'file:'], hidden: ['hidden'], id: null, inert: ['inert'], itemid: null, itemprop: null, itemref: null, itemscope: ['itemscope'], itemtype: null, lang: ['en', 'es'], spellcheck: ['true', 'false'], style: null, tabindex: ['1', '2', '3', '4', '5', '6', '7', '8', '9'], title: null, translate: ['yes', 'no'], onclick: null, rel: ['stylesheet', 'alternate', 'author', 'bookmark', 'help', 'license', 'next', 'nofollow', 'noreferrer', 'prefetch', 'prev', 'search', 'tag'] }; function u (e) { for (var t in c)c.hasOwnProperty(t) && (e.attrs[t] = c[t]); } for (var d in u(l), s)s.hasOwnProperty(d) && s[d] != l && u(s[d]); i.htmlSchema = s, i.registerHelper('hint', 'html', function (e, t) { var r = { schemaInfo: s }; if (t) for (var n in t)r[n] = t[n]; return i.hint.xml(e, r); }); })), (function (e) { typeof exports == 'object' && typeof module == 'object' ? e(require('../../lib/codemirror')) : typeof define == 'function' && define.amd ? define(['../../lib/codemirror'], e) : e(CodeMirror); }(function (c) { var u = c.Pos; function f (e, t) { for (var r = 0, n = e.length; r < n; ++r)t(e[r]); } function r (e, t, r, n) { var i = e.getCursor(); var o = r(e, i); if (!/\b(?:string|comment)\b/.test(o.type)) { var a = c.innerMode(e.getMode(), o.state); if (a.mode.helperType !== 'json') { o.state = a.state, /^[\w$_]*$/.test(o.string) ? o.end > i.ch && (o.end = i.ch, o.string = o.string.slice(0, i.ch - o.start)) : o = { start: i.ch, end: i.ch, string: '', state: o.state, type: o.string == '.' ? 'property' : null }; for (var l = o; l.type == 'property';) { if ((l = r(e, u(i.line, l.start))).string != '.') return; if (l = r(e, u(i.line, l.start)), !s) var s = []; s.push(l); } return { list: (function (e, t, r, n) { var i = []; var o = e.string; var a = n && n.globalScope || window; function l (e) { e.lastIndexOf(o, 0) != 0 || (function (e, t) { if (Array.prototype.indexOf) return e.indexOf(t) != -1; for (var r = e.length; r--;) if (e[r] === t) return !0; return !1; }(i, e)) || i.push(e); } function s (e) { typeof e == 'string' ? f(h, l) : e instanceof Array ? f(p, l) : e instanceof Function && f(m, l), (function (e, t) { if (Object.getOwnPropertyNames && Object.getPrototypeOf) for (var r = e; r; r = Object.getPrototypeOf(r))Object.getOwnPropertyNames(r).forEach(t); else for (var n in e)t(n); }(e, l)); } if (t && t.length) { var c; var u = t.pop(); for (u.type && u.type.indexOf('variable') === 0 ? (n && n.additionalContext && (c = n.additionalContext[u.string]), n && !1 === n.useGlobalScope || (c = c || a[u.string])) : u.type == 'string' ? c = '' : u.type == 'atom' ? c = 1 : u.type == 'function' && (a.jQuery == null || u.string != '$' && u.string != 'jQuery' || typeof a.jQuery != 'function' ? a._ != null && u.string == '_' && typeof a._ == 'function' && (c = a._()) : c = a.jQuery()); c != null && t.length;)c = c[t.pop().string]; c != null && s(c); } else { for (var d = e.state.localVars; d; d = d.next)l(d.name); for (d = e.state.globalVars; d; d = d.next)l(d.name); n && !1 === n.useGlobalScope || s(a), f(r, l); } return i; }(o, s, t, n)), from: u(i.line, o.start), to: u(i.line, o.end) }; } } } function n (e, t) { var r = e.getTokenAt(t); return t.ch == r.start + 1 && r.string.charAt(0) == '.' ? (r.end = r.start, r.string = '.', r.type = 'property') : /^\.[\w$_]*$/.test(r.string) && (r.type = 'property', r.start++, r.string = r.string.replace(/\./, '')), r; }c.registerHelper('hint', 'javascript', function (e, t) { return r(e, i, function (e, t) { return e.getTokenAt(t); }, t); }), c.registerHelper('hint', 'coffeescript', function (e, t) { return r(e, o, n, t); }); var h = 'charAt charCodeAt indexOf lastIndexOf substring substr slice trim trimLeft trimRight toUpperCase toLowerCase split concat match replace search'.split(' '); var p = 'length concat join splice push pop shift unshift slice reverse sort indexOf lastIndexOf every some filter forEach map reduce reduceRight '.split(' '); var m = 'prototype apply call bind'.split(' '); var i = 'break case catch class const continue debugger default delete do else export extends false finally for function if in import instanceof new null return super switch this throw true try typeof var void while with yield'.split(' '); var o = 'and break catch class continue delete do else extends false finally for if in instanceof isnt new no not null of off on or return switch then throw true try typeof until void while with yes'.split(' '); }));
