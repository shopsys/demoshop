{% extends 'Front/Layout/layoutWithoutPanel.html.twig' %}

{% block title %}
    {{ 'Personal data'|trans }}
{% endblock %}
{% block h1 %}{% endblock %}

{% block main_content %}
    <div class="web__line">
        <div class="web__container">

            <h1>{{ 'Personal data'|trans }}</h1>
            {{ form_start(form) }}
                {{ form_errors(form) }}

                <div id="{{ form.customerUserData.vars.id }}">
                    <div class="wrap-box">
                        <h2 class="wrap-box__title">{{ 'Personal data'|trans }}</h2>
                        <div class="wrap-box__in">
                            {{ form_row(form.customerUserData.firstName, { label: 'First name'|trans}) }}
                            {{ form_row(form.customerUserData.lastName, { label: 'Last name'|trans}) }}
                            {{ form_row(form.customerUserData.telephone, { label: 'Telephone'|trans}) }}
                            {{ form_row(form.customerUserData.email, { label: 'E-mail'|trans}) }}
                            <p>
                                {{ 'To prevent the possibility of account theft, the change of the e-mail address must be dealt with individually. If your e-mail address has changed, please contact us.'|trans }}
                            </p>
                        </div>
                    </div>

                    <div class="wrap-box">
                        <h2 class="wrap-box__title">{{ 'Changing password'|trans }}</h2>
                        <div class="wrap-box__in" id="{{ form.customerUserData.password.vars.id }}">
                            {{ form_row(form.customerUserData.password.first, { label: 'Password'|trans}) }}
                            <i class="svg svg-info in-icon in-icon--info form-line__info js-tooltip"
                                data-toggle="tooltip"
                                data-placement="right"
                                title=""
                                data-original-title="{{ 'Password must be at least six characters and can\'t be the same as entered e-mail or its part before at sign.'|trans }}">
                             </i>
                            {{ form_row(form.customerUserData.password.second, { label: 'Password again'|trans}) }}
                        </div>
                    </div>
                </div>

                {% set isCompanyWithMultipleUsers = customerUser.getBillingAddress().isCompanyWithMultipleUsers() %}
                {% set disabledInputClassIfCompanyWithMultipleUsers = '' %}
                {% if isCompanyWithMultipleUsers %}
                    {% set disabledInputClassIfCompanyWithMultipleUsers = 'form-input-disabled' %}
                {% endif %}
                <div id="{{ form.billingAddressData.vars.id }}">
                    <div class="wrap-box">
                        <h2 class="wrap-box__title">{{ 'Company data'|trans }}</h2>
                        <div class="wrap-box__in">
                            <div {% if isCompanyWithMultipleUsers %}class="display-none"{% endif %}>
                                {{ form_row(form.billingAddressData.companyCustomer, {
                                    attr: { class: 'js-checkbox-toggle', 'data-checkbox-toggle-container-id': 'js-company-fields' },
                                    label: 'I buy on company behalf'|trans})
                                }}
                            </div>
                            <div id="js-company-fields">
                                {{ form_row(form.billingAddressData.companyName, { label: 'Company'|trans, attr: {readonly: isCompanyWithMultipleUsers, class: disabledInputClassIfCompanyWithMultipleUsers } }) }}
                                {{ form_row(form.billingAddressData.companyNumber, { label: 'Company number'|trans, attr: {readonly: isCompanyWithMultipleUsers, class: disabledInputClassIfCompanyWithMultipleUsers } }) }}
                                {{ form_row(form.billingAddressData.companyTaxNumber, { label: 'Tax number'|trans, attr: {readonly: isCompanyWithMultipleUsers, class: disabledInputClassIfCompanyWithMultipleUsers } }) }}
                            </div>
                        </div>
                    </div>

                    <div class="wrap-box">
                        <h2 class="wrap-box__title">{{ 'Address'|trans }}</h2>

                        <div class="wrap-box__in">
                            {{ form_row(form.billingAddressData.street, { label: 'Street'|trans, attr: {readonly: isCompanyWithMultipleUsers, class: disabledInputClassIfCompanyWithMultipleUsers } }) }}
                            {{ form_row(form.billingAddressData.city, { label: 'City'|trans, attr: {readonly: isCompanyWithMultipleUsers, class: disabledInputClassIfCompanyWithMultipleUsers } }) }}
                            {{ form_row(form.billingAddressData.postcode, { label: 'Postcode'|trans, attr: {readonly: isCompanyWithMultipleUsers, class: disabledInputClassIfCompanyWithMultipleUsers } }) }}
                            {{ form_row(form.billingAddressData.country, { label: 'Country'|trans, attr: {readonly: isCompanyWithMultipleUsers, class: disabledInputClassIfCompanyWithMultipleUsers } }) }}
                        </div>
                    </div>
                </div>

                <div id="{{ form.deliveryAddressData.vars.id }}" class="wrap-box">
                    <h2 class="wrap-box__title">{{ 'Delivery addresses'|trans }}</h2>
                    <div class="wrap-box__in">

                        {{ form_row(form.customerUserData.defaultDeliveryAddress) }}
                        {{ form_row(form.deliveryAddressData.addressFilled, {
                            attr: { class: 'js-checkbox-toggle js-delivery-address-toggle', 'data-checkbox-toggle-container-id': 'js-delivery-address-fields' },
                            label: 'New delivery address'|trans})
                        }}
                        <div id="js-delivery-address-fields">
                            {{ form_row(form.deliveryAddressData.companyName, { label: 'Company'|trans }) }}
                            {{ form_row(form.deliveryAddressData.firstName, { label: 'First name'|trans }) }}
                            {{ form_row(form.deliveryAddressData.lastName, { label: 'Last name'|trans }) }}
                            {{ form_row(form.deliveryAddressData.telephone, { label: 'Telephone'|trans }) }}
                            {{ form_row(form.deliveryAddressData.street, { label: 'Street'|trans }) }}
                            {{ form_row(form.deliveryAddressData.city, { label: 'City'|trans }) }}
                            {{ form_row(form.deliveryAddressData.postcode, { label: 'Postcode'|trans }) }}
                            {{ form_row(form.deliveryAddressData.country, { label: 'Country'|trans }) }}
                        </div>
                    </div>
                </div>

                {{ form_widget(form.save, { label: 'Save changes'|trans}) }}

            {{ form_end(form) }}
        </div>
    </div>
{% endblock %}
